(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[2565],{51243:function(e){e.exports={id:"comm_img_dhm--sprite-usage",viewBox:"0 0 20.002 14.03",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_img_dhm--sprite",toString:function(){return this.url}}},69877:function(e){var t=Math.floor,n=Math.random;e.exports=function(e,o){return e+t(n()*(o-e+1))}},36128:function(e,t,n){var o=n(20731),i=n(21078),r=n(45652);e.exports=function(e,t,n){var a=e.length;if(a<2)return a?r(e[0]):[];for(var s=-1,u=Array(a);++s<a;)for(var c=e[s],l=-1;++l<a;)l!=s&&(u[s]=o(u[s]||c,e[l],t,n));return r(i(u,1),t,n)}},83608:function(e,t,n){var o=n(69877),i=n(16612),r=n(18601),a=parseFloat,s=Math.min,u=Math.random;e.exports=function(e,t,n){if(n&&"boolean"!=typeof n&&i(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=r(e),void 0===t?(t=e,e=0):t=r(t)),e>t){var c=e;e=t,t=c}if(n||e%1||t%1){var l=u();return s(e+l*(t-e+a("1e-"+((l+"").length-1))),t)}return o(e,t)}},76566:function(e,t,n){var o=n(34963),i=n(5976),r=n(36128),a=n(29246),s=i((function(e){return r(o(e,a))}));e.exports=s},66274:function(e,t){"use strict";t.Z={receiveTips:"sft1FrYIdQNDkygBE2_w",bottomBtns:"uwvenAZWGyD5RdZJBDtY",container:"_4Xj9NqT3RlWoXOF9sIB",bgColor:"K9PMAylPFhLQvjAV0rzb",customizeContainer:"eCrtkyvaEw5EGq1iTkpb",h5Btn:"djvqyB9IgkiFd8Rww9SE",btn2:"KijbywXOWoHmMhQVYbMW",receiveDiscount:"Qxd3eeaOHzsm5OavWHD6",btn1:"OJKnuX1SdrakdqWua5Ix",formModal:"M2oU7LFq2dpRdr40epb_",receiveBtn:"G60ovJtuaDb1n92ATPH7",receiveTimes:"Jj0VvYFH3Jv3P4ZzMrq5",introduction:"yWSWJBRH15O8UNBwi6Hc",paddingBottom:"Ci5BesSJeFF7V3p9ekNM",introductionInner:"mRWJ3dwis6LX5Cigw20q",activityBottom:"f6Hdppzziw5Ocz_4b7HG",discountView:"f5Ruu8CIOUwvNyM9R1uY",header:"nFkHDrNVzucOSjOVSkVo",changeGameBtns:"l33Ka3g_LqqyxWZG6i6s",total:"HUnR0IXcIWtwiRH69sAz",customizeBtn:"AzSfD8qP8gM2kUfA2vid",customizeWrap:"K9JimfJdAKv0fvE8GgcR",textDarken:"r62waCRxFhGGf1TU0ZsQ",btn:"lzu35D2wRxqVmh4J0_A3",processing:"H5yJT30fplLKopY3Ucle",forward:"d4npa_nICeiD5SVDAHEz",formItemDiv:"l7fBL945zxYK6Avbm5hA"}},36777:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var o,i=n(83608),r=n.n(i),a=n(21797),s=n(92317),u=n(72283),c=n(20793),l=n(30813),d=n(81764),h=n(98292),p="PEjqfiR1C5ewb4LtP_5K",v="qfDVmdZI63JFsYxWlKzQ",f=(0,l.wA)({name:"QRCode"})(o=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e,t=arguments[0],n=(0,d.QT)(),o=n.t,i=(0,h.h)(),a=i.siteURLInfos,s=(null==a||null===(e=a.download_domain)||void 0===e?void 0:e.length)||0;return s?t("div",{class:p},[t("vue-qr",{class:v,attrs:{text:null==a?void 0:a.download_domain[r()(1,s)-1],logoMargin:1,margin:10,size:200}}),t("div",[o("lobby.rightBar.scanQR")]),t("div",[o("lobby.rightBar.downloadDevice")])]):t("span")}}]),n}(l.XY))||o},52565:function(e,t,n){"use strict";n.d(t,{Z:function(){return Tt}});var o,i,r,a,s,u,c,l,d=n(22705),h=n(70970),p=n(2813),v=n(3587),f=n(21797),m=n(92317),b=n(82345),y=n(72283),g=n(20793),Z=n(50125),C=n(17360),P=(n(41320),n(92222),n(26699),n(32023),n(74916),n(23123),n(9653),n(41539),n(39714),n(15306),n(38880),n(30813)),x=n(95306),k=n(90416),w=n(90825),I=n(72433),T=n(24500),D=n(81830),R=n(63980),S=n(7926),N=n(32496),M=n(81764),B=n(98292),z=n(95627),L=n(71707),_=(n(21249),n(63137)),A=n.n(_),F=n(3741),G=n(84418),E="cxJoWcpxAPgxzig9Xm_6",W="q1XRfkvWzaYtbQ4fcEdH",V="ZWtaC_6onbVSxOpvwnbW",O="TyS2BM0uUd9lFWreUJa2";!function(e){e[e.firstIndex=0]="firstIndex",e[e.secondIndex=1]="secondIndex",e[e.thirdIndex=2]="thirdIndex",e[e.fourIndex=3]="fourIndex"}(l||(l={}));var q,U,Q=(o=(0,P.wA)({name:"PublicIntroduction"}),i=(0,P.fI)({required:!0}),r=(0,P.fI)({default:!1}),o((s=function(e){(0,y.Z)(n,e);var t=(0,g.Z)(n);function n(){var e;(0,f.Z)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),(0,v.Z)((0,b.Z)(e),"eventData",u,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"isShowBottom",c,(0,b.Z)(e)),e}return(0,m.Z)(n,[{key:"getLang",get:function(){var e=A()(w.CM.ServiceLanguageMap),t=(0,B.h)().language,n=this.eventData||{},o=n.isDefaultLangRuleText,i=n.translateRuleText;return o?t:e[i]}},{key:"renderIntroductionTime",value:function(e){var t=this.$createElement,n=this.eventData;if(n){if(2===(null==n?void 0:n.isShowTime))return null;var o=(0,M.QT)().t,i=G.Z.localUtcOffset/60,r=function(e){return L.ZP.format(e)};return t("div",[t("span",{class:V},[e,o("lobby.event.time",this.getLang),"(GMT",i>=0&&"+",i,"):"]),t("div",[t("span",[r(n.startTime)," - ",r(n.endTime)]),n.timingList&&t("div",[t("span",[o("lobby.event.validDay.renPocketTime",this.getLang),":"," "]),n.timingList.map((function(e,n){var o=G.Z.getFormatTime(e.timing),i=G.Z.getFormatTime(e.timing+e.duration);return t("span",["".concat(n>0?",":"").concat(o," - ").concat(i)])}))])])])}}},{key:"renderActiveCondition",value:function(e){var t=this.$createElement,n=this.eventData;if(n){var o=(0,M.QT)().t;return t("div",[t("span",{class:V},[e,o("lobby.event.condition",this.getLang),":"]),t("div",[t("span",[n.activeCondition])])])}}},{key:"renderConditionText",value:function(e){var t=this.$createElement,n=this.eventData;if(n){var o,i=(0,M.QT)().t;switch(n.template){case F.dF.Deposit:o=i("lobby.event.conditionDeposit",this.getLang);break;case F.dF.Wager:case F.dF.Rescue:case F.dF.LuckyWheel:case F.dF.LuckyWheelNew:case F.dF.LuckyBet:o=i("lobby.event.conditionPlatform",this.getLang)}return t("div",[t("span",{class:V},[e,o,":"]),t("div",[t("span",[n.conditionText])])])}}},{key:"renderContent",value:function(e){var t=this.$createElement,n=this.eventData;if(n){var o=(0,M.QT)().t;return t("div",[t("span",{class:V},[e,o("lobby.event.content",this.getLang),":"]),t("div",{domProps:{innerHTML:n.content}})])}}},{key:"render",value:function(){var e,t=this,n=arguments[0],o=this.eventData,i=(0,M.QT)(),r=i.t,a=[this.renderIntroductionTime];return o.activeCondition&&a.push(this.renderActiveCondition),o.conditionText&&a.push(this.renderConditionText),o.content&&a.push(this.renderContent),n("div",{class:(e={},(0,Z.Z)(e,E,!0),(0,Z.Z)(e,O,this.isShowBottom),e)},[n("div",{class:W},[a.map((function(e,n){return 2===(null==o?void 0:o.isShowTime)&&1===n?e(r("",t.getLang)):e(r("lobby.event.".concat(l[n]),t.getLang))}))])])}}]),n}(P.XY),u=(0,C.Z)(s.prototype,"eventData",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,C.Z)(s.prototype,"isShowBottom",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=s))||a),H="Aldb_AEquwGt4Naeu054";!function(e){e[e.firstIndex=0]="firstIndex",e[e.secondIndex=1]="secondIndex",e[e.thirdIndex=2]="thirdIndex",e[e.fourIndex=3]="fourIndex"}(U||(U={}));var j,J,Y,K,X,$,ee,te,ne,oe,ie,re,ae,se,ue,ce,le,de,he,pe,ve,fe,me,be,ye,ge,Ze,Ce,Pe,xe,ke,we,Ie,Te,De,Re,Se,Ne=(0,P.wA)({name:"DiscountCodeIntroduction"})(q=function(e){(0,y.Z)(n,e);var t=(0,g.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"render",value:function(){var e=this,t=arguments[0],n=this.eventData,o=(0,M.QT)(),i=o.t,r=[];return 2!==(null==n?void 0:n.isShowDetailTime)&&(r=[this.renderIntroductionTime]),n.activeCondition&&r.push(this.renderActiveCondition),n.conditionText&&r.push(this.renderConditionText),n.content&&r.push(this.renderContent),t("div",{class:[E]},[t("div",{class:[W,H]},[r.map((function(t,o){return 2===(null==n?void 0:n.isShowTime)&&1===o?t(i("",e.getLang)):t(i("lobby.event.".concat(U[o]),e.getLang))}))])])}}]),n}(Q))||q,Me=n(36777),Be=n(36568),ze=n.n(Be),Le=n(27361),_e=n.n(Le),Ae=n(36968),Fe=n.n(Ae),Ge=n(7903),Ee=(n(69826),n(21703),n(14577)),We=n(33990),Ve=n(37694),Oe="sEwOwpg8S8Rh1B5DlMaL",qe="U8qbxjQ08yFU2gF6pJKp",Ue="KQNHxcziC09siVY3IRAG",Qe="dveNh6HthcvUv5tUMGZh",He="in3sxFTY6sbUe3gU7yyg",je="Su420qcBnWNUleqMYHVI",Je="PIbqlhcOOfS3PWfmaSYk",Ye="zrHzqGCUK63BIwTOciU8",Ke="pz_yjnZmWF8GPyPDxsAl",Xe="fMkwNR9usmJOtln1wK_b",$e="mZ3ZJnwtlH7ye74y2j4k",et="YFc0xyTCmIqWsrBtTB5t",tt="cq9ToUcLNsEurR8F2r8m",nt=n(41800),ot=(j=(0,P.wA)({name:"VeriryBindPhone"}),J=(0,P.Rl)(),Y=(0,P.Rl)(),K=(0,P.Rl)(),X=(0,P.fI)({required:!1}),$=(0,P.fI)(z.ZP.number.isRequired),ee=(0,P.fI)(z.ZP.number),te=(0,P.fI)(z.ZP.number),ne=(0,P.fI)(z.ZP.string),oe=(0,P.RL)("form.phone"),ie=(0,P.RL)("form.captcha"),re=(0,P.y1)("complete"),ae=(0,Ee.WY)(),se=(0,Ee.K4)(),j((ce=function(e){(0,y.Z)(a,e);var t,n,o,i,r=(0,g.Z)(a);function a(){var e;(0,f.Z)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),(0,v.Z)((0,b.Z)(e),"phoneNumberFormItemRef",le,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"formModel",de,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"smsVerificationRef",he,(0,b.Z)(e)),(0,Z.Z)((0,b.Z)(e),"form",{username:"",userpass:"",phone:"",captcha:""}),(0,v.Z)((0,b.Z)(e),"item",pe,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"activeId",ve,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"codeType",fe,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"bindPhone",me,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"areaCode",be,(0,b.Z)(e)),(0,Z.Z)((0,b.Z)(e),"rules",{}),(0,Z.Z)((0,b.Z)(e),"currentPhoneNumberSegment",""),(0,Z.Z)((0,b.Z)(e),"isPhoneNumberChecking",!1),(0,Z.Z)((0,b.Z)(e),"isPhoneNumberPassed",null),(0,Z.Z)((0,b.Z)(e),"phoneNumberValidError",null),(0,Z.Z)((0,b.Z)(e),"desensitizedPhoneNumber",""),e}return(0,m.Z)(a,[{key:"onInputValueChange",value:function(){this.onComplete()}},{key:"onComplete",value:function(){return this.form}},{key:"loginConfig",get:function(){var e=(0,B.h)();return{countryInfos:e.countryInfos,defaultCountry:e.defaultCountry}}},{key:"phoneNumberFormat",get:function(){var e=this,t=this.form;if(!t.phone)return"";var n=this.loginConfig.countryInfos.find((function(t){return t.phoneNumberSegment===e.currentPhoneNumberSegment})),o="".concat(this.areaCode?this.areaCode:null==n?void 0:n.phoneNumberSegment,"-");return"".concat(this.desensitizedPhoneNumber?"":o).concat(t.phone)}},{key:"isBindPhone",get:function(){return this.desensitizedPhoneNumber}},{key:"userInfos",get:function(){return(0,B.h)().userInfos}},{key:"tryInitCurrentPhoneNumberSegment",value:function(){var e,t,n,o,i=this,r=null===(e=this.loginConfig)||void 0===e||null===(t=e.countryInfos)||void 0===t?void 0:t.find((function(e){return(null==e?void 0:e.phoneNumberSegment)===i.areaCode}));this.currentPhoneNumberSegment=r?this.areaCode:(null===(n=this.loginConfig)||void 0===n||null===(o=n.defaultCountry)||void 0===o?void 0:o.phoneNumberSegment)||""}},{key:"mounted",value:(i=(0,p.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.userInfos&&(this.desensitizedPhoneNumber=this.userInfos.mobile_phone),this.isBindPhone){e.next=4;break}return e.next=4,Ve.Z.initSmsCountry();case 4:this.tryInitCurrentPhoneNumberSegment();case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"doLoginValidate",value:(o=(0,p.Z)((0,h.Z)().mark((function e(t){var n,o,i,r,a,s,u,c=arguments;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},o=n.forceGeetest){e.next=3;break}return e.abrupt("return");case 3:if(!o){e.next=17;break}if(!w.sG.User.checkGeetestRestricted()){e.next=6;break}return e.abrupt("return",Promise.reject());case 6:return i=(0,B.h)(),r=i.systemInfos,a=o?null==r?void 0:r.geetest_captcha_id.force_geetest:null==r?void 0:r.geetest_captcha_id.login,e.next=10,w.sG.User.initGeetest({geetestConfig:{captchaId:a||""}});case 10:return s=e.sent,e.next=13,new Promise((function(e,t){null==s||s.onSuccess((function(){e(s.getValidate())})).onClose((function(){s.destroy(),t()})).onError((function(){s.destroy(),t()}))}));case 13:if(!(u=e.sent)){e.next=17;break}return e.next=17,w.sG.User.validateGeetest((0,Ge.Z)({account:t.username},u));case 17:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"onSubmit",value:(n=(0,p.Z)((0,h.Z)().mark((function e(){var t,n,o;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.formModel.validate();case 3:return e.abrupt("return",{verifyCode:this.smsVerificationRef.verificationCode,phone:this.form.phone});case 6:return e.prev=6,e.t0=e.catch(0),t=w.CM.ServiceCode,n=null===e.t0||void 0===e.t0?void 0:e.t0.data,(o=null==n?void 0:n.code)!==t.LOGIN_ERROR&&o!==t.ACCOUNT_FREEZE||w.sG.Modal.open("loginModal"),console.error(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return n.apply(this,arguments)})},{key:"validPhoneNumberInput",value:(t=(0,p.Z)((0,h.Z)().mark((function e(t){var n,o,i,r,a;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<(null===(n=this.desensitizedPhoneNumber)||void 0===n?void 0:n.length))){e.next=3;break}return this.isPhoneNumberPassed=null,e.abrupt("return",Promise.reject(new Error));case 3:return o=(0,D.apiVerifyPhoneNumberAfterLogin)({phone:t},{silentOnError:!0}),this.isPhoneNumberChecking=!0,e.next=7,(0,nt.Z)(o);case 7:if(i=e.sent,r=(0,d.Z)(i,1),a=r[0],this.phoneNumberValidError=a,this.isPhoneNumberChecking=!1,this.isPhoneNumberPassed=!a,!a){e.next=15;break}return e.abrupt("return",Promise.reject(a));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"phoneDisable",value:function(){var e,t,n=+new Date,o=null!==(e=this.item)&&void 0!==e&&e.startTime?parseInt(String(1e3*this.item.startTime)):0,i=null!==(t=this.item)&&void 0!==t&&t.endTime?parseInt(String(1e3*this.item.endTime)):0;return o-n>0||i-n<0}},{key:"render",value:function(){var e,t,n,o,i=this,r=arguments[0],a=(0,M.QT)(),s=a.t,u=w.sG.FuncRender.createFormModelItem.call(this);return r("div",{class:Oe},[r(x.T.Tsx,{attrs:{direction:"vertical",size:14},class:qe},[r(x.au.Tsx,ze()([{ref:"formModel",attrs:{layout:"vertical",hideRequiredMark:!0},class:this.phoneDisable()?Ue:""},{props:{rules:this.rules,model:this.form}}]),[this.isBindPhone?[r("div",{class:He,key:"infos"},[r("span",{class:je},[s("lobby.common.components.auth.phone.current")]),r("span",{class:Je},[null===(e=this.desensitizedPhoneNumber)||void 0===e?void 0:e.replace("-"," ")])]),u.custom({hiddenPrefix:!0,showLabel:!0,prop:"phone",model:this.form,formModelItemTsxData:{class:[Ye],ref:"phoneNumberFormItemRef",props:{autoLink:!1,help:function(){var e,t,n;return r("div",{class:[Ke,i.isPhoneNumberPassed?tt:""]},[r("div",{class:$e}),r("div",{class:Xe},[i.isPhoneNumberChecking?s("lobby.common.tips.validating"):null===i.isPhoneNumberPassed?s("lobby.common.components.auth.phone.requiredOfActivity",{x:null===(e=L.ZP.phoneNumberParse(i.desensitizedPhoneNumber))||void 0===e?void 0:e.placeholder.length}):!0===i.isPhoneNumberPassed?s("lobby.common.components.auth.phone.success"):!1===i.isPhoneNumberPassed?1216===(null===(t=i.phoneNumberValidError)||void 0===t?void 0:t.data.code)?s("lobby.common.components.auth.phone.error"):null===(n=i.phoneNumberValidError)||void 0===n?void 0:n.data.msg:void 0]),r("div",{class:et})])},rules:[w.sG.Rules.create({trigger:["blur","change"],asyncValidator:(o=(0,p.Z)((0,h.Z)().mark((function e(t,n,o){var r;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,nt.Z)(i.validPhoneNumberInput(n));case 2:if(r=e.sent,!(0,d.Z)(r,1)[0]){e.next=7;break}return e.abrupt("return",o(""));case 7:return e.abrupt("return",o());case 8:case"end":return e.stop()}}),e)}))),function(e,t,n){return o.apply(this,arguments)})})]}},render:function(){return r(k.Ql,{ref:"phoneAuthInputRef",on:{complete:function(){var e;null===(e=i.phoneNumberFormItemRef)||void 0===e||e.onFieldBlur()},input:function(e){var t;(Fe()(i.form,"phone",e),e)&&(null===(t=i.phoneNumberFormItemRef)||void 0===t||t.onFieldChange())}},attrs:{disabled:i.phoneDisable()||!!i.isPhoneNumberPassed,value:_e()(i.form,"phone"),phoneNumberTemplate:i.desensitizedPhoneNumber}})}})]:[[(null===(t=this.loginConfig)||void 0===t?void 0:t.defaultCountry)&&u.userPhoneSelect({hiddenPrefix:!1,hiddenIcon:!0,showLabel:!1,prop:"phone",model:this.form,countryInfos:this.loginConfig.countryInfos,defaultCountry:null===(n=this.loginConfig)||void 0===n?void 0:n.defaultCountry,currentPhoneNumberSegment:this.currentPhoneNumberSegment,inputTsxData:{attrs:{disabled:this.phoneDisable(),placeholder:s("lobby.center.security.phone.phonePlaceholder")}},onSelectChange:function(e){i.currentPhoneNumberSegment=e,i.form.phone=""}})]],r(k.F0,{attrs:{hiddenPrefix:!0,showLabel:!1,prop:"captcha",getCodeFunPromise:function(){var e=(0,p.Z)((0,h.Z)().mark((function e(t){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,D.apiGetSmsCodeAfterLogined)({create_mode:We.FW.Verify,limit_type:"phone",phone_number:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),disabled:!(!this.phoneDisable()&&!this.isBindPhone)&&!this.isPhoneNumberPassed,targetValue:this.phoneNumberFormat},ref:"smsVerificationRef",class:this.phoneDisable()?Qe:"",model:{value:i.form.captcha,callback:function(e){i.$set(i.form,"captcha",e)}}})])])])}}]),a}(P.XY),le=(0,C.Z)(ce.prototype,"phoneNumberFormItemRef",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=(0,C.Z)(ce.prototype,"formModel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=(0,C.Z)(ce.prototype,"smsVerificationRef",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=(0,C.Z)(ce.prototype,"item",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=(0,C.Z)(ce.prototype,"activeId",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=(0,C.Z)(ce.prototype,"codeType",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=(0,C.Z)(ce.prototype,"bindPhone",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=(0,C.Z)(ce.prototype,"areaCode",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,C.Z)(ce.prototype,"onInputValueChange",[oe,ie],Object.getOwnPropertyDescriptor(ce.prototype,"onInputValueChange"),ce.prototype),(0,C.Z)(ce.prototype,"onComplete",[re],Object.getOwnPropertyDescriptor(ce.prototype,"onComplete"),ce.prototype),(0,C.Z)(ce.prototype,"onSubmit",[ae,se],Object.getOwnPropertyDescriptor(ce.prototype,"onSubmit"),ce.prototype),ue=ce))||ue),it=n(61716),rt=n.n(it),at=n(51243),st=n.n(at),ut=n(73161),ct="zICkKi5Mo2ZSIQcykiUq",lt="OjvwBFfb2J61X2JgrG9v",dt="WXtn8_wEc1GzLweyXEsE",ht="DQgWVWDtMgMs8S_b5a4j",pt="etjWRhsZepY4TrokoqV4",vt="mWJQqOCqOtW3rwYd5Lc8",ft="IpvHNG87re4EZxsfZG1j",mt="k_f8zAgGSgzNa5J9fhkh",bt="jobUAIphx4DVMGJ_Wtsc",yt="leHSghgdSTLuMSEGmieS",gt="MfnNowGSQIRuKpv09pzM",Zt="rUlGptnrVbSaqer2d_r_",Ct="i1zSMFiHSjAYqWApxcA5",Pt="H3faHu1RUr_P8d733uCF",xt="A95GDoKzL6McEbU3rfnQ",kt="vlTDaHlHmabWGvPg6z3W",wt=n(81110),It=n.n(wt),Tt=(ye=(0,P.wA)({name:"DiscountCode"}),ge=(0,P.Rl)(),Ze=(0,P.fI)(z.ZP.number.isRequired),Ce=(0,P.fI)({required:!1}),Pe=(0,P.fI)(z.ZP.bool.def(!1)),xe=(0,P.y1)("success"),ke=(0,P.y1)("changeCodeType"),ye((Ie=function(e){(0,y.Z)(a,e);var t,n,o,i,r=(0,g.Z)(a);function a(){var e;(0,f.Z)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),(0,Z.Z)((0,b.Z)(e),"state",{discountCode:void 0,loading:!1,eventData:null,bindPhoneForm:null,tabsList:[],activeTabsIndex:0,discountConfigData:null,riskBindPhoneStatus:0,hasReceived:!1}),(0,v.Z)((0,b.Z)(e),"veriryBindPhone",Te,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"activeId",De,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"event",Re,(0,b.Z)(e)),(0,v.Z)((0,b.Z)(e),"isModal",Se,(0,b.Z)(e)),e}return(0,m.Z)(a,[{key:"onSuccess",value:function(){}},{key:"onChangeCodeType",value:function(){var e;return null===(e=this.contentConfig)||void 0===e?void 0:e.codeType}},{key:"contentConfig",get:function(){return this.state.eventData?this.state.eventData.activeData.contentConfig:null}},{key:"notInTimeRange",get:function(){var e=this.state.eventData||{},t=e.startTime,n=e.endTime,o=+new Date,i=t?parseInt(String(1e3*t)):0,r=n?parseInt(String(1e3*n)):0;return i-o>0||r-o<0}},{key:"bindPhone",get:function(){return this.state.eventData?this.state.eventData.activeData.bindPhone:null}},{key:"created",value:(i=(0,p.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryDiscountConfig();case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"mounted",value:(o=(0,p.Z)((0,h.Z)().mark((function e(){var t,n,o,i,r=this;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,nt.Z)((0,T.EB)(this.activeId));case 2:if(t=e.sent,n=(0,d.Z)(t,2),o=n[0],i=n[1],!o){e.next=8;break}return e.abrupt("return");case 8:this.state.eventData=i,this.$nextTick((function(){r.onChangeCodeType()}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"queryDiscountConfig",value:(n=(0,p.Z)((0,h.Z)().mark((function e(){var t,n,o,i;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,nt.Z)((0,T.DB)());case 2:if(t=e.sent,n=(0,d.Z)(t,2),o=n[0],i=n[1],!o){e.next=8;break}throw o;case 8:this.state.discountConfigData=i;case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"renderQRCode",value:function(){var e,t=this.$createElement,n=this.state.eventData,o=null!==(e=null==n?void 0:n.receiveDeviceType)&&void 0!==e?e:"";return t("div",[t("div",[(0,R._4)(o).errorMessage]),t(Me.Z)])}},{key:"useDiscountCode",value:(t=(0,p.Z)((0,h.Z)().mark((function e(t,n){var o,i,r,a,s,u,c,l,p,v,f,m,b,y,g,Z,C,P,x,k,I,S,N,z,_,A,F,G,E,W,V,O,q,U,Q,H,j,J,Y,K;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.$createElement,i=(0,B.h)(),r=i.hasLogined,a=i.isWeb,s=i.audioReceivePlay,r){e.next=4;break}return e.abrupt("return",w.sG.Modal.open("registerModal"));case 4:if(u=this.state,c=u.discountCode,l=u.loading,p=u.riskBindPhoneStatus,v=u.eventData,!l&&c){e.next=7;break}return e.abrupt("return");case 7:if(this.state.loading=!0,f=(0,M.QT)(),m=f.t,!t||3!==n||1!==this.bindPhone){e.next=18;break}return e.next=12,(0,nt.Z)((0,D.apiVerifyPhone)({phone:t.phone,captcha:t.verifyCode,flag:c}));case 12:if(b=e.sent,y=(0,d.Z)(b,1),g=y[0],this.state.loading=!1,!g){e.next=18;break}throw g;case 18:if(!t||4!==n||0!==this.bindPhone||1===p){e.next=31;break}return e.next=21,(0,nt.Z)((0,D.apiRiskBindPhone)({phone:null!==(Z=t.phone)&&void 0!==Z&&Z.includes("+")?t.phone:"".concat(null===(C=this.contentConfig)||void 0===C?void 0:C.areaCode,"-").concat(t.phone),captcha:t.verifyCode,flag:c}));case 21:if(P=e.sent,x=(0,d.Z)(P,1),k=x[0],this.state.loading=!1,!k){e.next=30;break}throw this.state.riskBindPhoneStatus=0,k;case 30:this.state.riskBindPhoneStatus=1;case 31:if(!c){e.next=68;break}if((0,R.cA)(null==v?void 0:v.receiveDeviceType,this.renderQRCode)){e.next=35;break}return this.state.loading=!1,e.abrupt("return");case 35:if(4!==n){e.next=46;break}return O=null!=t&&null!==(N=t.phone)&&void 0!==N&&N.includes("-")?null!==(z=null===(_=t.phone)||void 0===_?void 0:_.split("-")[0])&&void 0!==z?z:"":null!==(A=null===(F=this.contentConfig)||void 0===F?void 0:F.areaCode)&&void 0!==A?A:"",q=null!=t&&null!==(G=t.phone)&&void 0!==G&&G.includes("-")?null!==(E=null===(W=t.phone)||void 0===W?void 0:W.split("-")[1])&&void 0!==E?E:"":null!==(V=null==t?void 0:t.phone)&&void 0!==V?V:"",e.next=40,(0,T.gj)({areaCode:O,phoneNumber:q,activeId:Number(this.activeId)});case 40:if(U=e.sent,!(Q=U.status)){e.next=46;break}return w.sG.Modal.message({type:"error",content:function(){switch(Q){case 1:return m("lobby.event.discountCode.activityIDInvalid");case 2:return m("lobby.event.discountCode.notPhoneGold");case 3:return m("lobby.event.discountCode.areaCodeIncorrect");case 4:return m("lobby.event.discountCode.phoneNumberNothingness");case 5:return m("lobby.event.discountCode.phoneNumberBeUsed");default:return""}}}),this.state.loading=!1,e.abrupt("return",Promise.reject());case 46:return e.next=48,(0,nt.Z)((0,T.nT)({codeType:(null===(I=this.contentConfig)||void 0===I?void 0:I.codeType)||1,discountCode:4!==(null===(S=this.contentConfig)||void 0===S?void 0:S.codeType)||2!==this.bindPhone&&1!==this.state.riskBindPhoneStatus?c:"",activeId:Number(this.activeId)}));case 48:if(H=e.sent,j=(0,d.Z)(H,2),J=j[0],Y=j[1],this.state.loading=!1,!J){e.next=55;break}throw J;case 55:if(null!=Y&&Y.status){e.next=66;break}if(!Y.withdrawLimit){e.next=60;break}return this.state.hasReceived=!0,w.sG.Modal.create({class:xt,title:m("lobby.receiveModal.kindTips"),width:a?L.ZP.px2rem(550):L.ZP.px2rem(600),content:function(){return[o("div",{domProps:{innerHTML:m("lobby.event.discountCode.success",{x:'<span class="'.concat(w.CM.CssClassName.Lobby.Color.Yellow,'">\n                    ').concat(Y.amount,"\n                  </span>")})}}),o("div",[m("lobby.event.discountCode.needRecharge",{x:Y.withdrawLimit})])]},cancelButtonProps:{style:{display:"none"}},okText:m("lobby.event.discountCode.close").toString()}),e.abrupt("return");case 60:w.sG.Modal.message({type:"success",content:function(){return m("lobby.event.discountCode.success",{x:Y.amount})}}),this.state.hasReceived=!0,s(),this.onSuccess(),e.next=68;break;case 66:K=3===Y.status,w.sG.Modal.create({class:xt,title:m("lobby.receiveModal.kindTips"),width:a?L.ZP.px2rem(550):L.ZP.px2rem(600),content:function(){return Y.message},okText:K?m("lobby.event.discountCode.payBtn").toString():m("lobby.event.discountCode.confirm").toString(),onOk:function(){K&&w.sG.Modal.open("payModal")}});case 68:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"renderDiscountCodeComponent",value:function(){var e=this,t=this.$createElement,n=(0,M.QT)().t;return t("div",{class:dt},[t(x.II.Tsx,{attrs:{disabled:this.notInTimeRange,placeholder:n("lobby.event.discountCode.placeholder").toString(),prefix:function(){return t("span",{class:ht},[t("icon-sprite",{attrs:{sprite:st()}})])},suffix:function(){return t(k.Gy,{class:[pt,e.notInTimeRange?vt:""],on:{complete:function(t){e.notInTimeRange||(e.state.discountCode=t)}}})}},model:{value:e.state.discountCode,callback:function(t){e.$set(e.state,"discountCode",t)}}})])}},{key:"renderVeriryBindPhoneComponent",value:function(){var e=this,t=this.$createElement,n=this.contentConfig||{},o=n.codeType,i=n.areaCode;return t(ot,{class:Zt,ref:"veriryBindPhone",attrs:{activeId:this.activeId,codeType:o,bindPhone:this.bindPhone,areaCode:i,item:this.state.eventData},on:{complete:function(t){e.state.bindPhoneForm=t}}})}},{key:"renderReceivedSuccessComponent",value:function(e){var t=this.$createElement,n=(0,M.QT)().t;return t("div",{class:Ct},[t("div",{class:Pt},[t("icon-sprite",{attrs:{sprite:It()}})]),t("span",[n(2===e?"lobby.event.discountCode.congratulationsReCode":"lobby.event.discountCode.congratulations")])])}},{key:"goBack",value:function(){(0,S.X5)((function(){var e=(0,N.b)().currentActiveIndex,t=document.querySelector('[data-event-index="'.concat(e,'"]'));t&&t.scrollIntoView({block:"center"})})),this.$router.back()}},{key:"renderDiscountBtn",value:function(){var e=this,t=this.$createElement,n=(0,B.h)(),o=n.isWeb,i=n.userInfos,r=(this.contentConfig||{}).codeType,a=(this.state.eventData||{}).activeData,s=(0,M.QT)().t,u=function(){var n=(0,p.Z)((0,h.Z)().mark((function n(){var u,c;return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(3===r&&0===e.bindPhone||4===r&&1===e.bindPhone)){n.next=3;break}return u=w.sG.Modal.create({width:"auto",content:function(){return t("div",[t("p",[3===r&&0===e.bindPhone?s("lobby.event.discountCode.notEligibleEvent"):s("lobby.event.discountCode.activityDissatisfy")]),t("div",{class:bt,on:{click:function(){u.destroy()}},directives:[{name:"show",value:!o}]},[t("icon-sprite",o?{attrs:{sprite:rt()}}:{attrs:{sprite:ut.Z.sprite_main_img_close_s2,scale:.6}})])])},class:mt,type:"info",closable:o}),n.abrupt("return");case 3:if(!e.event||(0,R.cA)(e.event.receiveDeviceType,e.renderQRCode)){n.next=5;break}return n.abrupt("return");case 5:if(!e.veriryBindPhone){n.next=15;break}return n.next=8,e.veriryBindPhone.onSubmit();case 8:if(c=n.sent){n.next=11;break}return n.abrupt("return");case 11:e.state.discountCode="active_code_".concat(e.activeId,"_").concat(i.username),e.useDiscountCode(c,r),n.next=16;break;case 15:4===r&&2===e.bindPhone&&0===(null==a?void 0:a.amount)?(e.state.discountCode="active_code_".concat(e.activeId,"_").concat(i.username),e.useDiscountCode()):e.useDiscountCode();case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),c=t("div",{class:ft},[t(k.gE,{attrs:{spinning:this.state.loading}},[t(x.zx.Tsx,{attrs:{type:"success",disabled:this.notInTimeRange||function(){var t=(e.state.eventData||{}).activeData;if(e.notInTimeRange||null!=t&&t.amount)return!0;switch(r){case 1:case 2:return!e.state.discountCode;case 3:case 4:return 0!==e.bindPhone&&1!==e.bindPhone&&((2!==e.bindPhone||0!==(null==t?void 0:t.amount))&&!(e.state.bindPhoneForm&&e.state.bindPhoneForm.phone&&e.state.bindPhoneForm.captcha));default:return!0}}()||this.state.hasReceived},nativeOn:{click:u}},[s("lobby.event.discountCode.confirmTheExchange")])])]);return o||this.isModal?c:t(I.h_,{attrs:{to:w.CM.PortalName.ActivityBottom}},[t("div",{class:kt},[t(x.zx.Tsx,{class:["H5BottomReturnBtn"],on:{click:function(){return e.goBack()}}},[t("span",[s("lobby.common.tips.return")])]),c])])}},{key:"render",value:function(){var e,t=this,n=arguments[0],o=(0,M.QT)(),i=o.t,r=this.contentConfig||{},a=r.amount,s=r.amountType,u=r.rate,c=r.codeType,l=r.profitLimit,d=r.withdrawLimit,h=r.showAmountRange,p=this.state.eventData||{},v=p.activeData,f=v,m=(0,B.h)(),b=m.isWeb,y=function(){var e;switch(s){case 1:case 2:return a;case 3:return f&&null!=f&&f.amount?null==f?void 0:f.amount:i("lobby.event.discountCode.tips3",{x:u,y:a});case 4:return f&&null!=f&&f.amount?null==f?void 0:f.amount:null==h||null===(e=h.replace)||void 0===e?void 0:e.call(h,",","-")}},g=function(e,t){var o=(0,M.QT)().t;if(1!==e){var i=t>0?"".concat(o("lobby.event.discountCode.alreadyWon"),":"):o("lobby.event.discountCode.tipsLable");return n("div",[i,n("span",[y()])])}},Z=function(){return l||d?0!==l&&0===d?i("lobby.event.discountCode.tipsProfitUpperLimit",{x:0!==l?"<span> ".concat(l||(null===(e=t.contentConfig)||void 0===e?void 0:e.amount)," </span>"):"<span>\n          ".concat(i("lobby.event.discountCode.notProfitLimit"),"\n        </span>")}).toString():0===l&&0!==d?i("lobby.event.discountCode.tipstipsNeedRechargeAfterProfit",{y:"<span> ".concat(d," </span>")}).toString():"".concat(i("lobby.event.discountCode.tipsProfitUpperLimit",{x:"<span> ".concat(0!==l?l||a:i("lobby.event.discountCode.notProfitLimit")," </span>")}),", ").concat(i("lobby.event.discountCode.tipstipsNeedRechargeAfterProfit",{y:"<span> ".concat(d," </span>")})):"";var e},C=Z(),P=f||{},x=P.contentConfig;return n(k.gE,{attrs:{spinning:!this.state.eventData}},[n("div",{class:ct},[n("div",{class:gt},[n("div",[(1===c||2===c)&&this.renderDiscountCodeComponent(),3===c&&(1===this.bindPhone||0===this.bindPhone)&&!(null!=f&&f.amount)&&this.renderVeriryBindPhoneComponent(),4===c&&(1===this.bindPhone||0===this.bindPhone)&&!(null!=f&&f.amount)&&this.renderVeriryBindPhoneComponent(),null!=f&&f.amount?this.renderReceivedSuccessComponent(c):null]),this.state.eventData&&n("div",{class:lt},[g(null==x?void 0:x.disableShowReward,null!==(e=null==f?void 0:f.amount)&&void 0!==e?e:0),C&&n("p",{domProps:{innerHTML:"".concat(i("lobby.modal.pay.mark"),": ").concat(C)}})]),this.state.eventData&&b&&this.renderDiscountBtn()]),n("div",{class:yt,directives:[{name:"show",value:this.isModal}]},[this.state.eventData&&n(Ne,{attrs:{eventData:this.state.eventData,isShowBottom:!1}})]),this.state.eventData&&!b&&this.renderDiscountBtn()])])}}]),a}(P.XY),Te=(0,C.Z)(Ie.prototype,"veriryBindPhone",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=(0,C.Z)(Ie.prototype,"activeId",[Ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=(0,C.Z)(Ie.prototype,"event",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=(0,C.Z)(Ie.prototype,"isModal",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,C.Z)(Ie.prototype,"onSuccess",[xe],Object.getOwnPropertyDescriptor(Ie.prototype,"onSuccess"),Ie.prototype),(0,C.Z)(Ie.prototype,"onChangeCodeType",[ke],Object.getOwnPropertyDescriptor(Ie.prototype,"onChangeCodeType"),Ie.prototype),we=Ie))||we)},63980:function(e,t,n){"use strict";n.d(t,{Kc:function(){return b},_4:function(){return p},cA:function(){return v},dW:function(){return f},iP:function(){return h},r8:function(){return m}});var o=n(70970),i=n(2813),r=(n(76566),n(25325),n(50125)),a=(n(74916),n(23123),n(26699),n(32023),n(2707),n(69600),n(92222),n(41539),n(54747),n(39714),n(9653),n(3741)),s=(n(86493),n(81764)),u=n(98292),c=n(71707),l=n(98256),d=n(66274),h=(a.zP.Android,a.zP.Ios,function(e){var t;return(null!==(t=null==e?void 0:e.split(","))&&void 0!==t?t:[]).includes(a.zP.Pc)}),p=function(e){var t,n,o=(0,s.QT)().t,i=(0,u.h)().isWeb,r=null!==(t=null==e?void 0:e.split(","))&&void 0!==t?t:[];return r.sort((function(e,t){return+e-+t})),(n=i?r.includes(a.zP.Pc):r.includes(a.zP.H5))?{canWebReceive:n,errorMessage:""}:{canWebReceive:n,errorMessage:o("lobby.event.validTips.limit_".concat(r.join("_")))}},v=function(e,t){var n,r=(0,s.QT)().t,h=(0,u.h)(),v=h.isWeb,f=h.openDownloadAppModal;if(e){var m=p(e),b=m.canWebReceive,y=m.errorMessage;if(!b)var g=1===(null==e?void 0:e.length)&&e===a.zP.H5,Z=1===(null==e?void 0:e.length)&&e===a.zP.Pc,C=l.Z.Modal.create({class:d.Z.receiveTips,title:r("lobby.receiveModal.kindTips"),width:c.ZP.px2rem(600),content:g?y:v&&t||y,closable:Z&&!v||!!t&&v,hiddenBtns:Z&&!v||!!t&&v,cancelText:r("lobby.modal.task.close").toString(),okText:r("lobby.gameMenu.toDownloadApp").toString(),onOk:(n=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.destroy();case 2:f();case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})});return b}return!1},f=function(e){var t,n=(0,s.QT)().t;return(t={},(0,r.Z)(t,a.Im.UNCONDITIONAL,n("lobby.event.unconditional")),(0,r.Z)(t,a.Im.CUMULATIVECODING,n("lobby.event.cumulativeCoding")),(0,r.Z)(t,a.Im.CUMULATIVERECHARGE,n("lobby.event.cumulativereCharge")),t)[e]},m=function(e){var t=Number(e);return t?t>0?"+".concat(t):t:0},b=function(e,t){if(e)var n,r=l.Z.Modal.create({width:c.ZP.px2rem(600),content:e,getContainer:function(){return t&&document.querySelector("".concat(t))||document.body},closable:!0,hiddenBtns:!0,onOk:(n=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.destroy();case 2:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})}}}]);