"use strict";(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[3526],{64029:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var i,a,s,r,o,c=n(13311),u=n.n(c),l=n(82492),h=n.n(l),d=n(70970),f=n(2813),p=n(82345),v=n(50125),k=n(17360),g=n(21797),w=n(92317),m=n(72283),y=n(20793),x=(n(41539),n(92222),n(68309),n(26699),n(32023),n(57327),n(38880),n(88521)),Z=n(95306),b=n(90416),D=n(30813),C=n(90825),B=n(76937),N=n(23504),P=n(39175),S=n(58334),T=n(81764),A=n(98292),_=n(19128),F=n(71707),O=n(59700),U=n(57111),I="ZtxhUV8G1WsJT2PnYrFe",L="zYvFkZH2BuWiNlFx4SEA",R="vF61SKBtQ4Fg5QUrIFc4",M="foC7MDyPjwhX1ZvlUhP6",$="D7EZTIJy79BkPxPAUGVv",E=n(73161),G=n(36602),J=(0,D.wA)({name:"TasksComponent"})(i=function(e){(0,m.Z)(n,e);var t=(0,y.Z)(n);function n(){return(0,g.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n,[{key:"render",value:function(){var e,t,n,i,a=this,s=arguments[0],r=(0,T.QT)(),o=r.t,c=(0,_.D)(),u=(0,A.h)(),l=u.checkNewBenefits,h=u.updateCheckNewBenefits,d=u.checkNeverNewBenefits,f=u.updateCheckNeverNewBenefits,p=u.isWeb,v=null!==(e=null===(t=c.data)||void 0===t||null===(n=t.rules)||void 0===n?void 0:n.some((function(e){return e.status===x.Jn.PendingReceive})))&&void 0!==e&&e,k=x.E6.Show===(null===(i=c.data)||void 0===i?void 0:i.oneClick);return s(b.gE,{attrs:{spinning:c.isFetching||void 0===c.data}},[s("div",{class:[G.Z.container,L]},[s("div",{class:G.Z.scrollParent},[this.getData.withdrawTip&&s("p",{class:G.Z.withdrawTip},[s("icon-sprite",{attrs:{sprite:E.Z.sprite_main_comm_icon_tip2,scale:(p?18:22)/E.Z.sprite_main_comm_icon_tip2.width}}),s("span",[this.getData.withdrawTip])]),s("div",{style:{height:this.getData.withdrawTip?"calc(100% - ".concat(F.ZP.px2rem(p?50:70),")"):"100%"}},[s("my-scroll",{attrs:{direction:"y",trigger:p?void 0:"none",width:p?"calc(100% + ".concat(F.ZP.px2rem(18),")"):"100%"}},[this.renderNormalTasks()])])])]),s("div",{class:R},[s("div",{class:M},[s("div",{class:$,on:{click:function(){h(!l)}}},[s(Z.XZ.Tsx,{attrs:{checked:l}}),s("span",[" ",o("lobby.modal.task.thisTimeNotShow")])]),s("div",{class:$,on:{click:function(){f(!d)}}},[s(Z.XZ.Tsx,{attrs:{checked:d}}),s("span",[" ",o("lobby.modal.task.neverPrompt")])])]),k&&s(Z.zx.Tsx,{class:G.Z.btn,attrs:{disabled:!v,loading:c.collectAllPending},on:{click:function(){a.handleCollectAllPrizes()}}},[o("lobby.modal.task.collectAll")])])])}}]),n}(U.Z))||i,H=(a=(0,D.wA)({name:"NewBenefits"}),s=(0,D.RL)("hasLogined"),a((o=function(e){(0,m.Z)(o,e);var t,n,i,a,s,r=(0,y.Z)(o);function o(){var e;(0,g.Z)(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,v.Z)((0,p.Z)(e),"mainStore",(0,A.h)()),(0,v.Z)((0,p.Z)(e),"category",{taskName:(0,T.QT)().t(""),taskId:P.UA.xsfl,template:P.UA.xsfl,unReceiveCount:0,category:"",translateNames:"",translateIntroduction:"",isDefaultName:0,isDefaultIntroduction:0}),(0,v.Z)((0,p.Z)(e),"newBenefitsData",{isPop:x._O.Show,isCompleted:x.Sk.UnFinish}),e}return(0,w.Z)(o,[{key:"isNeedOpenDialog",get:function(){var e=(0,A.h)().getActivesAuthInfos,t=this.newBenefitsData,n=t.isCompleted,i=t.isPop;return n===x.Sk.UnFinish&&i===x._O.Show&&e.taskCount}},{key:"isHomePage",get:function(){var e=this.$route.name;return!(!e||![B.x4.GAME,B.x4.ROOT].includes(e))}},{key:"hasLogined",get:function(){return(0,A.h)().hasLogined}},{key:"taskStore",get:function(){return(0,_.D)()}},{key:"onLoginChange",value:function(e,t){e!==t&&this.fetchStatus()}},{key:"created",value:(s=(0,f.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchStatus();case 2:return e.next=4,(0,N.$)().fetchCategorys();case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"open",value:(a=(0,f.Z)((0,d.Z)().mark((function e(){var t,n,i=arguments;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.onClose,!t.firstLogin){e.next=5;break}return e.next=5,this.fetchStatus();case 5:if(this.newBenefitsData.isCompleted!==x.Sk.Finish&&this.newBenefitsData.isPop!==x._O.Hide){e.next=10;break}return n&&n(),this.$emit("modal:close"),(0,A.h)().updateNewBenefitFinish(),e.abrupt("return");case 10:if(!this.isNeedOpenDialog){e.next=13;break}return e.next=13,this.initNewBenefits(t);case 13:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"initNewBenefits",value:(i=(0,f.Z)((0,d.Z)().mark((function e(t){var n,i,a,s,r,o,c,u,l,h,f,p,v,k,g;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.onClose,i=t.mode,a=void 0===i?x.YD.NormalMode:i,s=t.triggerList,r=void 0===s?[]:s,o=t.isDataChange,c=void 0!==o&&o,u=t.firstLogin,l=void 0!==u&&u,h=(0,A.h)(),f=h.checkNewBenefits,p=h.isNewBenefitFinish,a!==x.YD.NormalMode){e.next=11;break}if(!f&&(this.isHomePage||l)){e.next=6;break}return n&&n(),e.abrupt("return");case 6:return e.next=8,this.fetchData();case 8:if(!this.validNewBenefitsByStatus(x.Jn.Goto)){e.next=11;break}return e.next=11,this.baseOpen();case 11:if(a!==x.YD.RequestMode||f||!p){e.next=28;break}if(k=(0,_.D)(),g=function(){var e,t,n;return(null!==(e=null===(t=k.data)||void 0===t||null===(n=t.rules)||void 0===n?void 0:n.filter((function(e){return e.status===x.Jn.PendingReceive})))&&void 0!==e?e:[]).some((function(e){return r.includes(e.ruleid)}))},c||k.taskId!==P.UA.xsfl||null===(v=k.data)||void 0===v||!v.rules){e.next=21;break}if(!g()){e.next=20;break}return e.next=18,(0,N.$)().fetchCategorys();case 18:return e.next=20,this.baseOpen();case 20:return e.abrupt("return");case 21:return e.next=23,this.fetchData();case 23:if(!g()){e.next=28;break}return e.next=26,(0,N.$)().fetchCategorys();case 26:return e.next=28,this.baseOpen();case 28:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"fetchStatus",value:(n=(0,f.Z)((0,d.Z)().mark((function e(){var t;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.$G)();case 2:t=e.sent,this.newBenefitsData=h()({},this.newBenefitsData,t),t.isCompleted===x.Sk.Finish?((0,A.h)().updateNewBenefitFinish(),C.sG.Modal.close("newBenefitsModal")):(this.taskStore.clearTask(this.category.taskId,!0),this.fetchData());case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchData",value:(t=(0,f.Z)((0,d.Z)().mark((function e(){var t;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_.D)(),e.next=3,t.fetchTask({taskid:this.category.taskId,template:this.category.template});case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"validNewBenefitsByStatus",value:function(e){var t,n,i;return null!==(t=null===(n=(0,_.D)().data)||void 0===n||null===(i=n.rules)||void 0===i?void 0:i.some((function(t){return t.status===e})))&&void 0!==t&&t}},{key:"isCanReceive",get:function(){var e,t,n;return null!==(e=null===(t=(0,_.D)().data)||void 0===t||null===(n=t.rules)||void 0===n?void 0:n.some((function(e){return e.status===x.Jn.PendingReceive})))&&void 0!==e&&e}},{key:"renderContent",value:function(){return(0,this.$createElement)(J,{attrs:{tab:P.UA.xsfl,category:this.category,requireRule:!1},key:P.UA.xsfl})}},{key:"render",value:function(){var e,t=this,n=(0,T.QT)().t,i=(0,A.h)().checkNeverNewBenefits,a=(0,N.$)(),s=this.mainStore.isWeb,r=null!==(e=u()(a.categories,{taskId:P.UA.xsfl}))&&void 0!==e?e:{};return this.renderModal({modalConfig:{class:[I],props:{width:F.ZP.px2rem(s?800:690),destroyOnClose:!0,title:r.taskName||r.category||n("lobby.modal.task.newbieBenefit"),zIndex:1009,afterClose:function(){i&&(t.newBenefitsData.isPop=x._O.Hide,(0,S.jf)())}}},renderContent:this.renderContent})}}]),o}(O.Z),(0,k.Z)(o.prototype,"onLoginChange",[s],Object.getOwnPropertyDescriptor(o.prototype,"onLoginChange"),o.prototype),r=o))||r)}}]);