(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[2221],{69837:function(e){e.exports={id:"comm_icon_fhdb--sprite-usage",viewBox:"0 0 12.389 19.945",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_icon_fhdb--sprite",toString:function(){return this.url}}},82780:function(e){e.exports={id:"comm_icon_home--sprite-usage",viewBox:"0 0 17 15.203",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_icon_home--sprite",toString:function(){return this.url}}},77207:function(e){e.exports={id:"comm_icon_xz-android--sprite-usage",viewBox:"0 0 40 40",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_icon_xz-android--sprite",toString:function(){return this.url}}},57103:function(e){e.exports={id:"comm_icon_xz-ios--sprite-usage",viewBox:"0 0 40 40",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_icon_xz-ios--sprite",toString:function(){return this.url}}},63893:function(e){e.exports={id:"comm_icon_xza--sprite-usage",viewBox:"0 0 13.53 15",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_icon_xza--sprite",toString:function(){return this.url}}},58351:function(e){e.exports={id:"comm_img_18+--sprite-usage",viewBox:"0 0 60 60",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_img_18+--sprite",toString:function(){return this.url}}},43876:function(e){e.exports={id:"comm_img_circle--sprite-usage",viewBox:"0 0 60 60",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_img_circle--sprite",toString:function(){return this.url}}},69877:function(e){var t=Math.floor,i=Math.random;e.exports=function(e,o){return e+t(i()*(o-e+1))}},83608:function(e,t,i){var o=i(69877),n=i(16612),r=i(18601),s=parseFloat,a=Math.min,l=Math.random;e.exports=function(e,t,i){if(i&&"boolean"!=typeof i&&n(e,t,i)&&(t=i=void 0),void 0===i&&("boolean"==typeof t?(i=t,t=void 0):"boolean"==typeof e&&(i=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=r(e),void 0===t?(t=e,e=0):t=r(t)),e>t){var c=e;e=t,t=c}if(i||e%1||t%1){var d=l();return a(e+d*(t-e+s("1e-"+((d+"").length-1))),t)}return o(e,t)}},32221:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return K}});var o,n,r,s,a,l=i(83608),c=i.n(l),d=i(7903),u=i(70970),p=i(2813),h=i(78718),v=i.n(h),m=i(3587),f=i(21797),g=i(92317),w=i(82345),Z=i(72283),b=i(20793),y=i(50125),_=i(17360),x=(i(41320),i(92222),i(68309),i(41539),i(21249),i(74916),i(15306),i(30813)),k=i(95306),T=i(33990),D=i(90825),B=i(76937),P=i(81830),U=i(42930),M=i(81764),S=i(98292),A=i(86493),C=i(71707),I=i(24558),z=i(11127),O=i(15289),E=i(69837),$=i.n(E),L=i(82780),G=i.n(L),q=i(77207),R=i.n(q),W=i(57103),H=i.n(W),V=i(63893),N=i.n(V),j=i(58351),Q=i.n(j),F=i(43876),J=i.n(F),X=i(65028),Y=i(95446),K=(o=(0,x.wA)({name:"LayoutBar"}),n=(0,x.fI)({required:!0}),o((s=function(e){(0,Z.Z)(r,e);var t,i,o,n=(0,b.Z)(r);function r(){var e;(0,f.Z)(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),(0,y.Z)((0,w.Z)(e),"toTopVisiabled",!1),(0,y.Z)((0,w.Z)(e),"visiabled",!1),(0,y.Z)((0,w.Z)(e),"isOpenDownload",!1),(0,y.Z)((0,w.Z)(e),"downloadUrls",{}),(0,m.Z)((0,w.Z)(e),"toTop",a,(0,w.Z)(e)),(0,y.Z)((0,w.Z)(e),"currentIndex",0),e}return(0,g.Z)(r,[{key:"isHomePage",get:function(){return this.$route.name===B.x4.GAME}},{key:"scrollToTop",value:function(){this.toTop()}},{key:"mounted",value:function(){D.xN.subscribe(this.homeScroll);var e=(0,S.h)(),t=e.setOpenDownloadAppModal,i=e.isWeb;t(this.downloadApp),i&&this.getDownloadUrls()}},{key:"reportDownloadUrlClick",value:function(e){var t,i=(0,S.h)().uuid,o=v()(D.sG.App.$route.query,["cid","id"]);(null!=o&&o.id||null!=o&&o.cid)&&(0,P.apiReportDownloadUrlClick)({accessType:1,accessUrl:null===(t=window.location)||void 0===t?void 0:t.href,packageType:null==e?void 0:e.type,promoter_info:(null==o?void 0:o.id)||(null==o?void 0:o.cid)||"",visitor_device:i})}},{key:"getDownloadUrls",value:(o=(0,p.Z)((0,u.Z)().mark((function e(){var t,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.getDownloadUrl)();case 2:t=e.sent,i=t.data,this.downloadUrls=i.data;case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"toGeetest",value:(i=(0,p.Z)((0,u.Z)().mark((function e(){var t,i,o,n,r,s=this;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,S.h)(),i=t.systemInfos,o=t.uuid,e.next=3,D.sG.User.initGeetest({geetestConfig:{captchaId:(null==i?void 0:i.geetest_captcha_id.force_geetest)||""}});case 3:return n=e.sent,e.next=6,new Promise((function(e,t){null==n||n.onSuccess((0,p.Z)((0,u.Z)().mark((function t(){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.isOpenDownload=!1,e(n.getValidate());case 2:case"end":return t.stop()}}),t)})))).onClose((function(){n.destroy(),s.isOpenDownload=!1,t()})).onError((function(){n.destroy(),t()}))}));case 6:if(!(r=e.sent)){e.next=11;break}return e.next=10,D.sG.User.validateGeetest((0,d.Z)({account:o,action:"download"},r));case 10:this.downloadApp();case 11:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"downloadApp",value:(t=(0,p.Z)((0,u.Z)().mark((function e(){var t,i,o,n,r,s,a,l,d,p,h,v,m,f,g,w,Z,b,_,x,B,P,U=this;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.$createElement,r=(0,S.h)(),s=r.isWeb,a=r.siteURLInfos,l=(null==a||null===(t=a.download_domain)||void 0===t?void 0:t.length)||0,!s||!l){e.next=6;break}return(0,A.MI)(null==a?void 0:a.download_domain[c()(1,l)-1]),e.abrupt("return");case 6:return e.next=8,this.getDownloadUrls();case 8:if(!this.isOpenDownload){e.next=10;break}return e.abrupt("return");case 10:if(this.isOpenDownload=!0,null!==(i=this.downloadUrls)&&void 0!==i&&i.is_valid){e.next=14;break}return this.toGeetest(),e.abrupt("return");case 14:if(d=(0,M.QT)(),p=d.t,o={},(0,y.Z)(o,T.Mg.SPEED,p("lobby.rightBar.downloadAppSpeed")),(0,y.Z)(o,T.Mg.NORMAL,p("lobby.rightBar.downloadAppNormal")),(0,y.Z)(o,T.Mg.COMPLETE,p("lobby.rightBar.downloadAppComplete")),h=o,v=this.downloadUrls,m=v.downloadList,f=v.androidList,g=(0,X.Z)().android.device,1!==(null==(w=g?null==f?void 0:f.map((function(e){return{name:e.size?"".concat(h[e.type]," (").concat(e.size,"M)"):h[e.type],downloadPath:e.downloadPath,relativePath:e.relativePath,customizePath:e.customizePath,type:e.type}})):m)?void 0:w.length)){e.next=29;break}return this.reportDownloadUrlClick(w[0]),Z=[],b=w[0],_=b.downloadPath,x=b.relativePath,B=b.customizePath,P=b.value,g?_&&Z.push(_):Z.push(P),x&&Z.push(x),B&&Z.push(B),setTimeout((function(){window.open(Z[U.currentIndex]),U.currentIndex=(U.currentIndex+1)%Z.length})),this.isOpenDownload=!1,e.abrupt("return");case 29:D.sG.Modal.create({title:this.$t("lobby.rightBar.downloadApp"),closable:!0,hiddenBtns:!0,class:Y.Z.downloadModal,width:C.ZP.px2rem(600),content:function(){return n("div",{class:Y.Z.downloadContent},[null==w?void 0:w.map((function(e,t){var i=e.downloadPath,o=e.relativePath,r=e.customizePath,s=e.value,a=[];g?(i&&a.push(i),o&&a.push(o),r&&a.push(r)):a.push(s);var l=0;return n(k.zx.Tsx,{key:e.name,attrs:{type:"primary",ghost:!!t},class:Y.Z.downloadItem,on:{click:function(){U.reportDownloadUrlClick(e),window.open(a[l]),l<a.length-1?l++:l=0}}},[n("icon-sprite",{class:Y.Z.appIcon,attrs:{sprite:g?R():H()}}),n("span",[e.name])])}))])}}),this.isOpenDownload=!1;case 31:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"goHome",value:function(){this.$router.push({name:B.x4.GAME})}},{key:"renderDecorate",value:function(){var e=this.$createElement,t=(0,S.h)(),i=t.holidayTheme,o=t.isWeb,n=t.currentHolidayThemeSpritesJson,r=null==n?void 0:n["sprite_theme-holiday_img_yc_jr1"],s=null==n?void 0:n["sprite_theme-holiday_img_yc_jr2"];if(i){var a={spring3:(o?20:24)/24,spring4:(o?27:32)/32},l={spring3:(o?22:24)/24,spring4:(o?20:25.3)/26};return[!!r&&e("div",{class:Y.Z.decorateTopLeft},[e("icon-sprite",{attrs:{sprite:r,scale:a[i]}})]),!!s&&e("div",{class:Y.Z.decorateBottomRight},[e("icon-sprite",{attrs:{sprite:s,scale:l[i]}})])]}}},{key:"homeScroll",value:function(e){if("HOME_SCROLL"===e.type){var t=e.payload.y,i=void 0===t?"":t;parseInt(i)>40&&!this.toTopVisiabled&&(this.toTopVisiabled=!0),parseInt(i)<40&&this.toTopVisiabled&&(this.toTopVisiabled=!1)}}},{key:"renderScrollToTop",value:function(){var e=this.$createElement,t=(0,S.h)().isWeb;return e("li",{class:[Y.Z.btn,t?Y.Z.toTop:""],on:{click:this.scrollToTop},directives:[{name:"show",value:this.toTopVisiabled}]},[this.renderDecorate(),e("div",{class:Y.Z.img},[e("icon-sprite",{class:[Y.Z.img,Y.Z.icon2],attrs:{sprite:$()}})]),e("p",{class:Y.Z.title},[this.$t("lobby.rightBar.backTop")])])}},{key:"render",value:function(){var e,t,i,o,n,r,s=this,a=arguments[0],l=(0,S.h)(),d=l.siteURLInfos,u=(0,S.h)(),p=u.isWeb,h=u.isEuropeanAmerican,v=(0,U.g)(),m=v.gameParam,f=this.downloadUrls,g=f.qrCode,w=f.qrCodeType,Z=f.webLinkType,b=null==d||null===(e=d.download_domain)||void 0===e?void 0:e.length,_=(null===(t=(0,S.h)())||void 0===t||null===(i=t.systemInfos)||void 0===i?void 0:i.kfOnlineStatus)||0,x=null!==(o=null===(n=(0,S.h)().serviceInformation)||void 0===n?void 0:n.customer.onlineCustomers)&&void 0!==o?o:[],k=null==d?void 0:d.download_domain[c()(1,b)-1];return a("ul",{class:(r={},(0,y.Z)(r,Y.Z.rightBar,!0),(0,y.Z)(r,Y.Z.rightBar__eueropean,h),r),ref:"mainRef"},[!m&&a(I.Z,{directives:[{name:"show",value:this.isHomePage}]}),p&&!h&&a("div",[a("li",{class:Y.Z.btn,on:{click:this.goHome}},[this.renderDecorate(),a("div",{class:Y.Z.img},[a("icon-sprite",{class:[Y.Z.img,Y.Z.icon1],attrs:{sprite:G()}})]),a("p",{class:Y.Z.title},[this.$t("lobby.rightBar.backHome")])]),a("li",{class:[Y.Z.btn,Y.Z.pingWrap]},[this.renderDecorate(),(0,S.h)().isWeb&&a(O.Z)]),this.renderScrollToTop(),a("li",{class:Y.Z.btn,on:{mouseover:function(){return s.visiabled=!0},mouseleave:function(){return s.visiabled=!1}}},[this.renderDecorate(),a("div",{class:Y.Z.img},[a("icon-sprite",{class:[Y.Z.img,Y.Z.icon3],attrs:{sprite:N()}})]),a("p",{class:Y.Z.title},[this.$t("lobby.rightBar.downloadApp")])]),1==_&&x.length>0&&a("li",{class:Y.Z.btn},[a(z.Z)]),a("li",{class:Y.Z.box18},[a("icon-sprite",{class:Y.Z.img18,attrs:{sprite:Q()}}),a("icon-sprite",{class:Y.Z.imgCircle,attrs:{sprite:J()}})])]),h&&this.renderScrollToTop(),(1===w||0===w&&b)&&this.visiabled?a("div",{class:Y.Z.qrcodeWrap},[a("vue-qr",{class:Y.Z.qrcode,attrs:{text:0===w?k:g,logoMargin:1,margin:10,size:100}}),a("p",[this.$t("lobby.rightBar.scanQR")]),a("p",[this.$t("lobby.rightBar.downloadDevice")]),a("p",{directives:[{name:"show",value:1===Z}],class:Y.Z.qrcodeUrl},[0===w?null==k?void 0:k.replace(/^https:\/\//i,""):g])]):""])}}]),r}(x.XY),a=(0,_.Z)(s.prototype,"toTop",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=s))||r)}}]);