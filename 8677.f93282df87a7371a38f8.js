"use strict";(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[8677,6407],{35350:function(e,t){t.Z={main:"CDf0ORRM8ElRiMfse8GI",tabs:"ABqIpTgbM_KYwiYYwb74",threeWayLogin:"_xcZWaOX6zgCk5FDNNtT",passwordTools:"B6J4DvKVDkYfnohvPisB",loginTools:"xEpW_WEg7K2LKvIHONxv",mainBtn:"RVYJOzKHDoOLNbvHfw4Q","check-box-container":"SLjcsWcVmMYAnFwnsBKX","check-box-label":"_4pVpDh9W5aV9_K7nAWK",button:"kKDcOuN8rOwl8zAHU1CF",loginMain:"dyTo46Ihqe6_GhjKL_8e"}},18677:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var r,a,o,s,i,l,c,u=n(36568),p=n.n(u),d=n(50308),f=n.n(d),m=n(82492),h=n.n(m),b=n(22705),y=n(70970),v=n(2813),w=n(3587),Z=n(21797),g=n(92317),k=n(82345),x=n(72283),C=n(20793),T=n(50125),K=n(17360),M=(n(41320),n(92222),n(41539),n(21249),n(38880),n(95306)),O=n(30813),D=n(90825),_=n(81764),F=n(59700),P=n(14577),W=n(81830),A=n(98292),N=n(71707),R=n(35350),I="qIot6Aq2AZ8VUF5v8Bln",Y="WnN8ALjlcOp670YR3NOw",q="uC61PKgFxnbMm1bpToil",z=n(41800),B=(r=(0,O.wA)({name:"ForceChangePwdModal"}),a=(0,O.Rl)(),o=(0,P.WY)(),s=(0,P.K4)(),r((l=function(e){(0,x.Z)(a,e);var t,n,r=(0,C.Z)(a);function a(){var e;(0,Z.Z)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),(0,w.Z)((0,k.Z)(e),"formModel",c,(0,k.Z)(e)),(0,T.Z)((0,k.Z)(e),"activeKey","normal"),(0,T.Z)((0,k.Z)(e),"loading",!1),(0,T.Z)((0,k.Z)(e),"form",{newpass:"",passwdConfirm:""}),(0,T.Z)((0,k.Z)(e),"rules",{}),e}return(0,g.Z)(a,[{key:"tabsData",get:function(){return[{key:"normal",tab:(0,(0,_.QT)().t)("lobby.modal.forceChangePwd.title"),renderContent:this.renderNormal}]}},{key:"open",value:(n=(0,v.Z)((0,y.Z)().mark((function e(t){return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.baseOpen();case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onSubmit",value:(t=(0,v.Z)((0,y.Z)().mark((function e(){var t,n,r,a,o,s,i,l,c,u,p,d=this;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,_.QT)(),n=t.t,r=(0,A.h)(),a=r.updateUserInfos,o=r.userInfos,e.next=5,this.formModel.validate();case 5:return this.loading=!0,e.next=8,(0,z.Z)((0,W.apiForceChangePwd)({newpass:this.form.newpass})).finally((function(){return d.loading=!1}));case 8:if(s=e.sent,i=(0,b.Z)(s,2),l=i[0],c=i[1],l){e.next=17;break}return a(h()({},o,{userkey:null==c||null===(u=c.data)||void 0===u||null===(p=u.data)||void 0===p?void 0:p.userKey}),"fastlogin"),D.sG.Modal.message({type:"success",content:function(){return n("lobby.modal.forceChangePwd.successTips")}}),e.next=17,this.close();case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,this,[[0,19]])}))),function(){return t.apply(this,arguments)})},{key:"renderNormal",value:function(){var e=this,t=this.$createElement,n=(0,_.QT)().t,r=D.sG.FuncRender.createFormModelItem.call(this);return t(M.T.Tsx,{attrs:{direction:"vertical",size:14}},[t(M.au.Tsx,p()([{ref:"formModel"},{props:{rules:this.rules,model:this.form}}]),[[r.userpass({prop:"newpass",model:this.form,getRules:function(t){return[t.required,t.pattern,{validator:function(t,n,r){return e.form.passwdConfirm&&e.formModel.validateField(["passwdConfirm"],f()),r(),!0}}]}}),r.userpass({prop:"passwdConfirm",inputTsxData:{attrs:{placeholder:n("lobby.modal.register.passwdConfirm")}},model:this.form,getRules:function(t){return[t.required,t.pattern,{validator:function(t,r,a){return r!==e.form.newpass&&a(n("lobby.modal.register.notMatch")),a(),!0}}]}}),t("p",{class:q},[n("lobby.modal.forceChangePwd.tips")])]]),t(M.X2.Tsx,{attrs:{type:"flex",justify:"space-between"},class:[Y]},[t(M.zx.Tsx,{attrs:{loading:this.loading,type:"primary",block:!0},on:{click:this.onSubmit}},[n("lobby.common.tips.confirm")])])])}},{key:"render",value:function(){var e=this,t=arguments[0],n=(0,A.h)(),r=n.isWeb;return this.renderModal({modalConfig:{class:[R.Z.main,I],props:{closable:!1,width:N.ZP.px2rem(r?550:600)}},renderContent:function(){return[t("div",[t(M.mQ.Tsx,{class:R.Z.tabs,model:{value:e.activeKey,callback:function(t){e.activeKey=t}}},[e.tabsData.map((function(e){var n=e.key,r=e.tab,a=e.renderContent;return t(M.mQ.TabPane.Tsx,{key:n,attrs:{tab:r}},[a()])}))])])]}})}}]),a}(F.Z),c=(0,K.Z)(l.prototype,"formModel",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,K.Z)(l.prototype,"onSubmit",[o,s],Object.getOwnPropertyDescriptor(l.prototype,"onSubmit"),l.prototype),i=l))||i)}}]);