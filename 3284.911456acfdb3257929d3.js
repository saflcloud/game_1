(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[3284],{36128:function(e,t,n){var r=n(20731),i=n(21078),a=n(45652);e.exports=function(e,t,n){var o=e.length;if(o<2)return o?a(e[0]):[];for(var s=-1,c=Array(o);++s<o;)for(var u=e[s],l=-1;++l<o;)l!=s&&(c[s]=r(c[s]||u,e[l],t,n));return a(i(c,1),t,n)}},76566:function(e,t,n){var r=n(34963),i=n(5976),a=n(36128),o=n(29246),s=i((function(e){return a(r(e,o))}));e.exports=s},66274:function(e,t){"use strict";t.Z={receiveTips:"sft1FrYIdQNDkygBE2_w",bottomBtns:"uwvenAZWGyD5RdZJBDtY",container:"_4Xj9NqT3RlWoXOF9sIB",bgColor:"K9PMAylPFhLQvjAV0rzb",customizeContainer:"eCrtkyvaEw5EGq1iTkpb",h5Btn:"djvqyB9IgkiFd8Rww9SE",btn2:"KijbywXOWoHmMhQVYbMW",receiveDiscount:"Qxd3eeaOHzsm5OavWHD6",btn1:"OJKnuX1SdrakdqWua5Ix",formModal:"M2oU7LFq2dpRdr40epb_",receiveBtn:"G60ovJtuaDb1n92ATPH7",receiveTimes:"Jj0VvYFH3Jv3P4ZzMrq5",introduction:"yWSWJBRH15O8UNBwi6Hc",paddingBottom:"Ci5BesSJeFF7V3p9ekNM",introductionInner:"mRWJ3dwis6LX5Cigw20q",activityBottom:"f6Hdppzziw5Ocz_4b7HG",discountView:"f5Ruu8CIOUwvNyM9R1uY",header:"nFkHDrNVzucOSjOVSkVo",changeGameBtns:"l33Ka3g_LqqyxWZG6i6s",total:"HUnR0IXcIWtwiRH69sAz",customizeBtn:"AzSfD8qP8gM2kUfA2vid",customizeWrap:"K9JimfJdAKv0fvE8GgcR",textDarken:"r62waCRxFhGGf1TU0ZsQ",btn:"lzu35D2wRxqVmh4J0_A3",processing:"H5yJT30fplLKopY3Ucle",forward:"d4npa_nICeiD5SVDAHEz",formItemDiv:"l7fBL945zxYK6Avbm5hA"}},26025:function(e,t,n){"use strict";n.d(t,{r:function(){return u},Z:function(){return _}});var r,i,a,o,s,c,u,l=n(7903),d=n(3587),v=n(21797),p=n(92317),h=n(82345),y=n(72283),b=n(20793),f=n(50125),m=n(17360),w=(n(41320),n(92222),n(9653),n(21249),n(38880),n(30813)),g=n(90825),R=n(76937),Z=n(46729),k=n(95306),T=n(81764),x=n(98292),S=n(6130),C="X6uFqmzBqSNYer43npOA",A="aqZSZRN3OSJXvuDyxWcO";!function(e){e[e.EVENT=0]="EVENT",e[e.TASK=1]="TASK",e[e.BACKWATER=2]="BACKWATER",e[e.AWARD=3]="AWARD"}(u||(u={}));var _=(r=(0,w.wA)({name:"PromotionsBar"}),i=(0,w.fI)(),a=(0,w.RL)("activedTab",{immediate:!0}),r((s=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(){var e;(0,v.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,d.Z)((0,h.Z)(e),"activedTab",c,(0,h.Z)(e)),(0,f.Z)((0,h.Z)(e),"current","0"),e}return(0,p.Z)(n,[{key:"defaultTabsConfig",get:function(){var e=(0,T.QT)().t,t=(0,x.h)(),n=t.getActivesAuthInfos,r=t.getredDot;return[{label:e("lobby.footer.quickJump.active"),value:u.EVENT,hide:!n.activeCount,redDot:null==r?void 0:r.activeCount},{label:e("lobby.footer.quickJump.task"),value:u.TASK,hide:!n.taskCount,redDot:null==r?void 0:r.taskCount},{label:e("lobby.footer.quickJump.backwater"),value:u.BACKWATER,hide:!n.returnGoldCount,redDot:null==r?void 0:r.returnGoldCount},{label:e("lobby.system.award"),value:u.AWARD,redDot:null==r?void 0:r.rewardCount}]}},{key:"activedTabWatcher",value:function(){this.current=String(this.activedTab)}},{key:"changeTab",value:function(e){var t=this;if(this.current!==e){this.current=e;var n=(0,x.h)().updateTabItem,r=this.$route.query;switch(delete r.current,Number(e)){case u.EVENT:this.$router.push({name:R.x4.EVENT,query:(0,l.Z)((0,l.Z)({},this.$route.query),{},{tabItem:Z.R.EVENT})});break;case u.TASK:g.sG.Modal.open("taskModal").then((function(e){e.afterClose=function(){t.current=String(t.activedTab)}}));break;case u.BACKWATER:n(Z.R.REBATE),this.$router.push({name:R.x4.CASHBACK,query:(0,l.Z)((0,l.Z)({},r),{},{tabItem:Z.R.REBATE})});break;case u.AWARD:this.$router.push({name:R.x4.AWARD,query:(0,l.Z)((0,l.Z)({},r),{},{tabItem:Z.R.EVENT})})}}}},{key:"render",value:function(){var e,t,n,r,i=arguments[0];return i("div",{class:C},[null===(e=this.$scopedSlots)||void 0===e||null===(t=e["tab-top"])||void 0===t?void 0:t.call(e),i(k.mQ.Tsx,{attrs:{activeKey:this.current},on:{change:this.changeTab}},[this.defaultTabsConfig.map((function(e){return!e.hide&&i(k.mQ.TabPane,{key:String(e.value)},[i("template",{slot:"tab"},[e.redDot?i(S.Z,{class:A,attrs:{value:e.redDot}},[e.label]):e.label])])}))]),null===(n=this.$scopedSlots)||void 0===n||null===(r=n["tab-bottom"])||void 0===r?void 0:r.call(n)])}}]),n}(w.XY),c=(0,m.Z)(s.prototype,"activedTab",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,m.Z)(s.prototype,"activedTabWatcher",[a],Object.getOwnPropertyDescriptor(s.prototype,"activedTabWatcher"),s.prototype),o=s))||o)},64652:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z},A:function(){return i}});var r,i,a=n(23279),o=n.n(a),s=n(74492),c=n(21797),u=n(92317),l=n(82345),d=n(72283),v=n(20793),p=n(50125),h=(n(92222),n(26699),n(32023),n(41539),n(39714),n(21249),n(74916),n(23123),n(9653),n(70189),n(78783),n(33948),n(69600),n(30813)),y=n(95306),b=n(90825),f=n(86493),m=n(81764),w=n(98292),g="iLDn4PsfD0WoS02JLAe_",R="L44VFWoA15URSoZa4Em0";!function(e){e[e.EVENT=0]="EVENT",e[e.TASK=1]="TASK",e[e.AWARD=2]="AWARD"}(i||(i={}));var Z=(0,h.wA)({name:"MyReceiveBase"})(r=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(){var e;(0,c.Z)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.Z)((0,l.Z)(e),"type",i.EVENT),(0,p.Z)((0,l.Z)(e),"checkedNever",!1),(0,p.Z)((0,l.Z)(e),"receiveAllTypes",[]),e}return(0,u.Z)(n,[{key:"platfromid",get:function(){return(0,w.h)().userInfos.platfromid}},{key:"getVisibleTypes",value:function(){var e=(0,f.cF)("receiveAllTypes")[this.platfromid]||"";e.includes(this.type.toString())&&(this.checkedNever=!0),this.receiveAllTypes=e?e.split(",").map((function(e){return Number(e)})):[]}},{key:"setVisibleType",value:function(e){var t=new Set(this.receiveAllTypes);this.checkedNever=!this.checkedNever,t.has(e)?t.delete(e):t.add(e),this.receiveAllTypes=(0,s.Z)(t),(0,f.po)((0,p.Z)({},this.platfromid,this.receiveAllTypes.join(",")),"receiveAllTypes")}},{key:"openReceiveModal",value:function(e){var t=this,n=e.type,r=e.content,i=e.onOk,a=e.onCancel,s=this.$createElement;this.type=n,this.getVisibleTypes();var c=o()(i,500);if(this.receiveAllTypes.includes(n))c();else{var u=(0,w.h)().isWeb,l=(0,m.QT)().t;b.sG.Modal.create({class:g,title:l("lobby.receiveModal.kindTips"),width:u?550:600,content:function(){return s("div",[s("p",[r]),s("div",{class:R,on:{click:function(){t.setVisibleType(n)}}},[s(y.XZ.Tsx,{attrs:{checked:t.checkedNever}}),s("span",[" ",l("lobby.receiveModal.gotIt")])])])},okText:l("lobby.receiveModal.ok").toString(),onOk:c,onCancel:a})}}}]),n}(h.XY))||r},63980:function(e,t,n){"use strict";n.d(t,{Kc:function(){return f},_4:function(){return p},cA:function(){return h},dW:function(){return y},iP:function(){return v},r8:function(){return b}});var r=n(70970),i=n(2813),a=(n(76566),n(25325),n(50125)),o=(n(74916),n(23123),n(26699),n(32023),n(2707),n(69600),n(92222),n(41539),n(54747),n(39714),n(9653),n(3741)),s=(n(86493),n(81764)),c=n(98292),u=n(71707),l=n(98256),d=n(66274),v=(o.zP.Android,o.zP.Ios,function(e){var t;return(null!==(t=null==e?void 0:e.split(","))&&void 0!==t?t:[]).includes(o.zP.Pc)}),p=function(e){var t,n,r=(0,s.QT)().t,i=(0,c.h)().isWeb,a=null!==(t=null==e?void 0:e.split(","))&&void 0!==t?t:[];return a.sort((function(e,t){return+e-+t})),(n=i?a.includes(o.zP.Pc):a.includes(o.zP.H5))?{canWebReceive:n,errorMessage:""}:{canWebReceive:n,errorMessage:r("lobby.event.validTips.limit_".concat(a.join("_")))}},h=function(e,t){var n,a=(0,s.QT)().t,v=(0,c.h)(),h=v.isWeb,y=v.openDownloadAppModal;if(e){var b=p(e),f=b.canWebReceive,m=b.errorMessage;if(!f)var w=1===(null==e?void 0:e.length)&&e===o.zP.H5,g=1===(null==e?void 0:e.length)&&e===o.zP.Pc,R=l.Z.Modal.create({class:d.Z.receiveTips,title:a("lobby.receiveModal.kindTips"),width:u.ZP.px2rem(600),content:w?m:h&&t||m,closable:g&&!h||!!t&&h,hiddenBtns:g&&!h||!!t&&h,cancelText:a("lobby.modal.task.close").toString(),okText:a("lobby.gameMenu.toDownloadApp").toString(),onOk:(n=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.destroy();case 2:y();case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})});return f}return!1},y=function(e){var t,n=(0,s.QT)().t;return(t={},(0,a.Z)(t,o.Im.UNCONDITIONAL,n("lobby.event.unconditional")),(0,a.Z)(t,o.Im.CUMULATIVECODING,n("lobby.event.cumulativeCoding")),(0,a.Z)(t,o.Im.CUMULATIVERECHARGE,n("lobby.event.cumulativereCharge")),t)[e]},b=function(e){var t=Number(e);return t?t>0?"+".concat(t):t:0},f=function(e,t){if(e)var n,a=l.Z.Modal.create({width:u.ZP.px2rem(600),content:e,getContainer:function(){return t&&document.querySelector("".concat(t))||document.body},closable:!0,hiddenBtns:!0,onOk:(n=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.destroy();case 2:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})}},73284:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return de}});var r,i,a,o,s,c,u,l,d=n(36568),v=n.n(d),p=n(27361),h=n.n(p),y=n(82492),b=n.n(y),f=n(70970),m=n(22705),w=n(2813),g=n(3587),R=n(21797),Z=n(92317),k=n(82345),T=n(72283),x=n(20793),S=n(50125),C=n(17360),A=(n(41320),n(92222),n(41539),n(54747),n(26699),n(32023),n(68309),n(21249),n(57327),n(78783),n(33948),n(39714),n(38880),n(36680)),_=n(95306),q=n(90416),D=n(30813),E=n(36236),Y=n(27702),N=n(90825),W=n(76937),I=n(24500),B=n(14614),M=n(46692),V=n(81764),P=n(71707),L=n(63980),O=n(98292),K=n(37061),Q=n(64652),z=n(26025),U=n(45203),H=n.n(U),G=n(73161),J="NquewXTTC5XXNW2NKqZb",X="dC476R93BRtxie5XHi8J",F="vvXUayopH3q1Lhd2quLd",j="vIlU2X1UIKt9tBKaNMn6",$="b8jAUHdOiCuXFmdyP8I7",ee="xbq3KZHQshjNUlPbb_Iy",te="d69fWAbHuhokvtKbufpE",ne="cbUvsHAF0irzrpJU3v7g",re="Jl_rsegirAN92vYxPVuW",ie="aWxCK6Sjcrd4hLmwOvOs",ae="pNRe457SSgk3zkQ_awKd",oe="l_6YgwPrwFGeYJZrNnuK",se="ovTWbSZiQa62K5LaDU2w",ce="PbeP7PA7J5ovwCUMdZb5",ue=n(41800),le=n(69158),de=(r=(0,D.wA)({name:"Award"}),i=(0,D.Rl)(),a=(0,D.RL)("mainStore.language",{immediate:!0}),o=(0,D.RL)("hasLogined"),s=(0,D.RL)("receiveType"),r((u=function(e){(0,T.Z)(p,e);var t,n,r,i,a,o,s,c,u,d=(0,x.Z)(p);function p(){var e;(0,R.Z)(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=d.call.apply(d,[this].concat(n)),(0,g.Z)((0,k.Z)(e),"myTableRef",l,(0,k.Z)(e)),(0,S.Z)((0,k.Z)(e),"receiveRewardIds",[]),(0,S.Z)((0,k.Z)(e),"condition",{}),(0,S.Z)((0,k.Z)(e),"receiveRewardList",[]),(0,S.Z)((0,k.Z)(e),"receiveType",K.Yq.hasSend),e}return(0,Z.Z)(p,[{key:"store",get:function(){return(0,le.Z)()}},{key:"mainStore",get:function(){return(0,O.h)()}},{key:"isWeb",get:function(){return(0,O.h)().isWeb}},{key:"hasLogined",get:function(){return(0,O.h)().hasLogined}},{key:"languageKeyChange",value:function(){this.resetQuery()}},{key:"updateWhenLogined",value:function(e,t){e!==t&&this.store.request()}},{key:"getReceiveStatusLabel",get:function(){var e,t=(0,V.QT)().t;return e={},(0,S.Z)(e,K.Yq.canReceive,t("lobby.reward.base.canReceive")),(0,S.Z)(e,K.Yq.hasReceive,t("lobby.reward.base.hasReceive")),(0,S.Z)(e,K.Yq.hasExpired,t("lobby.reward.base.hasExpired")),(0,S.Z)(e,K.Yq.hasSend,t("lobby.reward.base.hasSend")),e}},{key:"receiveRewardCount",get:function(){var e,t=this,n=0;return null===(e=this.receiveRewardList)||void 0===e||e.forEach((function(e){var r=e.rewardType===Y.Yr.receiveRegularly&&e.periodTime<=0,i=e.rewardType===Y.Yr.directlyAccount&&e.receiveStatus===Y.Mr.UnReceive,a=e.rewardType===Y.Yr.PlayerSubCollarExpiredVoid&&e.receiveStatus===Y.Mr.UnReceive;(r||i||a)&&(n+=1,t.receiveRewardIds.includes(e.id)||t.receiveRewardIds.push(e.id))})),n}},{key:"computedReceiveButton",get:function(){return this.userVipReward.vip_gift_status==K.Yq.canReceive||this.userVipReward.day_bonus_status==K.Yq.canReceive||this.userVipReward.week_bonus_status==K.Yq.canReceive||this.userVipReward.month_bonus_status==K.Yq.canReceive||this.receiveRewardCount||this.yuebaoRewardColumns.length>0?Y.sz.Success:Y.sz.Disabled}},{key:"created",value:(u=(0,w.Z)((0,f.Z)().mark((function e(){var t,n,r,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryUserDetails();case 2:return e.next=4,this.queryVipdetails();case 4:return e.next=6,this.queryFinanceGetYuebao();case 6:return e.next=8,(0,ue.Z)((0,I.DB)());case 8:if(t=e.sent,n=(0,m.Z)(t,2),r=n[0],i=n[1],!r){e.next=14;break}throw r;case 14:if(this.state.isShowDiscount=i,null==i||!i.length){e.next=18;break}return e.next=18,this.getActivityTitle(i[0].activeId);case 18:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getActivityTitle",value:(c=(0,w.Z)((0,f.Z)().mark((function e(t){var n,r,i,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ue.Z)((0,I.EB)(t));case 2:if(n=e.sent,r=(0,m.Z)(n,2),i=r[0],a=r[1],!i){e.next=8;break}return e.abrupt("return");case 8:this.activityTitle=null==a?void 0:a.name;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"queryUserDetails",value:(s=(0,w.Z)((0,f.Z)().mark((function e(){var t;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.st)();case 2:t=e.sent,this.setState({userVipInfo:t});case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"yuebaoRewardColumns",get:function(){var e=this,t=this.state.yuebaoCurIncome,n=(0,V.QT)().t,r=t;return[{id:(new Date).getTime(),activeName:n("lobby.yuebao.yuebaoProfix"),amount:r,receiveStatus:r>0?K.Yq.canReceive:K.Yq.hasReceive}].filter((function(e){return e.amount>0})).map((function(t){return b()(t,{loading:!1,receiveCallback:function(){return e.yuebaoHandleReceive()}})}))}},{key:"queryFinanceGetYuebao",value:(o=(0,w.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiYuebao();case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"query",value:(a=(0,w.Z)((0,f.Z)().mark((function e(){var t,n,r,i,a=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.U0)();case 2:return r=e.sent,i=r.filter((function(e){return e.receiveStatus===K.Yq.canReceive})),this.receiveRewardList=i,e.abrupt("return",{data:null!==(t=null==r||null===(n=r.map((function(e){return b()(e,{loading:!1})})))||void 0===n?void 0:n.filter((function(e){return e.receiveStatus==a.receiveType})))&&void 0!==t?t:[],isCache:!0});case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"vipRewardColumns",get:function(){var e,t,n,r,i,a,o,s,c,u,l,d,v=this,p=this.userVipReward;return[{id:Y.yo.promotion,activeName:this.titleMap[Y.yo.promotion],amount:null!==(e=p.vip_bonus)&&void 0!==e?e:0,receiveStatus:null!==(t=p.vip_gift_status)&&void 0!==t?t:Y.Mr.None,receiveCallback:(d=(0,w.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.setState({loading:!0}),e.next=3,v.handleReviceBouns(Y.qi.promotion,Y.yo.promotion,v.resetQuery);case 3:v.setState({loading:!1});case 4:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{id:Y.yo.day,activeName:this.titleMap[Y.yo.day],amount:null!==(n=p.day_bonus)&&void 0!==n?n:0,receiveStatus:null!==(r=p.day_bonus_status)&&void 0!==r?r:Y.Mr.None,receiveCallback:(l=(0,w.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.setState({loading:!0}),e.next=3,v.handleReviceBouns(Y.qi.day,Y.yo.day,v.resetQuery);case 3:v.setState({loading:!1});case 4:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{id:Y.yo.week,activeName:this.titleMap[Y.yo.week],amount:null!==(i=p.week_bonus)&&void 0!==i?i:0,receiveStatus:null!==(a=p.week_bonus_status)&&void 0!==a?a:Y.Mr.None,receiveCallback:(u=(0,w.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.setState({loading:!0}),e.next=3,v.handleReviceBouns(Y.qi.week,Y.yo.week,v.resetQuery);case 3:v.setState({loading:!1});case 4:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{id:Y.yo.month,activeName:this.titleMap[Y.yo.month],amount:null!==(o=p.month_bonus)&&void 0!==o?o:0,receiveStatus:null!==(s=p.month_bonus_status)&&void 0!==s?s:Y.Mr.None,receiveCallback:(c=(0,w.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.setState({loading:!0}),e.next=3,v.handleReviceBouns(Y.qi.month,Y.yo.month,v.resetQuery);case 3:v.setState({loading:!1});case 4:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})}].filter((function(e){return e.receiveStatus==Y.Mr.UnReceive})).map((function(e){return b()(e,{loading:!1})}))}},{key:"getVipData",value:function(){return this.queryVipdetails(),this.vipRewardColumns}},{key:"resetQuery",value:(i=(0,w.Z)((0,f.Z)().mark((function e(){var t,n,r,i,a,o=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.receiveType!=K.so.yuebao){e.next=6;break}this.queryFinanceGetYuebao(),t=this.yuebaoRewardColumns,e.next=14;break;case 6:if(this.receiveType!=K.so.vip){e.next=10;break}t=this.getVipData(),e.next=14;break;case 10:return e.next=12,this.query();case 12:a=e.sent,t=null!==(n=null==a||null===(r=a.data)||void 0===r||null===(i=r.map((function(e){return b()(e,{loading:!1,receiveCallback:function(){return o.receiveSignalReward(e)}})})))||void 0===i?void 0:i.filter((function(e){return e.receiveStatus==o.receiveType})))&&void 0!==n?n:[];case 14:h()(this.myTableRef,"changeState")({virtualPageNo:1,source:t}),this.setState({loading:!1});case 16:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"receiveSignalReward",value:(r=(0,w.Z)((0,f.Z)().mark((function e(t){var n,r,i=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),t.loading=!0,e.next=4,(0,B.Wk)({id:t.id}).finally((function(){t.loading=!1,i.setState({loading:!1})}));case 4:return n=(0,V.QT)(),r=n.t,N.sG.Modal.message({type:"success",content:r("lobby.event.invest.receiveSuccess")}),e.next=8,this.mainStore.updatePrize();case 8:this.mainStore.updateReceiveAward(),this.resetQuery();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"yuebaoHandleReceive",value:(n=(0,w.Z)((0,f.Z)().mark((function e(){var t,n,r,i,a,o,s,c,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,V.QT)(),n=t.t,this.setState({loading:!0}),e.next=4,(0,ue.Z)((0,M.El)());case 4:if(r=e.sent,i=(0,m.Z)(r,1),a=i[0],this.setState({loading:!1}),!a){e.next=13;break}return u=null!==(o=null==(c=a||{})||null===(s=c.data)||void 0===s?void 0:s.msg)&&void 0!==o?o:"",(0,L.Kc)(u),e.abrupt("return");case 13:return N.sG.Modal.message({type:"success",content:n("lobby.yuebao.receiveSussessTip")}),e.next=16,this.resetQuery();case 16:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"awardReceiveBatchReward",value:(t=(0,w.Z)((0,f.Z)().mark((function e(){var t,n=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=(0,w.Z)((0,f.Z)().mark((function e(){var t,r,i,a,o,s,c,u,l,d,v,p,h,y,b,g;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,V.QT)(),r=t.t,n.setState({batchLoading:!0,loading:!0}),i=!1,a=!1,o=!1,s=0,c=function(){var e=(0,w.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a&&i&&o)){e.next=18;break}if(n.setState({batchLoading:!1,loading:!1}),N.sG.Modal.message({type:"success",content:r("lobby.event.invest.receiveSuccess")}),(0,O.h)().audioReceivePlay(),n.receiveType===K.so.yuebao&&n.state.yuebaoCurIncome&&n.setState({yuebaoCurIncome:0}),!s||n.receiveType!==K.so.vip){e.next=8;break}return e.next=8,n.queryVipdetails();case 8:return e.next=10,n.queryUserDetails();case 10:return n.receiveType!==K.so.vip&&n.receiveType!==K.so.yuebao||n.query(),e.next=13,n.resetQuery();case 13:if(n.receiveType!==K.so.yuebao&&n.yuebaoRewardColumns.length>0&&n.queryFinanceGetYuebao(),!s||n.receiveType===K.so.vip){e.next=17;break}return e.next=17,n.queryVipdetails();case 17:n.mainStore.updateReceiveAward();case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,w.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.receiveRewardCount>0)){e.next=5;break}return e.next=3,(0,B.Yp)().then((function(){i=!0,c()})).finally((function(){n.setState({batchLoading:!1,loading:!1})}));case 3:e.next=7;break;case 5:i=!0,c();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e;if((null===(e=n.mainStore.vipInfos)||void 0===e?void 0:e.vip_status)==A._.OPEN){var t=[];n.userVipReward.vip_gift_status==K.Yq.canReceive&&t.push(n.handleReviceBouns(Y.qi.promotion,Y.yo.promotion,(function(){}),!0)),n.userVipReward.day_bonus_status==K.Yq.canReceive&&t.push(n.handleReviceBouns(Y.qi.day,Y.yo.day,(function(){}),!0)),n.userVipReward.week_bonus_status==K.Yq.canReceive&&t.push(n.handleReviceBouns(Y.qi.week,Y.yo.week,(function(){}),!0)),n.userVipReward.month_bonus_status==K.Yq.canReceive&&t.push(n.handleReviceBouns(Y.qi.month,Y.yo.month,(function(){}),!0)),s=t.length,Promise.all(t).then((0,w.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=!0,u();case 2:case"end":return e.stop()}}),e)})))).catch((function(){n.setState({batchLoading:!1,loading:!1})}))}else o=!0,u()},!(n.yuebaoRewardColumns.length>0)){e.next=27;break}return e.next=12,(0,ue.Z)((0,M.El)());case 12:if(d=e.sent,v=(0,m.Z)(d,1),!(p=v[0])){e.next=23;break}return g=null!==(h=null==(b=p||{})||null===(y=b.data)||void 0===y?void 0:y.msg)&&void 0!==h?h:"",(0,L.Kc)(g),n.setState({batchLoading:!1,loading:!1}),e.abrupt("return");case 23:a=!0,l();case 25:e.next=29;break;case 27:a=!0,l();case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.openReceiveModal({type:Q.A.AWARD,content:(0,V.QT)().t("lobby.receiveModal.eventContent"),onOk:t});case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderTimeDom",value:function(e){var t=this.$createElement,n=e.checkTime,r=e.periodTime,i=e.receiveStatus,a=e.rewardType,o=(0,V.QT)().t,s=function(){var e=86400,t=parseInt(String(r/e));return{day:t,hour:parseInt(String((r-t*e)/e*24))}};return t("div",{class:ee},[t("div",[P.ZP.format(n)]),r>0&&K.Yq.canReceive===i&&function(e){return t("div",[s().day>0?t("div",[e===Y.Yr.receiveRegularly?o("lobby.reward.base.available",[s().day]):o("lobby.reward.base.expired",[s().day])]):t("div",[e===Y.Yr.receiveRegularly?o("lobby.reward.base.availableHouur",[s().hour]):o("lobby.reward.base.expiredHour",[s().hour])])])}(a)])}},{key:"renderListTimeDom",value:function(e){var t=this.$createElement,n=e.checkTime,r=e.periodTime,i=e.receiveStatus,a=e.rewardType,o=(0,V.QT)().t,s=function(){var e=86400,t=parseInt(String(r/e));return{day:t,hour:parseInt(String((r-t*e)/e*24))}};return t("div",{class:ee},[t("div",[P.ZP.format(n),r>0&&K.Yq.canReceive===i&&function(e){return t("span",{class:te},[s().day>0?t("span",[e===Y.Yr.receiveRegularly?o("lobby.reward.base.available",[s().day]):o("lobby.reward.base.expired",[s().day])]):t("span",[e===Y.Yr.receiveRegularly?o("lobby.reward.base.availableHouur",[s().hour]):o("lobby.reward.base.expiredHour",[s().hour])])])}(a)])])}},{key:"renderOperateDom",value:function(e){var t=this.$createElement,n=e.receiveStatus,r=e.receiveCallback,i=e.periodTime,a=e.rewardType;if([K.Yq.hasExpired,K.Yq.hasReceive,K.Yq.hasSend].includes(n))return t("div",{class:ce},[this.getReceiveStatusLabel[n]]);if([K.Yq.canReceive].includes(n)){var o=a===Y.Yr.receiveRegularly&&i>0;return this.renderButton(this.getReceiveStatusLabel[K.Yq.canReceive],(function(){return r()}),e.loading,o?Y.sz.Disabled:Y.sz.Success)}return t("div")}},{key:"renderNameDom",value:function(e){var t=this,n=this.$createElement,r=e.activeName,i=e.frontRemark;return n("p",{class:ie},[n("span",[r]),i&&n("div",{class:ae,on:{click:function(){return t.openTip(i)}}},[n("icon-sprite",{attrs:{sprite:H()}})])])}},{key:"defaultColumns",get:function(){var e,t,n,r,i,a=this;return e=function(e,t){return a.renderTimeDom(t)},t=function(e){return a.renderAmount(+e,!0)},n=function(e,t){return a.renderOperateDom(t)},r=function(e,t){return a.renderNameDom(t)},[{title:(i=(0,V.QT)().t)("lobby.reward.award.table.time"),dataIndex:"checkTime",key:"checkTime",width:P.ZP.px2rem(200),customRender:e},{title:i("lobby.reward.award.table.name"),dataIndex:"activeName",key:"activeName",width:P.ZP.px2rem(200),customRender:r},{title:i("lobby.reward.award.table.reward"),dataIndex:"amount",key:"amount",width:P.ZP.px2rem(200),customRender:t},{title:i("lobby.reward.award.table.operate"),dataIndex:"opt",key:"opt",width:P.ZP.px2rem(200),customRender:n}]}},{key:"openTip",value:function(e){var t=this.$createElement,n=(0,V.QT)().t;N.sG.Modal.create({width:this.isWeb?P.ZP.px2rem(550):P.ZP.px2rem(600),hiddenBtns:!0,closable:!0,title:n("lobby.records.detail").toString(),content:function(){return t("div",{class:oe},[e])}})}},{key:"listRenderItem",value:function(e){var t=this,n=this.$createElement;return n("div",{class:se},[n(_.X2.Tsx,{attrs:{type:"flex",justify:"space-between"}},[n(_.JX.Tsx,{attrs:{span:18},class:ie},[n("span",[e.activeName]),e.frontRemark&&n("div",{class:ae,on:{click:function(){return t.openTip(e.frontRemark)}}},[n("icon-sprite",{attrs:{sprite:H()}})])]),n(_.JX.Tsx,{attrs:{span:6}},[this.renderOperateDom(e)])]),n(_.X2.Tsx,{attrs:{type:"flex",justify:"space-between"}},[n(_.JX.Tsx,[this.renderListTimeDom(e)]),n(_.JX.Tsx,[this.renderAmount(+e.amount,!0)])])])}},{key:"sideTabsRender",value:function(){var e,t,n,r,i=this,a=this.$createElement,o=(0,V.QT)().t,s=this.mainStore,c=s.userInfos,u=s.currentTheme,l=E.F.commonIconMap(),d={useCanvas:!0,linearGradientConfig:{colorStop:[{progress:0,color:u["--theme-aside-icon-color-0"]},{progress:1,color:u["--theme-aside-icon-color-1"]}]}},p={useCanvas:!0,linearGradientConfig:{colorStop:[{progress:0,color:u["--theme-aside-active-font-color"]},{progress:1,color:u["--theme-aside-active-font-color"]}]}},h=this.isWeb?37:44,y=this.store.getYuebaoData,b=(0,O.h)().isWeb;return[{value:K.Yq.hasSend,isVertical:!0,itemClass:"hasSend",icon:a("icon-sprite",v()([{},{attrs:this.receiveType==K.Yq.hasSend?p:d},{attrs:{scale:null!==(e=h/G.Z.sprite_main_icon_yh_menu_ypf.width)&&void 0!==e?e:h,sprite:G.Z.sprite_main_icon_yh_menu_ypf}}])),label:a("span",[o("lobby.reward.base.hasSend")])},{value:K.Yq.canReceive,isVertical:!0,badgeCount:this.receiveRewardCount,itemClass:"canReceive",icon:a("icon-sprite",v()([{},{attrs:this.receiveType==K.Yq.canReceive?p:d},{attrs:{scale:null!==(t=h/G.Z.sprite_main_icon_yh_menu_dlq.width)&&void 0!==t?t:h,sprite:G.Z.sprite_main_icon_yh_menu_dlq}}])),label:a("span",[o("lobby.reward.base.toBeCollected")])},{value:K.so.vip,isVertical:!0,badgeCount:[i.userVipReward.vip_gift_status==K.Yq.canReceive,i.userVipReward.day_bonus_status==K.Yq.canReceive,i.userVipReward.week_bonus_status==K.Yq.canReceive,i.userVipReward.month_bonus_status==K.Yq.canReceive].filter((function(e){return 1==e})).length,icon:a("icon-sprite",v()([{},{attrs:this.receiveType==K.so.vip?p:d},{attrs:{scale:null!==(n=h/G.Z.sprite_main_icon_yh_menu_vip.width)&&void 0!==n?n:h,sprite:G.Z.sprite_main_icon_yh_menu_vip}}])),hide:(null===(r=this.mainStore.vipInfos)||void 0===r?void 0:r.vip_status)!=A._.OPEN,label:a("span",[o("lobby.footer.quickJump.vip")])},{value:K.so.yuebao,isVertical:!0,badgeCount:this.yuebaoRewardColumns.length,hide:!y.switchStatus&&!y.principal,itemClass:"yuebao",icon:a(_.JO.Tsx,{attrs:{component:{functional:!0,render:function(){var e;return a("icon-sprite",v()([{},{attrs:i.receiveType==K.so.yuebao?p:d},{attrs:{scale:null!==(e=h/l[(null==c?void 0:c.currency)||"CNY"].ASIDE_MENU_YEB.width)&&void 0!==e?e:h,sprite:l[(null==c?void 0:c.currency)||"CNY"].ASIDE_MENU_YEB}}]))}}}}),label:a("span",[o("lobby.finance.withdraw.yuebao")])},{value:"allReceive",label:this.renderButton(o("lobby.reward.base.allReceive"),this.awardReceiveBatchReward,this.state.batchLoading,this.computedReceiveButton),isButton:!0},{value:"pickUpRecord",label:a(_.zx.Tsx,{attrs:{type:"primary"},class:ne,on:{click:function(){return i.$router.push({name:W.x4.RECORDS})}}},[o("lobby.promote.pickUpRecord")]),isButton:!0}].concat(this.state.isShowDiscount.length?[{value:"discountCode",label:a(_.zx.Tsx,{attrs:{type:"primary"},class:[ne,re],on:{click:function(){var e=i.state.isShowDiscount;e.length>0&&N.sG.Modal.open("discountCode",{title:i.activityTitle||"",contentConfig:e[0].contentConfig,activeId:e[0].activeId,isModal:!0,onSuccess:function(){return N.sG.Modal.close("discountCode")},width:b?800:690})}}},[o("lobby.event.discountCode.discountCode")]),isButton:!0}]:[]).filter((function(e){return!e.hide}))}},{key:"render",value:function(){var e=this,t=arguments[0],n="calc(".concat(document.body.clientHeight,"px - 1.24rem - 0.95rem)");return t(q.tK,{attrs:{loading:this.state.loading,showBack:!this.isWeb,isShadowContent:!1},class:[J,"awardRoot"]},[t("div",{class:[X,"awardContainer"]},[!this.isWeb&&t(z.Z,{attrs:{activedTab:z.r.AWARD}}),t(q.CO,{class:F,attrs:{tabsWidth:this.isWeb?130:150,renderList:this.sideTabsRender(),persistedActiveName:"",badgeClass:j},model:{value:e.receiveType,callback:function(t){e.receiveType=t}}}),t(q.FN,{class:[$],attrs:{rowKey:"id",query:this.query,condition:this.condition,columns:this.defaultColumns,listMode:!this.isWeb,listRenderItem:this.listRenderItem,listScrollHeight:n,virtualLoading:!0,defaultPageSize:this.isWeb?void 0:15,pagination:!1},ref:"myTableRef"})])])}}]),p}((0,D.Wr)(K.ZP,Q.Z)),l=(0,C.Z)(u.prototype,"myTableRef",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,C.Z)(u.prototype,"languageKeyChange",[a],Object.getOwnPropertyDescriptor(u.prototype,"languageKeyChange"),u.prototype),(0,C.Z)(u.prototype,"updateWhenLogined",[o],Object.getOwnPropertyDescriptor(u.prototype,"updateWhenLogined"),u.prototype),(0,C.Z)(u.prototype,"resetQuery",[s],Object.getOwnPropertyDescriptor(u.prototype,"resetQuery"),u.prototype),c=u))||c)}}]);