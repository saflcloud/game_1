(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[520],{88032:function(e){e.exports={id:"comm_img_corner--sprite-usage",viewBox:"0 0 28 28",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_img_corner--sprite",toString:function(){return this.url}}},72674:function(e){e.exports={id:"img_szxb1--sprite-usage",viewBox:"0 0 23.785 23.785",url:"/assets/sprite.c10e6e11446a81e9da57.svg#img_szxb1--sprite",toString:function(){return this.url}}},63594:function(e){e.exports={id:"img_szxb2--sprite-usage",viewBox:"0 0 17.999 18",url:"/assets/sprite.c10e6e11446a81e9da57.svg#img_szxb2--sprite",toString:function(){return this.url}}},25240:function(e,t,r){"use strict";r.d(t,{Z:function(){return O}});var i,a,o,n,s,l,c,u=r(3587),d=r(21797),h=r(92317),p=r(82345),f=r(72283),v=r(20793),m=r(17360),b=(r(41320),r(92222),r(30813)),g=r(95627),y=r(71707),k=r(74567),Z=r.n(k),w=r(88032),x=r.n(w),D="_ojhUxKWGyFdJIV2Lodx",I="ZmbOmk0ieSKOdeIimJCA",P="orcE9bnrEF9xDTLnxVZg",O=(i=(0,b.wA)({name:"SubscriptComp"}),a=(0,b.fI)(g.ZP.string.def(y.ZP.px2rem("30px"))),o=(0,b.fI)(g.ZP.string.def(y.ZP.px2rem("30px"))),i((s=function(e){(0,f.Z)(r,e);var t=(0,v.Z)(r);function r(){var e;(0,d.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,p.Z)(e),"width",l,(0,p.Z)(e)),(0,u.Z)((0,p.Z)(e),"height",c,(0,p.Z)(e)),e}return(0,h.Z)(r,[{key:"render",value:function(){var e=arguments[0];return e("p",{class:D},[e("icon-sprite",{class:P,attrs:{sprite:Z()}}),e("icon-sprite",{class:I,attrs:{sprite:x()}})])}}]),r}(b.XY),l=(0,m.Z)(s.prototype,"width",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,m.Z)(s.prototype,"height",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n=s))||n)},40520:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ut}});var i,a=r(7903),o=r(36568),n=r.n(o),s=r(22705),l=(r(95532),r(21290)),c=r(70970),u=r(2813),d=r(3587),h=r(21797),p=r(92317),f=r(82345),v=r(72283),m=r(20793),b=r(50125),g=(r(41320),r(17360)),y=(r(38862),r(41539),r(54747),r(47941),r(92222),r(39714),r(57327),r(21249),r(74916),r(77601),r(38880),r(30813)),k=r(14577),Z=r(95306),w=r(90416),x=r(39730),D=r(23128);!function(e){e[e.MAN=1]="MAN",e[e.WOMAN=2]="WOMAN"}(i||(i={}));var I,P,O,A,T,S,L,R,z,M,F,B,N,_,Y,C,W,E,$,G,V,J,U,j,q,H,Q,X,K,ee,te,re,ie,ae,oe,ne,se,le,ce,ue=r(90825),de=r(33990),he=r(76937),pe=r(36680),fe=function(e){return ue.Uh.post({url:"/user/settings/modifyinfo",data:e})},ve=r(81764),me=r(98292),be=r(71707),ge=(r(15306),r(47042),r(68309),r(95627)),ye=r(30381),ke=r.n(ye),Ze="ZZe_MkEWNa2WmWk0tzxK",we="De_uCn901QBAfqJtFsvA",xe="s5nXzRMB4nJvIR9NNE1x",De=(I=(0,y.wA)({name:"ComDatePicker"}),P=(0,y.yU)("date","change",{required:!0}),O=(0,y.fI)(ge.ZP.bool.def(!1)),A=(0,y.fI)({required:!1}),T=(0,y.fI)({required:!1}),S=(0,y.Rl)(),L=(0,y.RL)("calcResult"),R=(0,y.RL)("defDate",{immediate:!0}),I((M=function(e){(0,v.Z)(i,e);var t,r=(0,m.Z)(i);function i(){var e;(0,h.Z)(this,i);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,b.Z)((0,f.Z)(e),"t",(0,ve.QT)().t),(0,d.Z)((0,f.Z)(e),"dateVal",F,(0,f.Z)(e)),(0,d.Z)((0,f.Z)(e),"disable",B,(0,f.Z)(e)),(0,d.Z)((0,f.Z)(e),"defDate",N,(0,f.Z)(e)),(0,d.Z)((0,f.Z)(e),"layout",_,(0,f.Z)(e)),(0,b.Z)((0,f.Z)(e),"form",{year:null,month:void 0,day:null,date:""}),(0,d.Z)((0,f.Z)(e),"formModelRef",Y,(0,f.Z)(e)),e}return(0,p.Z)(i,[{key:"monthList",get:function(){for(var e=[],t=1;t<=12;t++)e.push({value:"".concat(t),name:t<10?"0".concat(t):t});return e}},{key:"calcResult",get:function(){if(!this.form.month||!this.form.day||!this.form.year)return"";var e="".concat(this.form.year,"-").concat(this.form.month,"-").concat(this.form.day);return ke()(e,"YYYY-MM-DD").format("YYYY-MM-DD")}},{key:"changeDate",value:function(e,t){e&&e!==t&&(this.dateVal=e,this.form.date=e)}},{key:"receivedDefDate",value:function(e,t){if(e&&e!==t&&"0"!==e){var r=ke()(this.defDate);this.form.day=r.date().toString(),this.form.month="".concat(r.month()+1),this.form.year=r.year().toString()}}},{key:"publicValidateArea",value:function(){var e=this,t=this.$createElement;return ue.sG.FuncRender.createFormModelItem.call(this).custom({prop:"date",model:this.form,formModelItemTsxData:{props:{rules:[ue.sG.Rules.create({validator:function(t,r,i){var a=ke()(),o=ke()(r);return!(o.isAfter(a)||o.isBefore(ke()("1900-1-1"))||!o.isValid())?(i(),!0):(i(e.t("lobby.common.components.datePicker.error").toString()),!1)}})]}},render:function(){return t("div",{style:{width:"100%"}})}})}},{key:"validateAllField",value:(t=(0,u.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=this.formModelRef)||void 0===t?void 0:t.validate());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"resetValidate",value:function(){var e;return null===(e=this.formModelRef)||void 0===e?void 0:e.clearValidate("date")}},{key:"processNumber",value:function(e,t){return(e=e.replace(/\D/g,"")).slice(0,t)}},{key:"lockDay",value:function(e){var t=e.target,r=this.processNumber(t.value,2);this.form.day=r}},{key:"lockYear",value:function(e){var t=e.target,r=this.processNumber(t.value,4);this.form.year=r}},{key:"renderDay",value:function(){var e=this,t=this.$createElement;return t("span",[t(Z.II.Tsx,{attrs:{disabled:this.disable,placeholder:this.t("lobby.common.components.datePicker.DD").toString()},class:we,on:{change:this.lockDay},model:{value:e.form.day,callback:function(t){e.$set(e.form,"day",t)}}})])}},{key:"renderYear",value:function(){var e=this,t=this.$createElement;return t("span",[t(Z.II.Tsx,{attrs:{disabled:this.disable,placeholder:this.t("lobby.common.components.datePicker.YYYY").toString()},on:{change:this.lockYear},class:we,model:{value:e.form.year,callback:function(t){e.$set(e.form,"year",t)}}})])}},{key:"render",value:function(){var e,t,r=this,i=arguments[0];return i(Z.au.Tsx,n()([{ref:"formModelRef",attrs:{hideRequiredMark:!0}},{props:{model:this.form}}]),[[i("div",{class:Ze,attrs:{id:"date-picker-root"}},["Year"===(null===(e=this.layout)||void 0===e?void 0:e.left)?this.renderYear():this.renderDay(),i("span",[i(Z.Ph.Tsx,{attrs:{disabled:this.disable,dropdownClassName:xe,placeholder:this.t("lobby.common.components.datePicker.MM").toString(),getPopupContainer:function(){return document.querySelector("#date-picker-root")},suffixIcon:this.disable?i("div"):null},class:we,key:"value",model:{value:r.form.month,callback:function(e){r.$set(r.form,"month",e)}}},[this.monthList.map((function(e){return i(Z.Ph.Option,{key:e.value,attrs:{value:e.value}},[e.name])}))])]),"Day"===(null===(t=this.layout)||void 0===t?void 0:t.right)?this.renderDay():this.renderYear()]),this.publicValidateArea()]])}}]),i}(y.XY),F=(0,g.Z)(M.prototype,"dateVal",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,g.Z)(M.prototype,"disable",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,g.Z)(M.prototype,"defDate",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,g.Z)(M.prototype,"layout",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=(0,g.Z)(M.prototype,"formModelRef",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,g.Z)(M.prototype,"changeDate",[L],Object.getOwnPropertyDescriptor(M.prototype,"changeDate"),M.prototype),(0,g.Z)(M.prototype,"receivedDefDate",[R],Object.getOwnPropertyDescriptor(M.prototype,"receivedDefDate"),M.prototype),z=M))||z),Ie=r(84418),Pe=(r(69600),r(43290),r(39602)),Oe=(C=(0,y.wA)({name:"ObfuscateInput"}),W=(0,y.yU)("value","trigger",{required:!0}),E=(0,y.fI)(ge.ZP.number.def(4)),$=(0,y.fI)(ge.ZP.string.def("all")),G=(0,y.RL)("current",{immediate:!0}),V=(0,y.y1)("onChange"),C((U=function(e){(0,v.Z)(r,e);var t=(0,m.Z)(r);function r(){var e;(0,h.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,d.Z)((0,f.Z)(e),"current",j,(0,f.Z)(e)),(0,d.Z)((0,f.Z)(e),"keepLen",q,(0,f.Z)(e)),(0,d.Z)((0,f.Z)(e),"mode",H,(0,f.Z)(e)),(0,b.Z)((0,f.Z)(e),"obsData",""),(0,b.Z)((0,f.Z)(e),"osObfuscating",!0),e}return(0,p.Z)(r,[{key:"obfuscateString",value:function(e,t){if(e!==t){var r=e.length;if("all"===this.mode&&r<=this.keepLen)this.obsData=new Array(r).fill("*").join("");else{var i=new Array(r-this.keepLen).fill("*").join("");this.obsData=i+e.slice(-this.keepLen)}}}},{key:"onChange",value:function(e){var t=e.target;return this.current=t.value,e}},{key:"render",value:function(){var e=this,t=arguments[0];return t(Z.II.Tsx,{nativeOn:{blur:function(){return e.osObfuscating=!0}},attrs:{value:this.osObfuscating?this.obsData:this.current,allowClear:!0},props:(0,a.Z)({},this.$attrs),on:(0,a.Z)((0,a.Z)({},this.$listeners),{},{focus:function(){return e.osObfuscating=!1},change:function(t){return e.onChange(t)}})})}}]),r}(y.XY),j=(0,g.Z)(U.prototype,"current",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=(0,g.Z)(U.prototype,"keepLen",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,g.Z)(U.prototype,"mode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,g.Z)(U.prototype,"obfuscateString",[G],Object.getOwnPropertyDescriptor(U.prototype,"obfuscateString"),U.prototype),(0,g.Z)(U.prototype,"onChange",[V],Object.getOwnPropertyDescriptor(U.prototype,"onChange"),U.prototype),J=U))||J),Ae=(0,Pe.l4)().convert(Oe),Te=r(25240),Se=r(53395),Le=r(72674),Re=r.n(Le),ze="vJuJgxthUQZJbZ2HYXHI",Me="TZQNFPYcnqoR0csegFxt",Fe="WtuNoBQHjHJhS_0qnO9w",Be="oFHrHi_phwukL6UvTYQJ",Ne="orkXHvtNM5R_5twq6l5I",_e="yJrr5gS3ZL4NGzZkaPXH",Ye="RRWQlUJLCPB59ggBUdFl",Ce="vPZG_rD0AXEtCxGfwk8J",We="Tx22KWQgt5EwE07B4jhD",Ee="biVQMQRdp90j5_YC7dva",$e="L3dN0XMXkHJ0Xc2OvuXr",Ge="oxAzHvfGt4BZ_a1aPzCg",Ve="eIeTyH0dBG_wjSVgOONq",Je="r9gABE6oBYc11bPH0cMA",Ue="AR8HX5Qvvmd1_D3K0XL0",je="aVppsz0AnjueMTx32dh1",qe="zgHt8m0uJ9LOE8yI3hSY",He="AqYcyGcnlVZbyVHUuabC",Qe="OUqlaVvJsVSa9oykkjPt",Xe="ERUDJF4GwL3Vjvfeda7Z",Ke="Rg0RckJ_QoLCuyyao8XK",et="dirhnNR335bsv6HIiTqJ",tt="VTWLrKYtnZtL9lc1CRzi",rt="Y0ywqBJETFk_UXdA074f",it="ulMsP48TIfqDaz98adl5",at="J_A5cg9bnUlSZ1N4l7xs",ot=r(41800),nt=r(63594),st=r.n(nt);!function(e){e[e.CLOSE=0]="CLOSE",e[e.OPEN=1]="OPEN"}(ce||(ce={}));var lt={avatar:de.sF.SetAvatar,nickname:de.sF.FirstSetNicname,wechat:de.sF.BindWechat,whatsapp:de.sF.BindWhatsApp,facebook:de.sF.BindFacebook,telegram:de.sF.BindTelegram,birthday:de.sF.SetBirthDay,zalo:de.sF.BindZalo,line:de.sF.BindLine,twitter:de.sF.BindTwitter},ct=function(e){var t=JSON.parse(JSON.stringify(e)),r=[];return Object.keys(t).forEach((function(e){Object.prototype.hasOwnProperty.call(lt,e)&&r.push(lt[e])})),r},ut=(Q=(0,y.wA)({name:"Setting"}),X=(0,y.RL)("store.vipInfos",{deep:!0}),K=(0,y.Rl)(),ee=(0,y.Rl)(),te=(0,k.WY)(),re=(0,k.K4)(1e3),ie=(0,k.WY)(),ae=(0,k.K4)(800),Q((ne=function(e){(0,v.Z)(y,e);var t,r,o,g=(0,m.Z)(y);function y(){var e;(0,h.Z)(this,y);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=g.call.apply(g,[this].concat(r)),(0,b.Z)((0,f.Z)(e),"store",(0,me.h)()),(0,b.Z)((0,f.Z)(e),"form",{account:"",nick:"",wechat:"",whatsapp:"",facebook:"",telegram:"",realName:"",birthday:"",zalo:"",line:"",twitter:""}),(0,b.Z)((0,f.Z)(e),"loading",!1),(0,d.Z)((0,f.Z)(e),"formModelRef",se,(0,f.Z)(e)),(0,d.Z)((0,f.Z)(e),"datePickRef",le,(0,f.Z)(e)),(0,b.Z)((0,f.Z)(e),"avatarList",[]),(0,b.Z)((0,f.Z)(e),"sex",i.MAN),(0,b.Z)((0,f.Z)(e),"url",""),(0,b.Z)((0,f.Z)(e),"visible",!1),e}return(0,p.Z)(y,[{key:"beforeRouteLeave",value:function(e,t,r){var i=this.$createElement,a=(0,ve.QT)().t;if(this.buttonDisable)r();else{var o=this.isWeb?550:600;ue.sG.Modal.create({width:be.ZP.px2rem(o),class:it,type:"confirm",icon:function(){return i("i")},titlePosition:"center",content:i("div",[a("lobby.center.setting.remark")]),title:i("span",[a("lobby.center.setting.goBackConfirm")]),onOk:function(){r()},onCancel:function(){r(!1)},cancelText:a("lobby.center.setting.cancel").toString(),okText:a("lobby.center.setting.ok").toString()})}}},{key:"userInfo",get:function(){return this.store.userInfos}},{key:"userDetails",get:function(){return this.store.vipInfos}},{key:"isOpenWechat",get:function(){var e;return(null===(e=this.store.systemInfos)||void 0===e?void 0:e.user_wechat_switch)===ce.OPEN}},{key:"isOpenTelegram",get:function(){var e;return(null===(e=this.store.systemInfos)||void 0===e?void 0:e.user_telegram_switch)===ce.OPEN}},{key:"isOenFacebook",get:function(){var e;return(null===(e=this.store.systemInfos)||void 0===e?void 0:e.user_facebook_switch)===ce.OPEN}},{key:"isOpenWhatsapp",get:function(){var e;return(null===(e=this.store.systemInfos)||void 0===e?void 0:e.user_whatsapp_switch)===ce.OPEN}},{key:"isOpenZalo",get:function(){var e;return(null===(e=this.store.systemInfos)||void 0===e?void 0:e.userZaloSwitch)===ce.OPEN}},{key:"isOpenLine",get:function(){var e;return(null===(e=this.store.systemInfos)||void 0===e?void 0:e.userLineSwitch)===ce.OPEN}},{key:"isOpenTwitter",get:function(){var e;return(null===(e=this.store.systemInfos)||void 0===e?void 0:e.userTwitterSwitch)===ce.OPEN}},{key:"isBindFacebook",get:function(){return this.store.validateConfig.thirdType===de.IH.FACEBOOK}},{key:"isSetBirthday",get:function(){var e;return"0"!==(null===(e=this.userDetails)||void 0===e?void 0:e.birthday)}},{key:"isWeb",get:function(){return(0,me.h)().isWeb}},{key:"updateForm",value:function(){var e,t,r=null!==(e=this.userDetails)&&void 0!==e?e:{},i=r.nickname,a=void 0===i?"":i,o=r.wechat,n=void 0===o?"":o,s=r.whatsapp,l=void 0===s?"":s,c=r.facebook,u=void 0===c?"":c,d=r.telegram,h=void 0===d?"":d,p=r.realname,f=void 0===p?"":p,v=r.username,m=void 0===v?"":v,b=r.zalo,g=void 0===b?"":b,y=r.line,k=void 0===y?"":y,Z=r.twitter,w=void 0===Z?"":Z;this.form.nick=a,this.form.wechat=n,this.form.birthday=this.isSetBirthday?null===(t=this.userDetails)||void 0===t?void 0:t.birthday:"",this.form.whatsapp=l,this.form.facebook=u,this.form.telegram=h,this.form.realName=f,this.form.account=m,this.form.zalo=g,this.form.line=k,this.form.twitter=w}},{key:"created",value:function(){this.updateForm()}},{key:"mounted",value:function(){var e=(0,me.h)(),t=e.rewardBindData,r=e.getRewardBindData,i=e.hasLogined;if((null==t||!t.length)&&i){var a={avatar:de.sF.SetAvatar+"",nickname:de.sF.FirstSetNicname+"",wechat:de.sF.BindWechat+"",whatsapp:de.sF.BindWhatsApp+"",facebook:de.sF.BindFacebook+"",telegram:de.sF.BindTelegram+"",birthday:de.sF.SetBirthDay+"",zalo:de.sF.BindZalo+"",line:de.sF.BindLine+"",twitter:de.sF.BindTwitter+""};r(!1,ct(a))}}},{key:"singleAvatarList",get:function(){var e=this;return this.avatarList.filter((function(t){return t.sex===e.sex}))}},{key:"renderAvatar",get:function(){var e,t,r,i=this.$createElement,a=(0,ve.QT)().t,o=this.isWeb?80:110;return i("div",{class:Ce},[i("div",{class:We},[a("lobby.center.setting.avatar")]),(null===(e=this.userInfo)||void 0===e?void 0:e.portrait_id)&&i("div",{class:Ee},[i("my-img",{attrs:{src:null===(t=this.userInfo)||void 0===t?void 0:t.portrait_id,width:o,height:o}}),(null===(r=(0,me.h)().vipInfos)||void 0===r?void 0:r.vip_status)==pe._.OPEN&&i("div",{class:$e},[i(Se.Z)]),i(w.L4,{attrs:{rewardId:lt.avatar,right:be.ZP.px2rem(-30)}})]),i("div",{class:Ge,on:{click:this.openAvatarModal}},[a("lobby.center.setting.setting")])])}},{key:"saveBtnStatus",get:function(){var e;return this.url===(null===(e=this.userInfo)||void 0===e?void 0:e.portrait_id)}},{key:"openAvatarModal",value:(o=(0,u.Z)((0,c.Z)().mark((function e(){var t,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.avatarList.length){e.next=6;break}return e.next=3,ue.Uh.post({url:"/user/avatars"});case 3:r=e.sent,this.avatarList=null!==(t=r.data.data)&&void 0!==t?t:[],this.avatarList.length>0&&(this.url=(null===(i=this.userInfo)||void 0===i?void 0:i.portrait_id)||this.avatarList[0].url);case 6:this.visible=!0;case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"renderAvatarListModal",get:function(){var e,t,r=this,a=this.$createElement,o=(0,ve.QT)().t,n=this.isWeb?80:100,s=this.isWeb?700:710;return a(Z.u_.Tsx,{attrs:{centered:!0,maskClosable:!1,footer:null,width:be.ZP.px2rem(s),title:a("span",{class:et},[o("lobby.center.setting.updateAvatar")])},class:Ve,model:{value:r.visible,callback:function(e){r.visible=e}}},[a("div",{class:Je},[a("div",{class:Ue},[a("div",{class:(e={},(0,b.Z)(e,je,!0),(0,b.Z)(e,He,this.sex===i.MAN),e),on:{click:function(){return r.sex=i.MAN}}},[a("span",{class:qe},[a("icon-sprite",{attrs:{sprite:Re()}})]),a("span",[o("lobby.center.setting.man")])]),a("div",{class:(t={},(0,b.Z)(t,je,!0),(0,b.Z)(t,He,this.sex===i.WOMAN),t),on:{click:function(){return r.sex=i.WOMAN}}},[a("span",[a("icon-sprite",{attrs:{sprite:st()}})]),a("span",[o("lobby.center.setting.woman")])])]),a("my-scroll",{attrs:{direction:"y"},class:rt},[a("ul",{class:Qe},[this.singleAvatarList.length>0?this.singleAvatarList.map((function(e){var t;return a("li",{class:(t={},(0,b.Z)(t,Ee,!0),(0,b.Z)(t,He,r.url===e.url),t),on:{click:function(){return r.url=e.url}}},[a("my-img",{attrs:{src:e.url,width:n,height:n}}),r.url===e.url&&a(Te.Z)])})):a("li",{class:Xe},[a(l.ZP,{attrs:{image:a(x.h,{attrs:{width:400,height:290}}),description:o("lobby.modal.noData")}})])])]),a("div",{class:Ke},[a(Z.zx.Tsx,{attrs:{type:"primary"},class:_e,on:{click:this.updateAvatar}},[o("lobby.center.setting.save")])])])])}},{key:"noChangeToast",value:function(){ue.sG.Modal.message({type:"error",content:this.$t("lobby.center.setting.noChangeToast")})}},{key:"updateAvatar",value:(r=(0,u.Z)((0,c.Z)().mark((function e(){var t,r,i,a,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.url!==(null===(t=this.userInfo)||void 0===t?void 0:t.portrait_id)){e.next=3;break}return this.visible=!1,e.abrupt("return");case 3:return e.next=5,(0,ot.Z)((n={url:this.url,sex:this.sex},ue.Uh.post({url:"/user/updateUserAvatars",data:n})));case 5:if(r=e.sent,i=(0,s.Z)(r,1),!(a=i[0])){e.next=11;break}return console.error("update avatar error:",a),e.abrupt("return");case 11:return o=(0,me.h)(),e.next=14,o.getRewardBindData(!1,[lt.avatar]);case 14:o.userInfos&&(o.userInfos.portrait_id=this.url),this.visible=!1,this.successToast();case 17:case"end":return e.stop()}var n}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"goBack",value:function(){this.$router.back()}},{key:"renderForm",get:function(){var e,t,r=this,i=this.$createElement,a=(0,ve.QT)().t,o=ue.sG.FuncRender.createFormModelItem.call(this);return i(Z.au.Tsx,n()([{ref:"formModelRef",attrs:{hideRequiredMark:!0}},{props:{model:this.form}}]),[i("div",{class:ze},[this.renderAvatar,i("p",{class:Me},[a("lobby.center.setting.account")]),o.custom({prop:"account",model:this.form,render:function(){return i(Z.II.Tsx,{class:[Fe,Be],attrs:{disabled:!0},model:{value:r.form.account,callback:function(e){r.$set(r.form,"account",e)}}})}}),i("p",{class:Me},["ID"]),i(Z.II.Tsx,{class:[Fe,Be],attrs:{disabled:!0,value:null===(e=this.userDetails)||void 0===e?void 0:e.useridx}}),this.isOpenWechat&&i("p",{class:Me},[a("lobby.center.setting.wechat")]),this.isOpenWechat&&o.custom({prop:"wechat",model:this.form,formModelItemTsxData:{props:{rules:[ue.sG.Rules.create({trigger:["blur"],validator:function(e,t,i){var o;return t===(null===(o=r.userDetails)||void 0===o?void 0:o.wechat)||(/^[a-zA-Z][a-zA-Z\d_-]{5,19}$/.test(t)?(i(),!0):(i(a("lobby.center.setting.error2").toString()),!1))}})]}},render:function(){return[i(Ae,{class:Fe,attrs:{placeholder:a("lobby.center.setting.wechatPlaceholder",{c:a("lobby.center.setting.wechat")}).toString()},model:{value:r.form.wechat,callback:function(e){r.$set(r.form,"wechat",e)}}}),i(w.L4,{attrs:{rewardId:lt.wechat,right:be.ZP.px2rem(-15),top:be.ZP.px2rem(-30)}})]}}),this.isOpenWhatsapp&&i("p",{class:Me},[a("lobby.center.setting.whatsapp")]),this.isOpenWhatsapp&&o.custom({prop:"whatsapp",model:this.form,formModelItemTsxData:{props:{rules:[ue.sG.Rules.create({trigger:["blur"],validator:function(e,t,i){var o;return t===(null===(o=r.userDetails)||void 0===o?void 0:o.whatsapp)||(/^\d{6,40}$/.test(t)?(i(),!0):(i(a("lobby.center.setting.error3").toString()),!1))}})]}},render:function(){return[i(Ae,{class:Fe,attrs:{placeholder:a("lobby.center.setting.whatsAppPlaceholder",{c:a("lobby.center.setting.whatsapp")}).toString()},model:{value:r.form.whatsapp,callback:function(e){r.$set(r.form,"whatsapp",e)}}}),i(w.L4,{attrs:{rewardId:lt.whatsapp,right:be.ZP.px2rem(-15),top:be.ZP.px2rem(-30)}})]}}),this.isOenFacebook&&i("p",{class:Me},[a("lobby.center.setting.facebook")]),this.isOenFacebook&&o.custom({prop:"facebook",model:this.form,formModelItemTsxData:{props:{rules:[ue.sG.Rules.create({trigger:["blur"],validator:function(e,t,i){var o;return t===(null===(o=r.userDetails)||void 0===o?void 0:o.facebook)||(t.length>60?(i(a("lobby.center.setting.error10").toString()),!1):/^[\w\d@._\-\\]{1,60}$/i.test(t)?(i(),!0):(i(a("lobby.center.setting.error9").toString()),!1))}})]}},render:function(){return[i(Ae,{class:Fe,attrs:{disabled:r.isBindFacebook,placeholder:a("lobby.center.setting.facebookPlaceholder",{c:a("lobby.center.setting.facebook")}).toString()},model:{value:r.form.facebook,callback:function(e){r.$set(r.form,"facebook",e)}}}),i(w.L4,{attrs:{rewardId:lt.facebook,right:be.ZP.px2rem(-15),top:be.ZP.px2rem(-30)}})]}}),this.isOpenTelegram&&i("p",{class:Me},[a("lobby.center.setting.telegram")]),this.isOpenTelegram&&o.custom({prop:"telegram",model:this.form,formModelItemTsxData:{props:{rules:[ue.sG.Rules.create({trigger:["blur"],validator:function(e,t,i){var o;return t===(null===(o=r.userDetails)||void 0===o?void 0:o.telegram)||(/^\w{5,40}$/.test(t)?(i(),!0):(i(a("lobby.center.setting.error6").toString()),!1))}})]}},render:function(){return[i(Ae,{class:Fe,attrs:{placeholder:a("lobby.center.setting.telegramPlaceholder",{c:a("lobby.center.setting.telegram")}).toString()},model:{value:r.form.telegram,callback:function(e){r.$set(r.form,"telegram",e)}}}),i(w.L4,{attrs:{rewardId:lt.telegram,right:be.ZP.px2rem(-15),top:be.ZP.px2rem(-30)}})]}}),this.isOpenZalo&&i("p",{class:Me},[a("lobby.center.setting.zalo")]),this.isOpenZalo&&o.custom({prop:"zalo",model:this.form,formModelItemTsxData:{props:{rules:[ue.sG.Rules.create({trigger:["blur"],validator:function(e,t,i){var o;return t===(null===(o=r.userDetails)||void 0===o?void 0:o.zalo)||(/^[A-Za-z0-9]{4,40}$/.test(t)?(i(),!0):(i(a("lobby.center.setting.error7").toString()),!1))}})]}},render:function(){return[i(Ae,{class:Fe,attrs:{placeholder:a("lobby.center.setting.zaloPlaceholder",{c:a("lobby.center.setting.zalo")}).toString(),maxLength:40},model:{value:r.form.zalo,callback:function(e){r.$set(r.form,"zalo",e)}}}),i(w.L4,{attrs:{rewardId:lt.zalo,right:be.ZP.px2rem(-15),top:be.ZP.px2rem(-30)}})]}}),this.isOpenLine&&i("p",{class:Me},[a("lobby.center.setting.line")]),this.isOpenLine&&o.custom({prop:"line",model:this.form,formModelItemTsxData:{props:{rules:[ue.sG.Rules.create({trigger:["blur"],validator:function(e,t,i){var o;return t===(null===(o=r.userDetails)||void 0===o?void 0:o.line)||(/^[A-Za-z0-9]{4,40}$/.test(t)?(i(),!0):(i(a("lobby.center.setting.error7").toString()),!1))}})]}},render:function(){return[i(Ae,{class:Fe,attrs:{placeholder:a("lobby.center.setting.linePlaceholder",{c:a("lobby.center.setting.line")}).toString(),maxLength:40},model:{value:r.form.line,callback:function(e){r.$set(r.form,"line",e)}}}),i(w.L4,{attrs:{rewardId:lt.line,right:be.ZP.px2rem(-15),top:be.ZP.px2rem(-30)}})]}}),this.isOpenTwitter&&i("p",{class:Me},[a("lobby.center.setting.twitter")]),this.isOpenTwitter&&o.custom({prop:"twitter",model:this.form,formModelItemTsxData:{props:{rules:[ue.sG.Rules.create({trigger:["blur"],validator:function(e,t,i){var o;return t===(null===(o=r.userDetails)||void 0===o?void 0:o.twitter)||(/^[A-Za-z0-9@\.]{4,40}$/.test(t)?(i(),!0):(i(a("lobby.center.setting.error8").toString()),!1))}})]}},render:function(){return[i(Ae,{class:Fe,attrs:{placeholder:a("lobby.center.setting.twitterPlaceholder").toString(),maxLength:40},model:{value:r.form.twitter,callback:function(e){r.$set(r.form,"twitter",e)}}}),i(w.L4,{attrs:{rewardId:lt.twitter,right:be.ZP.px2rem(-15),top:be.ZP.px2rem(-30)}})]}}),i("p",{class:Me},[a("lobby.center.setting.name")]),o.custom({prop:"realName",model:this.form,render:function(){return i(Ae,{class:[Fe,Be],attrs:{disabled:!0,mode:"last",keepLen:1,suffix:!r.form.realName&&i("a",{on:{click:r.handleGoToBind}},[a("lobby.center.setting.goBind")]),placeholder:a("lobby.center.setting.realNamePlaceholder").toString()},model:{value:r.form.realName,callback:function(e){r.$set(r.form,"realName",e)}}})}}),i("p",{class:Me},[a("lobby.center.setting.birthday")]),i("div",{style:"position: relative"},[i(De,{attrs:{layout:{left:"Year",right:"Day"},disable:this.isSetBirthday,defDate:null===(t=this.userDetails)||void 0===t?void 0:t.birthday},ref:"datePickRef",class:this.isWeb?at:"",model:{value:r.form.birthday,callback:function(e){r.$set(r.form,"birthday",e)}}}),i(w.L4,{attrs:{rewardId:lt.birthday,right:be.ZP.px2rem(-15),top:be.ZP.px2rem(-15)}})]),i("div",{class:[Ne]},[i(Z.zx.Tsx,{class:[Ye],on:{click:this.goBack}},[a("lobby.common.tips.return")]),i(Z.zx.Tsx,{class:[_e],attrs:{type:"primary"},on:{click:this.submit}},[a("lobby.center.setting.save")])])])])}},{key:"handleGoToBind",value:function(){this.$router.push({name:he.x4.WITHDRAW,query:{current:D.u.ACCOUNT.toString()}})}},{key:"buttonDisable",get:function(){var e,t,r,i,a,o,n,s;return!((null===(e=this.userDetails)||void 0===e?void 0:e.nickname)!==this.form.nick||(null===(t=this.userDetails)||void 0===t?void 0:t.wechat)!==this.form.wechat||(null===(r=this.userDetails)||void 0===r?void 0:r.whatsapp)!==this.form.whatsapp||(null===(i=this.userDetails)||void 0===i?void 0:i.facebook)!==this.form.facebook||(null===(a=this.userDetails)||void 0===a?void 0:a.telegram)!==this.form.telegram||(null===(o=this.userDetails)||void 0===o?void 0:o.zalo)!==this.form.zalo||(null===(n=this.userDetails)||void 0===n?void 0:n.line)!==this.form.line||(null===(s=this.userDetails)||void 0===s?void 0:s.twitter)!==this.form.twitter||this.form.birthday!==this.userDetails.birthday&&this.form.birthday)}},{key:"successToast",value:function(){ue.sG.Modal.message({type:"success",content:this.$t("lobby.center.setting.success")})}},{key:"submit",value:(t=(0,u.Z)((0,c.Z)().mark((function e(){var t,r,i,o=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.datePickRef.form.year||this.datePickRef.form.day||this.datePickRef.form.month)||this.isSetBirthday){e.next=3;break}return e.next=3,null===(i=this.datePickRef)||void 0===i?void 0:i.validateAllField();case 3:if(null===(t=this.datePickRef)||void 0===t||t.resetValidate(),!this.buttonDisable){e.next=7;break}return this.noChangeToast(),e.abrupt("return");case 7:null===(r=this.formModelRef)||void 0===r||r.validate(function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){var r,i,n,l,u,d,h,p,f,v,m,b,g,y,k,Z,w,x,D,I,P,O,A,T,S,L,R,z,M,F,B;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=24;break}return x={nickname:(null===(r=o.userDetails)||void 0===r?void 0:r.nickname)===o.form.nick?void 0:o.form.nick,wechat:(null===(i=o.userDetails)||void 0===i?void 0:i.wechat)===o.form.wechat?void 0:o.form.wechat,whatsapp:(null===(n=o.userDetails)||void 0===n?void 0:n.whatsapp)===o.form.whatsapp?void 0:o.form.whatsapp,facebook:(null===(l=o.userDetails)||void 0===l?void 0:l.facebook)===o.form.facebook?void 0:o.form.facebook,telegram:(null===(u=o.userDetails)||void 0===u?void 0:u.telegram)===o.form.telegram?void 0:o.form.telegram,zalo:(null===(d=o.userDetails)||void 0===d?void 0:d.zalo)===o.form.zalo?void 0:o.form.zalo,line:(null===(h=o.userDetails)||void 0===h?void 0:h.line)===o.form.line?void 0:o.form.line,twitter:(null===(p=o.userDetails)||void 0===p?void 0:p.twitter)===o.form.twitter?void 0:o.form.twitter,birthday:o.form.birthday!==(null===(f=o.userDetails)||void 0===f?void 0:f.birthday)&&o.form.birthday?Ie.Z.format(o.form.birthday,"YYYY-MM-DD"):void 0},o.loading=!0,e.next=5,(0,ot.Z)(fe(x));case 5:if(D=e.sent,I=(0,s.Z)(D,1),!(P=I[0])){e.next=12;break}return console.error("update user info error:",P),o.loading=!1,e.abrupt("return");case 12:return O=(0,me.h)(),e.next=15,O.updateUserVipInfos();case 15:return A=x.nickname,T=x.wechat,S=x.whatsapp,L=x.facebook,R=x.telegram,z=x.zalo,M=x.line,F=x.twitter,B=(0,a.Z)((0,a.Z)({},O.vipInfos),{},{nickname:A||(null===(v=O.vipInfos)||void 0===v?void 0:v.nickname),wechat:T||(null===(m=O.vipInfos)||void 0===m?void 0:m.wechat),whatsapp:S||(null===(b=O.vipInfos)||void 0===b?void 0:b.whatsapp),facebook:L||(null===(g=O.vipInfos)||void 0===g?void 0:g.facebook),telegram:R||(null===(y=O.vipInfos)||void 0===y?void 0:y.telegram),zalo:z||(null===(k=O.vipInfos)||void 0===k?void 0:k.zalo),line:M||(null===(Z=O.vipInfos)||void 0===Z?void 0:Z.line),twitter:F||(null===(w=O.vipInfos)||void 0===w?void 0:w.twitter)}),O.setUserVipInfosForm(B),e.next=20,O.updateUserVipDetail();case 20:return o.successToast(),e.next=23,O.getRewardBindData(!1,ct(x));case 23:o.loading=!1;case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=arguments[0],t=(0,ve.QT)(),r=t.t,i=r("lobby.header.menus.settings");return e("div",[e(w.tK,{attrs:{titleContent:i,showBack:!this.isWeb}},[this.renderForm,this.renderAvatarListModal]),e(w.gE,{class:tt,attrs:{spinning:this.loading}})])}}]),y}(y.XY),(0,g.Z)(ne.prototype,"updateForm",[X],Object.getOwnPropertyDescriptor(ne.prototype,"updateForm"),ne.prototype),se=(0,g.Z)(ne.prototype,"formModelRef",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,g.Z)(ne.prototype,"datePickRef",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,g.Z)(ne.prototype,"updateAvatar",[te,re],Object.getOwnPropertyDescriptor(ne.prototype,"updateAvatar"),ne.prototype),(0,g.Z)(ne.prototype,"submit",[ie,ae],Object.getOwnPropertyDescriptor(ne.prototype,"submit"),ne.prototype),oe=ne))||oe)}}]);