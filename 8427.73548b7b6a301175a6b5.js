(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[8427],{81542:function(e){e.exports={id:"img_label_def-2--sprite-usage",viewBox:"0 0 16.021 23",url:"/assets/sprite.c10e6e11446a81e9da57.svg#img_label_def-2--sprite",toString:function(){return this.url}}},76091:function(e,t,n){var a=n(76530).PROPER,i=n(47293),r=n(81361);e.exports=function(e){return i((function(){return!!r[e]()||"​᠎"!=="​᠎"[e]()||a&&r[e].name!==e}))}},73210:function(e,t,n){"use strict";var a=n(82109),i=n(53111).trim;a({target:"String",proto:!0,forced:n(76091)("trim")},{trim:function(){return i(this)}})},46702:function(e,t,n){"use strict";n.d(t,{IO:function(){return i},TL:function(){return o},is:function(){return r},vY:function(){return s}});var a=n(90825),i=function(e){return a.Uh.upload({url:"/customer/uploadFile",data:e,customParams:{noEncrypt:!0}}).then((function(e){return e.data.data}))},r=function(e){return a.Uh.post({url:"/customer/feedback",data:e}).then((function(e){return e.data.data}))},s=function(e){return a.Uh.post({url:"/customer/getUserFeedback",data:e}).then((function(e){return e.data.data}))},o=function(e){return a.Uh.post({url:"/customer/getAwardInfo",data:e}).then((function(e){return e.data.data}))}},25441:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var a,i,r,s,o,l,c,u=n(3587),d=n(21797),p=n(92317),f=n(82345),b=n(72283),h=n(20793),v=n(50125),g=n(17360),y=(n(41320),n(92222),n(30813)),m=n(81764),k="da4sKbE6RVc0DuXOBPgj",Z="e3jqGIp18KvkARiCkO9O",w=(a=(0,y.wA)({name:"PageChangeButton"}),i=(0,y.fI)({required:!0}),r=(0,y.fI)({required:!0}),a((o=function(e){(0,b.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;(0,d.Z)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),(0,u.Z)((0,f.Z)(e),"pageInfo",l,(0,f.Z)(e)),(0,u.Z)((0,f.Z)(e),"pageChangeHandler",c,(0,f.Z)(e)),e}return(0,p.Z)(n,[{key:"maxPage",get:function(){var e=this.pageInfo,t=e.total,n=e.pageSize;return Math.ceil(t/n)}},{key:"render",value:function(){var e=this,t=arguments[0],n=this.pageInfo.pageNo,a=(0,m.QT)(),i=a.t,r=n<=1,s=n>=this.maxPage;return t("div",{class:k},[t("span",{class:(0,v.Z)({},Z,r),on:{click:function(){!r&&e.pageChangeHandler(-1)}}},[i("lobby.common.pagination.prev")]),t("span",{class:(0,v.Z)({},Z,s),on:{click:function(){!s&&e.pageChangeHandler(1)}}},[i("lobby.common.pagination.next")])])}}]),n}(y.XY),l=(0,g.Z)(o.prototype,"pageInfo",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,g.Z)(o.prototype,"pageChangeHandler",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=o))||s)},50116:function(e,t,n){"use strict";n.d(t,{KX:function(){return x},x:function(){return T},ZP:function(){return Y}});var a,i,r,s,o,l,c,u,d,p,f,b,h,v,g,y,m,k,Z,w,x,T,E=n(70970),S=n(2813),I=n(3587),C=n(21797),L=n(92317),U=n(82345),P=n(72283),D=n(20793),F=n(50125),_=n(17360),z=(n(41320),n(92222),n(21249),n(74916),n(23123),n(26699),n(32023),n(68309),n(77601),n(69600),n(38880),n(30813)),A=n(81764),G="zvh3SCfANMQil4qoU_lN",W="dnYUUDV25IlSW_S8juP6",M="Eaw_t5ASDXk8DId5Ps3c",R="eogwD7Sfsv4SQ7MYxl2t",N="Ofx4l9bXUCQLvqyvbWOP",O="OqCSuVoUwFCb8_zfyIeP",X="pRNoweFo4ia8VfONCik4",B="MwzwPFwACsGuPEVYD_74";!function(e){e[e.SIZE_EXCEEDS=1]="SIZE_EXCEEDS",e[e.FILE_TYPE_EXCLUDE=2]="FILE_TYPE_EXCLUDE",e[e.FILE_NULL=3]="FILE_NULL"}(x||(x={})),function(e){e[e.ICON=0]="ICON",e[e.BUTTON=1]="BUTTON"}(T||(T={}));var H=["image/png","image/jpeg","image/jpg","image/gif"],K=5*Math.pow(2,20),Y=(a=(0,z.wA)({name:"ComUploadComp"}),i=(0,z.fI)({default:!1}),r=(0,z.fI)({default:!1}),s=(0,z.fI)({default:!1}),o=(0,z.fI)({default:function(){return T.ICON}}),l=(0,z.fI)({default:function(){return(0,A.QT)().t("lobby.common.upload.text")}}),c=(0,z.fI)({default:""}),u=(0,z.fI)(),d=(0,z.fI)({default:function(){return K}}),p=(0,z.y1)("change"),a((b=function(e){(0,P.Z)(a,e);var t,n=(0,D.Z)(a);function a(){var e;(0,C.Z)(this,a);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e=n.call.apply(n,[this].concat(i)),(0,I.Z)((0,U.Z)(e),"multiple",h,(0,U.Z)(e)),(0,I.Z)((0,U.Z)(e),"multimedia",v,(0,U.Z)(e)),(0,I.Z)((0,U.Z)(e),"btnCenter",g,(0,U.Z)(e)),(0,I.Z)((0,U.Z)(e),"uploadShape",y,(0,U.Z)(e)),(0,I.Z)((0,U.Z)(e),"text",m,(0,U.Z)(e)),(0,I.Z)((0,U.Z)(e),"previewUrl",k,(0,U.Z)(e)),(0,I.Z)((0,U.Z)(e),"supportTypeList",Z,(0,U.Z)(e)),(0,I.Z)((0,U.Z)(e),"imgLimit",w,(0,U.Z)(e)),(0,F.Z)((0,U.Z)(e),"fileType",""),e}return(0,L.Z)(a,[{key:"sizeLimit",get:function(){var e;return this.multimedia?50*Math.pow(2,20):null!==(e=this.imgLimit)&&void 0!==e?e:K}},{key:"typeList",get:function(){var e,t=null!==(e=this.supportTypeList)&&void 0!==e?e:H;return this.multimedia&&t.push("video/mp4"),t}},{key:"allowedExtensions",get:function(){return this.typeList.map((function(e){return"".concat(e.split("/")[1])}))}},{key:"handleChange",value:(t=(0,S.Z)((0,E.Z)().mark((function e(t){var n,a,i,r,s;return(0,E.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(n=t.target.files)&&void 0!==n?n:[],!((null!==(a=null==i?void 0:i.length)&&void 0!==a?a:0)<0)){e.next=3;break}return e.abrupt("return",{error:x.FILE_NULL});case 3:if(r=i[0],s=function(e){var t;return null!==(t=e.split(".").pop())&&void 0!==t?t:""},!(r.size>this.sizeLimit)){e.next=7;break}return e.abrupt("return",{error:x.SIZE_EXCEEDS});case 7:if(this.typeList.includes(r.type)&&this.allowedExtensions.includes(s(r.name))){e.next=9;break}return e.abrupt("return",{error:x.FILE_TYPE_EXCLUDE});case 9:return this.fileType=r.type,e.abrupt("return",{file:r});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"renderPreview",value:function(){var e=this.$createElement;return/image/g.test(this.previewUrl||"")||/image/g.test(this.fileType)?e("img",{class:R,attrs:{src:this.previewUrl}}):/video/g.test(this.previewUrl||"")||/video/g.test(this.fileType)?e("video",{class:R,attrs:{src:this.previewUrl}}):void 0}},{key:"render",value:function(){var e,t,n=arguments[0];switch(this.uploadShape){case T.ICON:return n("div",{class:B},[n("div",{class:G},[n("span",{class:W}),n("span",{class:M}),n("input",{attrs:{type:"file",multiple:this.multiple,accept:this.typeList.join(",")},class:X,on:{change:this.handleChange}})]),null===(e=this.$slots)||void 0===e?void 0:e.btnText]);case T.BUTTON:return n("div",{class:(0,F.Z)({},O,this.btnCenter)},[n("div",{class:G},[this.renderPreview()]),n("div",[null===(t=this.$slots)||void 0===t?void 0:t.btnText,n("div",{class:N},[n("span",[this.text]),n("input",{attrs:{type:"file",multiple:this.multiple,accept:this.typeList.join(",")},class:X,on:{change:this.handleChange}})])])]);default:return n("div")}}}]),a}(z.XY),h=(0,_.Z)(b.prototype,"multiple",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,_.Z)(b.prototype,"multimedia",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,_.Z)(b.prototype,"btnCenter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,_.Z)(b.prototype,"uploadShape",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,_.Z)(b.prototype,"text",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,_.Z)(b.prototype,"previewUrl",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,_.Z)(b.prototype,"supportTypeList",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,_.Z)(b.prototype,"imgLimit",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,_.Z)(b.prototype,"handleChange",[p],Object.getOwnPropertyDescriptor(b.prototype,"handleChange"),b.prototype),f=b))||f)},94899:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var a=n(90825),i=n(50116),r=n(81764),s=function(e){var t=(0,r.QT)().t;if(e)switch(e){case i.KX.FILE_NULL:a.sG.Modal.message({type:"warning",content:t("lobby.common.upload.error.fileNull")});break;case i.KX.FILE_TYPE_EXCLUDE:a.sG.Modal.message({type:"warning",content:t("lobby.common.upload.error.fileType")});break;case i.KX.SIZE_EXCEEDS:a.sG.Modal.message({type:"warning",content:t("lobby.common.upload.error.fileSize")})}}},58427:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Xe}});var a,i,r,s,o,l,c,u=n(13311),d=n.n(u),p=n(57557),f=n.n(p),b=n(3587),h=n(21797),v=n(92317),g=n(82345),y=n(72283),m=n(20793),k=n(50125),Z=n(17360),w=(n(41320),n(92222),n(21249),n(41539),n(30813)),x=n(90416),T=(0,n(40469).Q_)("feedback",{state:function(){return{isInnerDetail:!1}},getters:{},actions:{}}),E=n(81764),S=n(98292),I=n(7903),C=n(70970),L=n(74492),U=n(2813),P=(n(26699),n(32023),n(95306)),D=n(39730),F=n(90825),_=n(46702),z=n(71342),A=n(72563),G=n(71707),W=n(3507),M=n(25441),R=n(20941),N=n.n(R),O=n(81542),X=n.n(O),B="LPx7gxeud5oNtXTWww9w",H="VNEekU0NWrbU3AWlp4ox",K="_WohUldFapdCoVEcWYN0",Y="wTQ7_Lv6KTd9Assgk5v8",Q="YywTTjDLTrlcH8UgaU4V",V="AZxEyLBDaUcyuVaBFqLT",j="yOe9e5oaP8qfi8e1GO_y",q="RBMyKkkiPKbZYqdK4KAf",J="eWpIvvWooY9HHXe2jC2q",$="z1B3JdpjAMtnzvPczd2S",ee="eJaJc5E4WdkEoQRhgKqw",te="SZVtHCIidYKs69rqdp_q",ne="IpYTGJhu_b5xoQmGGU1Q",ae="wz0GrNDKGbYkIeGREyQp",ie="cvxTrlQqubngzjDHeBz_",re="KbwWi9YohPVu4sNZROOI",se="Bz1oaxkOed4wMtwyykZ_",oe="Kfard92KWibWW3Bi2SrT";!function(e){e[e.Pendding=0]="Pendding",e[e.CanReceive=1]="CanReceive",e[e.AlreadyReceive=2]="AlreadyReceive"}(l||(l={})),function(e){e[e.Pendding=0]="Pendding",e[e.Adopted=1]="Adopted",e[e.Ignored=-1]="Ignored",e[e.Deleted=-2]="Deleted"}(c||(c={}));var le,ce,ue,de,pe,fe,be,he,ve,ge,ye,me,ke,Ze=(a=(0,w.wA)({name:"MyFeedbaks"}),i=(0,w.Rl)(),a((s=function(e){(0,y.Z)(r,e);var t,n,a,i=(0,m.Z)(r);function r(){var e;(0,h.Z)(this,r);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=i.call.apply(i,[this].concat(n)),(0,b.Z)((0,g.Z)(e),"myFeedbaksContent",o,(0,g.Z)(e)),(0,k.Z)((0,g.Z)(e),"state",{condition:{page:0,pageSize:3},data:[],total:0,isFetching:!1}),(0,k.Z)((0,g.Z)(e),"detailData",{}),(0,k.Z)((0,g.Z)(e),"scrollLock",!1),(0,k.Z)((0,g.Z)(e),"beforeScroll",0),e}return(0,v.Z)(r,[{key:"isWeb",get:function(){return(0,S.h)().isWeb}},{key:"created",value:function(){this.setState({condition:{pageSize:this.isWeb?3:10}})}},{key:"query",value:(a=(0,U.Z)((0,C.Z)().mark((function e(){var t,n,a,i,r,s,o;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.condition,n=t.page,a=t.pageSize,i=this.state.data,this.setState({isFetching:!0}),r={page:n,pageSize:a},e.next=6,(0,_.vY)(r);case 6:s=e.sent,o=s.result||[],this.setState({data:this.isWeb?o:[].concat((0,L.Z)(i),(0,L.Z)(o)),total:s.count,isFetching:!1});case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"listRenderItem",value:function(){var e,t=this,n=this.$createElement,a=this.state.data,i=(0,E.QT)().t,r=(e={},(0,k.Z)(e,c.Pendding,i("lobby.feedback.pendding")),(0,k.Z)(e,c.Adopted,i("lobby.feedback.adopted")),(0,k.Z)(e,c.Ignored,i("lobby.feedback.ignored")),(0,k.Z)(e,c.Deleted,i("lobby.feedback.deleted")),e),s=null==a?void 0:a.map((function(e,a){return n("div",{class:K,key:a},[e.receiveStatus==l.CanReceive&&n("div",{class:ee},[n("span",[i("lobby.notice.winPrize")]),n("icon-sprite",{attrs:{sprite:X()}})]),n(P.X2.Tsx,{attrs:{type:"flex"}},[n(P.JX.Tsx,{class:Q},[i("lobby.feedback.feedbackID"),":",e.feedbackId])]),n(P.X2.Tsx,{attrs:{type:"flex",justify:"space-between"}},[n(P.JX.Tsx,{attrs:{span:t.isWeb?20:16},class:Y},[e.content]),n(P.JX.Tsx,{attrs:{span:t.isWeb?2:4},class:q,on:{click:function(){return t.openDetail(e)}}},[n("span",{class:e.status==c.Adopted?$:""},[r[e.status]]),n("icon-sprite",{class:J,attrs:{sprite:N()}})])]),n(P.X2.Tsx,{attrs:{type:"flex"}},[n("span",{class:V},[G.ZP.format(e.createTime)])])])}));return a.length>0?s:n(P.HY.Tsx,{class:j,attrs:{description:i("lobby.notice.empty"),image:n(D.x)}})}},{key:"openDetail",value:(n=(0,U.Z)((0,C.Z)().mark((function e(t){var n=this;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.receiveStatus!=l.Pendding){e.next=2;break}return e.abrupt("return",this.goToDetail(t));case 2:this.setState({isFetching:!0}),(0,_.TL)({feedback:t.feedbackId}).then((function(e){n.goToDetail((0,I.Z)((0,I.Z)({},t),e))})).finally((function(){n.setState({isFetching:!1})}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"goToDetail",value:function(e){this.detailData=e,T().isInnerDetail=!0}},{key:"renderDetail",value:function(){var e=this,t=this.$createElement,n=this.detailData,a=n.bonus,i=n.feedbackId,r=n.content,s=n.feebackContent,o=n.receiveBonusStatus,c=n.receiveStatus,u=n.fileLink,d=(0,E.QT)().t;return t("div",{class:te},[c!=l.Pendding&&t("div",{class:ne},[t("p",[d("lobby.notice.receviePrize"),t("span",{class:ae},[(0,A.o)(a)])]),t(P.zx.Tsx,{attrs:{type:"success",disabled:o==l.AlreadyReceive},on:{click:function(){return e.receiveAward(i)}}},[o==l.AlreadyReceive?d("lobby.modal.task.collected"):d("lobby.modal.task.collect")])]),t("div",{class:ie},[t("label",[d("lobby.feedback.feedbackContent")]),null!=u&&u.includes("mp4")?t("video",{attrs:{width:"400",controls:!0,src:u}}):t("img",{attrs:{src:u}}),t("p",{class:re},[r])]),s&&t("div",{class:[ie,se]},[t("label",[d("lobby.feedback.replyContent"),":"]),t("p",{class:re},[s])])])}},{key:"receiveAward",value:(t=(0,U.Z)((0,C.Z)().mark((function e(t){var n=this;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isFetching:!0}),(0,z.DJ)({feedback:t}).then((function(){n.detailData.receiveBonusStatus=l.AlreadyReceive,F.sG.Modal.message({type:"success",content:(0,E.QT)().t("lobby.notice.receivedSuccess")}),(0,(0,S.h)().updatePrize)()})).finally((function(){return n.setState({isFetching:!1})}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"bindMobileEventHandler",value:function(){var e=this;this.isWeb||this.$nextTick((function(){var t=e.myFeedbaksContent;e.scrollLock=!1;var n=function(t){var n=t.target,a=n.scrollHeight-n.clientHeight,i=n.scrollTop;!e.scrollLock&&e.beforeScroll<i&&i>=.95*a&&(e.onPageChange(1),e.scrollLock=!0,setTimeout((function(){e.scrollLock=!1}),200)),e.beforeScroll=i};null==t||t.removeEventListener("scroll",n),null==t||t.addEventListener("scroll",n)}))}},{key:"mounted",value:function(){this.bindMobileEventHandler(),this.onPageChange(1)}},{key:"onPageChange",value:function(e){this.setState({condition:{page:this.state.condition.page+e}}),this.query()}},{key:"render",value:function(){var e=arguments[0],t="calc(".concat(document.body.clientHeight,"px - 1.44rem - 0.43rem)"),n=(window.outerHeight,G.ZP.px2rem(584)),a=t;return e(W.Z,{attrs:{spinning:this.state.isFetching}},[e("div",{class:B},[e("div",{ref:"myFeedbaksContent",class:H,style:{height:this.isWeb?n:a}},[T().isInnerDetail?this.renderDetail():this.listRenderItem()])]),this.isWeb&&!T().isInnerDetail&&this.state.data.length>0&&e(M.Z,{class:oe,attrs:{pageInfo:{pageNo:this.state.condition.page,pageSize:this.state.condition.pageSize,total:this.state.total},pageChangeHandler:this.onPageChange}})])}}]),r}(w.XY),o=(0,Z.Z)(s.prototype,"myFeedbaksContent",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=s))||r),we=n(36568),xe=n.n(we),Te=n(82492),Ee=n.n(Te),Se=n(22705),Ie=(n(39714),n(78783),n(33948),n(60285),n(41637),n(73210),n(38880),n(14577)),Ce=n(94899),Le=n(50116),Ue="TJaHT8XPJ5UdTnNhoJix",Pe="G9PmB2qGtiG4oX_V7EWc",De="gtgcit9xM3zPL59EP_T6",Fe="FkaNsFMhTbHBhVNlr8pl",_e="yeWBiog1vpmlwv6xGRIj",ze="HQVUMbUSIVhgccGvMrtR",Ae="_0jk599GTsfgU6YdP4mb",Ge="cCmBNjkfye2zR4_36F5C",We="Rt8uf14CKzeAPATo1WIL",Me=n(41800),Re=(le=(0,w.wA)({name:"SendFeedback"}),ce=(0,w.Rl)(),ue=(0,Ie.WY)(),de=(0,Ie.K4)(1e3),le((fe=function(e){(0,y.Z)(i,e);var t,n,a=(0,m.Z)(i);function i(){var e;(0,h.Z)(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=a.call.apply(a,[this].concat(n)),(0,b.Z)((0,g.Z)(e),"formModel",be,(0,g.Z)(e)),(0,k.Z)((0,g.Z)(e),"state",{loading:!1,file:null,previewUrl:"",loadGeetest:!1,form:{content:"",source:"web大厅",geetest:void 0}}),(0,k.Z)((0,g.Z)(e),"geetestHasValid",!1),e}return(0,v.Z)(i,[{key:"openGeetest",value:(n=(0,U.Z)((0,C.Z)().mark((function e(){var t,n,a,i=this;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.geetestHasValid&&!this.state.loadGeetest){e.next=3;break}return e.abrupt("return");case 3:return this.setState({loadGeetest:!0}),t=(0,S.h)(),n=t.systemInfos,e.next=7,F.sG.User.initGeetest({geetestConfig:{captchaId:(null==n?void 0:n.geetest_captcha_id.feedback)||"",nextWidth:"100%"}}).finally((function(){i.setState({loadGeetest:!1})}));case 7:(a=e.sent).onSuccess((function(){var e,t,n=a.getValidate();F.sG.User.validateGeetest((0,I.Z)({account:null!==(e=null===(t=(0,S.h)().userInfos)||void 0===t?void 0:t.username.toString())&&void 0!==e?e:""},n)).then((function(){i.geetestHasValid=!0,i.onSubmit()})).catch((function(){i.geetestHasValid=!1}))})).onError((function(){null==a||a.reset()})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.closeGeetest(),this.openGeetest();case 15:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return n.apply(this,arguments)})},{key:"closeGeetest",value:function(){this.geetestHasValid=!1}},{key:"handleUpload",value:function(e){var t=e.file,n=e.error;if(n)return(0,Ce.y)(n),void this.setState({file:null});this.setState({file:t});var a=URL.createObjectURL(t);this.setState({previewUrl:null!=a?a:""})}},{key:"onSubmit",value:(t=(0,U.Z)((0,C.Z)().mark((function e(){var t,n,a,i,r,s,o,l,c,u,d,p,f,b=this;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,E.QT)(),n=t.t,a=this.state,i=a.loading,r=a.form,s=a.file,!i){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.formModel.validate();case 7:if(r.content.trim()){e.next=10;break}return F.sG.Modal.message({type:"warning",content:n("lobby.feedback.feedbackContentMessage")}),e.abrupt("return");case 10:if(this.geetestHasValid){e.next=13;break}return this.openGeetest(),e.abrupt("return");case 13:if(this.setState({loading:!0}),o=function(){var e=(0,U.Z)((0,C.Z)().mark((function e(t){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.is)(t).finally((function(){b.setState({loading:!1}),b.closeGeetest()})).catch((function(){b.closeGeetest()}));case 2:b.$reset(),F.sG.Modal.message({type:"success",content:n("lobby.feedback.feedbackTips")});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!s){e.next=27;break}return(l=new FormData).append("uploadfile",s),e.next=20,(0,Me.Z)((0,_.IO)(l));case 20:c=e.sent,u=(0,Se.Z)(c,2),d=u[0],(p=u[1])?(f=Ee()({},r,{fileLink:null==p?void 0:p.fileLink}),o(f)):(this.setState({loading:!1}),console.error(d)),e.next=28;break;case 27:o(r);case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(4),this.setState({loading:!1});case 33:case"end":return e.stop()}}),e,this,[[4,30]])}))),function(){return t.apply(this,arguments)})},{key:"renderUpload",get:function(){var e=this.$createElement,t=(0,E.QT)().t,n=this.state.previewUrl,a={uploadShape:n?Le.x.BUTTON:Le.x.ICON,previewUrl:n,text:t("lobby.finance.withdraw.add.retry").toString()};return[e("div",{class:[Pe]},[e("label",[t("lobby.feedback.feedbackUpload"),e("span",[t("lobby.feedback.feedbackUploadSubtitle")])]),e(Le.ZP,xe()([{class:De,on:{change:this.handleUpload},attrs:{multiple:!0,multimedia:!0}},{attrs:a}])),e("span",{class:[Fe]},[t("lobby.feedback.feedbackUploadPlaceholder")])])]}},{key:"renderContent",get:function(){var e=this,t=this.$createElement,n=(0,E.QT)().t,a=this.state.form;return[t("div",{class:Ge},[t("label",[n("lobby.feedback.feedbackContent"),t("span",[n("lobby.feedback.feedbackSubtitle")])]),t(P.II.TextArea.Tsx,{attrs:{type:"textarea",maxLength:200,rows:5,placeholder:n("lobby.feedback.feedbackPlaceholder")},model:{value:a.content,callback:function(t){e.$set(a,"content",t)}}})])]}},{key:"render",value:function(){var e=this,t=arguments[0],n=(0,E.QT)(),a=n.t,i="calc(".concat(document.body.clientHeight,"px - 1.44rem - 0.2rem)"),r=F.sG.FuncRender.createFormModelItem.call(this),s=this.state,o=s.form,l=s.loading,c=s.loadGeetest;return t(x.gE,[t("div",{class:Ue,style:{height:(0,S.h)().isWeb?"auto":i}},[t(P.au.Tsx,xe()([{ref:"formModel",attrs:{layout:"horizontal",hideRequiredMark:!0,colon:!0}},{props:{model:o}}]),[[r.custom({prop:"content",model:o,render:function(){return e.renderContent}}),t("div",{class:We},[o.content.length,"/200"]),r.custom({prop:"source",model:o,render:function(){return e.renderUpload}})]]),t("div",{class:_e},[t("label",[a("lobby.feedback.feedbackRuleTitle")]),t("div",{class:ze},[a("lobby.feedback.feedbackRule")])]),t(P.X2.Tsx,{class:Ae},[t(P.zx.Tsx,{attrs:{type:"primary",loading:l||c},on:{click:this.onSubmit}},[!l&&!c&&a("lobby.feedback.submit")])])])])}}]),i}(w.XY),be=(0,Z.Z)(fe.prototype,"formModel",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,Z.Z)(fe.prototype,"onSubmit",[ue,de],Object.getOwnPropertyDescriptor(fe.prototype,"onSubmit"),fe.prototype),pe=fe))||pe),Ne="KkVlWOiFFgeMfOlRQ6Ta",Oe="mfkhM5QRlhd_SEK4MtdL";!function(e){e.FEEDBACK="0",e.MY_FEEDBACKS="1"}(ke||(ke={}));var Xe=(he=(0,w.wA)({name:"Feedback"}),ve=(0,w.Rl)(),he((ye=function(e){(0,y.Z)(n,e);var t=(0,m.Z)(n);function n(){var e;(0,h.Z)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),(0,b.Z)((0,g.Z)(e),"myFeedbaks",me,(0,g.Z)(e)),(0,k.Z)((0,g.Z)(e),"state",{activeKey:ke.FEEDBACK}),e}return(0,v.Z)(n,[{key:"tabs",get:function(){var e=this.$createElement,t=(0,E.QT)().t;return[{label:t("lobby.header.menus.feedback"),value:ke.FEEDBACK,component:e(Re)},{label:t("lobby.feedback.mineFeedback"),value:ke.MY_FEEDBACKS,component:e(Ze)}]}},{key:"isWeb",get:function(){return(0,S.h)().isWeb}},{key:"isInnerDetail",get:function(){return T().isInnerDetail}},{key:"goBack",value:function(){T().isInnerDetail=!1}},{key:"render",value:function(){var e=this,t=arguments[0],n=(0,E.QT)(),a=n.t,i=a("lobby.header.menus.feedback"),r=this.state.activeKey,s=!this.isWeb||this.isInnerDetail,o=this.isWeb?40:72;return t("div",{class:Ne},[t("my-title",{attrs:{showBack:s,title:i,goBack:this.isInnerDetail?this.goBack:void 0}}),t(x.EH,{class:Oe,attrs:{renderList:this.tabs.map((function(e){return f()(e,["component"])})),itemHeight:o,itemListWrapperClassName:"feedbaksTab",preTriggerHook:function(){return e.goBack(),Promise.resolve()}},scopedSlots:{default:function(){var t;return null!==(t=d()(e.tabs,{value:r}).component)&&void 0!==t?t:null}},model:{value:e.state.activeKey,callback:function(t){e.state.activeKey=t}}})])}}]),n}(w.XY),me=(0,Z.Z)(ye.prototype,"myFeedbaks",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=ye))||ge)}}]);