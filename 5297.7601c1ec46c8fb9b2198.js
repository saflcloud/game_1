(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[5297,6407],{34360:function(e){e.exports={id:"icon_dl_yqm--sprite-usage",viewBox:"0 0 25.003 18.259",url:"/assets/sprite.c10e6e11446a81e9da57.svg#icon_dl_yqm--sprite",toString:function(){return this.url}}},11169:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Me}});var i,n,o,a,s,l,u,c,d,m,f,h,p,g,y,v,b,C,I,T=r(36568),k=r.n(T),P=r(27361),Z=r.n(P),x=r(50308),E=r.n(x),w=r(82492),S=r.n(w),R=r(57557),A=r.n(R),N=r(78718),O=r.n(N),M=r(7903),_=r(70970),F=r(2813),D=r(3587),G=r(21797),U=r(92317),W=r(82345),V=r(72283),L=r(20793),q=r(50125),B=r(17360),j=(r(41320),r(92222),r(69826),r(41539),r(73210),r(74916),r(23123),r(69600),r(21249),r(15306),r(38880),r(14577)),Q=r(95306),z=r(90416),$=r(33990),J=r(30813),K=/[`~!@#$%^&*()_<>?:"{}|,.\/;'\\[\]~！￥……•​（）——\-+={}|《》？：“”〝〞ˆˇ"【】、；‘’，。、﹍﹎︵︷︿︹︽_﹁﹃︻︶︸﹀︺︾ˉ﹂﹄︼¡¿﹏﹋﹌︴｛「｛｝］［​]/g,H=/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/g,Y={"Á":"A","À":"A","Ạ":"A","Ả":"A","Ã":"A","Ă":"A","Ắ":"A","Ằ":"A","Ặ":"A","Ẳ":"A","Ẵ":"A","Â":"A","Ấ":"A","Ầ":"A","Ậ":"A","Ẩ":"A","Ẫ":"A","á":"A","à":"A","ạ":"A","ả":"A","ã":"A","ă":"A","ắ":"A","ằ":"A","ặ":"A","ẳ":"A","ẵ":"A","â":"A","ấ":"A","ầ":"A","ậ":"A","ẩ":"A","ẫ":"A","Đ":"D","đ":"D","É":"E","È":"E","Ẹ":"E","Ẻ":"E","Ẽ":"E","Ê":"E","Ế":"E","Ề":"E","Ệ":"E","Ể":"E","Ễ":"E","é":"E","è":"E","ẹ":"E","ẻ":"E","ẽ":"E","ê":"E","ế":"E","ề":"E","ệ":"E","ể":"E","ễ":"E","Í":"I","Ì":"I","Ị":"I","Ỉ":"I","Ĩ":"I","í":"I","ì":"I","ị":"I","ỉ":"I","ĩ":"I","Ó":"O","Ò":"O","Ọ":"O","Ỏ":"O","Õ":"O","Ô":"O","Ố":"O","Ồ":"O","Ộ":"O","Ổ":"O","Ỗ":"O","Ơ":"O","Ớ":"O","Ờ":"O","Ợ":"O","Ở":"O","Ỡ":"O","ó":"O","ò":"O","ọ":"O","ỏ":"O","õ":"O","ô":"O","ố":"O","ồ":"O","ộ":"O","ổ":"O","ỗ":"O","ơ":"O","ớ":"O","ờ":"O","ợ":"O","ở":"O","ỡ":"O","Ú":"U","Ù":"U","Ụ":"U","Ủ":"U","Ũ":"U","Ư":"U","Ứ":"U","Ừ":"U","Ự":"U","Ử":"U","Ữ":"U","ú":"U","ù":"U","ụ":"U","ủ":"U","ũ":"U","ư":"U","ứ":"U","ừ":"U","ự":"U","ử":"U","ữ":"U"},X=r(12322),ee=r(90825),te=r(50925),re=r(76937),ie=r(81830),ne=r(97980),oe=r(71707),ae=r(93162),se=r(81764),le=r(98292),ue=r(5836),ce=r(84418),de=r(59700),me=r(37694),fe=r(29306),he=r.n(fe),pe=r(34360),ge=r.n(pe),ye=r(35350),ve="RoVJIjnk23g9PERC9ilA",be="PY2n4SHlquio8KwXvU0A",Ce="bVlL3TjKYg9vQdJc_YC1",Ie="KTFzJfDqcMI9pM3n76fj",Te="_AA13Qn8Neka3IpiUeUk",ke="x040DJaQPOYZRZO6fzJL",Pe="vOtMSWsbyTb0MdlU6dIN",Ze="jPaPe_INPO8vC2vapgys",xe="dFCD3WuP3DWpSeYMWoi2",Ee="QXqaaH1rTePVg2LxE5Tz",we="pCoynoKDfcVVN7yoIECy",Se="DwnoOQFZAMTIDwOHKSAL",Re="l3cIGQddeaSNwIM0cUWN",Ae="Cmqm0cBwYV9a5_Niv2Jk",Ne="T_GCJrrzamaqyrEQTseL",Oe="LBtEEJN8mOrCxqKJnWfK",Me=(i=(0,J.wA)({name:"RegisterModal"}),n=(0,J.Rl)(),o=(0,J.Rl)(),a=(0,J.Rl)(),s=(0,J.Rl)(),l=(0,J.RL)("recommendAreaCode"),u=(0,j.WY)(),c=(0,j.K4)(),d=(0,j.WY)(),m=(0,j.K4)(),f=(0,J.RL)("registerConfig"),h=(0,j.WY)(),p=(0,j.K4)(),i((y=function(e){(0,V.Z)(m,e);var t,r,i,n,o,a,s,l,u,c,d=(0,L.Z)(m);function m(){var e;(0,G.Z)(this,m);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=d.call.apply(d,[this].concat(r)),(0,D.Z)((0,W.Z)(e),"formModel",v,(0,W.Z)(e)),(0,D.Z)((0,W.Z)(e),"smsVerificationRef",b,(0,W.Z)(e)),(0,D.Z)((0,W.Z)(e),"mobilePhoneNumberRef",C,(0,W.Z)(e)),(0,D.Z)((0,W.Z)(e),"imgVerificationRef",I,(0,W.Z)(e)),(0,q.Z)((0,W.Z)(e),"loading",!1),(0,q.Z)((0,W.Z)(e),"saveLoading",!1),(0,q.Z)((0,W.Z)(e),"activeKey","normal"),(0,q.Z)((0,W.Z)(e),"form",{platformId:"",passwd:"",passwdConfirm:"",verificationCode:"",inviter_code:"",mobilePhoneNumber:"",currency:"",realName:"",email:"",emailCode:""}),(0,q.Z)((0,W.Z)(e),"currentPhoneNumberSegment",""),(0,q.Z)((0,W.Z)(e),"rules",{}),(0,q.Z)((0,W.Z)(e),"agreed",!0),(0,q.Z)((0,W.Z)(e),"openOptions",null),(0,q.Z)((0,W.Z)(e),"isAgreementFetching",!1),(0,q.Z)((0,W.Z)(e),"agreementHtmlContent",""),(0,q.Z)((0,W.Z)(e),"usernameValidateStatus",null),e}return(0,U.Z)(m,[{key:"tabsData",get:function(){var e=(0,se.QT)().t;return[{key:"normal",tab:this.isThirdWayBindMode?e("lobby.modal.register.thirdLabel"):e("lobby.modal.register.label"),renderContent:this.renderNormal}]}},{key:"isThirdWayBindMode",get:function(){var e;return"thirdWay"===(null===(e=this.openOptions)||void 0===e?void 0:e.mode)}},{key:"registerConfig",get:function(){var e=(0,le.h)(),t=e.systemInfos,r=e.siteInfos,i=e.ipBindInfos,n=e.countryInfos,o=e.defaultCountry,a=t||{},s=a.enable_using_sms,l=a.register_validate_mode,u=a.inviter_code_switch,c=a.inviter_code_required,d=a.inviter_code_update,m=a.register_phone_switch,f=a.emailRequired,h=a.emailSwitch,p=a.realNameMustUppercase,g=a.realNameRequired,y=a.realNameSwitch,v=a.registerQuickEntrySms,b=a.registerQuickEntryFree,C=a.registerQuickEntryInstant;return{validateWithGeetest:100===l,validateWithImgVerificationCode:4===l,validateWithSmSVerificationCode:2===l,validateWithNothing:1===l,showPhoneFormItem:1===m,showInviterCodeFormItem:1===u,isInviterCodeRequired:1===c,isInviterCodeReadonly:1===d&&(null==i?void 0:i.promoterUserName),isEmailRequired:f===$.Et.YES,showEmailFormItem:h===$.D7.OPEN,isRealNameRequired:g===$.Et.YES,isRealNameUpperCase:p===$.Et.YES,showRealNameFormItem:y===$.D7.OPEN,countryInfos:n,defaultCountry:o,currencyInfos:(null==r?void 0:r.currencyInfos)||[],defaultCurrency:null==r?void 0:r.currencyCode,modifyPromoteCurrency:null==t?void 0:t.modifyPromoteCurrency,showSMSLogin:s===$.AI.OPEN&&v===$.AI.OPEN,showTryItFree:b===$.AI.OPEN,showLoginNow:C===$.AI.OPEN}}},{key:"recommendAreaCode",get:function(){var e=(0,le.h)().systemInfos;return null==e?void 0:e.recommendAreaCode}},{key:"onRecommendAreaCode",value:function(){this.tryInitCurrentPhoneNumberSegment()}},{key:"tryToGetImgVerificationCode",value:function(){this.registerConfig.validateWithImgVerificationCode&&this.imgVerificationRef.getVerificationCode()}},{key:"tryInitCurrentPhoneNumberSegment",value:function(){var e,t,r,i,n=this,o=null===(e=this.registerConfig)||void 0===e||null===(t=e.countryInfos)||void 0===t?void 0:t.find((function(e){return(null==e?void 0:e.phoneNumberSegment)===n.recommendAreaCode}));this.currentPhoneNumberSegment=o?o.phoneNumberSegment:(null===(r=this.registerConfig)||void 0===r||null===(i=r.defaultCountry)||void 0===i?void 0:i.phoneNumberSegment)||""}},{key:"openByThirdWayHack",value:function(e){"thirdWay"===(null==e?void 0:e.mode)&&(this.openOptions=e,this.form.platformId=e.platformId,this.form.passwd=e.passwd,this.form.passwdConfirm=e.passwd)}},{key:"initDefaultCurrency",value:function(){var e,t,r,i,n=(0,le.h)(),o=n.systemInfos,a=n.ipBindInfos,s="";if(null!=a&&a.currency&&(s=a.currency),!s&&null!==(e=this.agentPayload)&&void 0!==e&&e.currency&&(s=this.agentPayload.currency),!s&&null!=o&&o.recommendCurrency&&(s=o.recommendCurrency),s){var l,u,c=null===(l=this.registerConfig)||void 0===l||null===(u=l.currencyInfos)||void 0===u?void 0:u.find((function(e){return(null==e?void 0:e.currencyCode)===s}));c&&(this.form.currency=c.currencyCode)}1===(null===(t=this.registerConfig)||void 0===t||null===(r=t.currencyInfos)||void 0===r?void 0:r.length)&&(this.form.currency=null===(i=this.registerConfig.currencyInfos[0])||void 0===i?void 0:i.currencyCode)}},{key:"open",value:(c=(0,F.Z)((0,_.Z)().mark((function e(t){var r,i,n=this;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,le.h)(),i=r.ipBindInfos,this.form.inviter_code=(null==i?void 0:i.promoterUserName)||"",null!=t&&t.onRegisterSuccess&&(this.openOptions=t),this.openByThirdWayHack(t),this.initDefaultCurrency(),e.next=7,me.Z.initSmsCountry();case 7:ee.sG.User.updateSysinfoToken(),this.baseOpen(),this.$nextTick((function(){n.tryToGetImgVerificationCode(),n.tryInitCurrentPhoneNumberSegment()}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"toLogin",value:(u=(0,F.Z)((0,_.Z)().mark((function e(){var t,r,i;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,le.h)(),r=t.enterPagePopupType,i=t.$patch,2===r&&i({enterPagePopupType:1}),e.next=4,this.close();case 4:ee.sG.Modal.open("loginModal");case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"toSMSLogin",value:(l=(0,F.Z)((0,_.Z)().mark((function e(){var t,r,i;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,le.h)(),r=t.enterPagePopupType,i=t.$patch,2===r&&i({enterPagePopupType:1}),e.next=4,this.close();case 4:ee.sG.Modal.open("loginModal",{loginType:te.LoginType.SMS});case 5:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"checkusername",value:(s=(0,F.Z)((0,_.Z)().mark((function e(t){var r,i,n;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.usernameValidateStatus="validating",e.next=3,(0,ie.apiCheckUsername)({username:t});case 3:return i=e.sent,n=null===(r=i.data.data)||void 0===r?void 0:r.available,this.usernameValidateStatus=n?"available":"existed",void 0===n&&(this.usernameValidateStatus=null),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"openUserAgreementModal",value:(a=(0,F.Z)((0,_.Z)().mark((function e(){var t,r,i,n,o,a=this;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.$createElement,i=(0,se.QT)(),n=i.t,this.agreementHtmlContent="",ee.sG.Modal.create({class:Te,okText:n("lobby.modal.register.readed"),cancelButtonProps:{style:{display:"none"}},closable:!0,content:function(){return r("div",{class:ke},[r(z.gE,{attrs:{spinning:a.isAgreementFetching}},[r("my-scroll",[r("my-adapter",{class:Pe,attrs:{html:a.agreementHtmlContent,mode:"innerHTML"}})])])])}}),this.isAgreementFetching=!0,e.next=7,(0,ie.apiGetUserAgreementInfos)().finally((function(){a.isAgreementFetching=!1}));case 7:o=e.sent,this.agreementHtmlContent=(null===(t=o.data.data)||void 0===t?void 0:t.content)||"";case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"doRegisterValidate",value:(o=(0,F.Z)((0,_.Z)().mark((function e(t){var r,i,n,o,a,s,l,u,c,d,m=arguments;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:{},i=r.code,n=r.geetCaptchaId,o=ee.CM.ServiceCode,a=i===o.FORCE_GEETEST,!this.smsVerificationRef){e.next=6;break}return e.next=6,this.smsVerificationRef.valid();case 6:if(i){e.next=8;break}return e.abrupt("return");case 8:if(!a&&!n){e.next=22;break}if(!ee.sG.User.checkGeetestRestricted()){e.next=11;break}return e.abrupt("return",Promise.reject());case 11:return s=(0,le.h)(),l=s.systemInfos,u=n||(a?null==l?void 0:l.geetest_captcha_id.force_geetest:null==l?void 0:l.geetest_captcha_id.register)||"",e.next=15,ee.sG.User.initGeetest({geetestConfig:{captchaId:u}});case 15:return c=e.sent,e.next=18,new Promise((function(e,t){null==c||c.onSuccess((function(){e(c.getValidate())})).onClose((function(){c.destroy(),t()})).onError((function(){ee.sG.Modal.message({type:"error",content:function(){return"init geetest error"}}),c.destroy(),t()}))}));case 18:if(!(d=e.sent)){e.next=22;break}return e.next=22,ee.sG.User.validateGeetest((0,M.Z)({account:t.platformId},d));case 22:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"doThirdWayRegisterValidate",value:(n=(0,F.Z)((0,_.Z)().mark((function e(t){var r,i,n,o,a,s,l=arguments;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},i=r.forceGeetest,!this.registerConfig.validateWithNothing||i){e.next=3;break}return e.abrupt("return");case 3:if(!this.registerConfig.validateWithGeetest&&!i){e.next=16;break}if(!ee.sG.User.checkGeetestRestricted()){e.next=6;break}return e.abrupt("return",Promise.reject());case 6:return n=(0,le.h)(),o=n.systemInfos,e.next=9,ee.sG.User.initGeetest({geetestConfig:{captchaId:(i?null==o?void 0:o.geetest_captcha_id.force_geetest:null==o?void 0:o.geetest_captcha_id.register)||""}});case 9:return a=e.sent,e.next=12,new Promise((function(e,t){null==a||a.onSuccess((function(){e(a.getValidate())})).onClose((function(){a.destroy(),t()})).onError((function(){a.destroy(),t()}))}));case 12:if(!(s=e.sent)){e.next=16;break}return e.next=16,ee.sG.User.validateGeetest((0,M.Z)({account:t.platformId},s));case 16:if(!this.registerConfig.validateWithSmSVerificationCode){e.next=19;break}return e.next=19,this.smsVerificationRef.valid();case 19:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"phoneNumberFormat",get:function(){var e=this;if(!this.form.mobilePhoneNumber)return"";var t=this.registerConfig.countryInfos.find((function(t){return t.phoneNumberSegment===e.currentPhoneNumberSegment}));return"".concat((null==t?void 0:t.phoneNumberSegment)||"","-").concat(this.form.mobilePhoneNumber)}},{key:"agentPayload",get:function(){return O()(this.$route.query,["cid","id","chtpf","chtjid","currency"])}},{key:"registerPayloadFormat",value:function(e){var t,r,i=A()(e,["passwdConfirm"]);return i.verificationCode||(i.verificationCode="0000"),this.registerConfig.showPhoneFormItem&&(i.mobilePhoneNumber=this.phoneNumberFormat),this.agentPayload.cid?S()(i,{agent_type:1,agent_code:this.agentPayload.cid}):this.agentPayload.id&&S()(i,{agent_type:2,agent_code:this.agentPayload.id}),null!==(t=this.agentPayload)&&void 0!==t&&t.chtjid&&null!==(r=this.agentPayload)&&void 0!==r&&r.chtpf&&S()(i,{chtpf:this.agentPayload.chtpf,chtjid:this.agentPayload.chtjid}),i}},{key:"doRegister",value:(i=(0,F.Z)((0,_.Z)().mark((function e(){var t,r,i,n,o,a,s=arguments;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.code,i=t.geetCaptchaId,n=t.forceGeetest,this.smsVerificationRef||this.imgVerificationRef||(this.form.verificationCode=""),this.mobilePhoneNumberRef||(this.form.mobilePhoneNumber=""),!this.isThirdWayBindMode||!this.openOptions){e.next=9;break}return e.next=6,this.doThirdWayRegisterValidate(this.form,{forceGeetest:n});case 6:return e.abrupt("return",ee.sG.User.thirdWayRegister({platformId:this.form.platformId,passwd:this.form.passwd,access_token:this.openOptions.access_token,requester_type:this.openOptions.requester_type,verificationCode:this.form.verificationCode||"0000",inviter_code:this.form.inviter_code,mobilePhoneNumber:this.phoneNumberFormat,currency:this.form.currency,chtpf:(null===(o=this.agentPayload)||void 0===o?void 0:o.chtpf)||"",chtjid:(null===(a=this.agentPayload)||void 0===a?void 0:a.chtjid)||"",realName:this.form.realName}));case 9:return e.next=11,this.doRegisterValidate(this.form,{code:r,geetCaptchaId:i});case 11:return e.abrupt("return",ee.sG.User.register(this.registerPayloadFormat(this.form)));case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"onSaveImg",value:function(){var e=this,t=(0,se.QT)().t;if(!this.saveLoading){this.saveLoading=!0;var r=document.querySelector(".register-modal .ant-modal"),i="".concat(this.form.platformId,"_").concat(ce.Z.format(new Date,"MMDD"),"_").concat(t("lobby.modal.register.label"));he().toPng(r,{cacheBust:!0,quality:.8}).then((function(e){if((0,ne.Q)().ios())(0,ae.saveAs)(e,"".concat(i,".png"));else{var r=document.createElement("a");r.href=e,r.download="".concat(i,".png"),document.body.appendChild(r),r.click(),ee.sG.Modal.message({type:"success",content:t("lobby.promote.promote.downloadSuccessTips")})}})).finally((function(){return e.saveLoading=!1}))}}},{key:"isBtnDisabled",get:function(){return!this.isThirdWayBindMode&&!this.agreed}},{key:"doSubmit",value:(r=(0,F.Z)((0,_.Z)().mark((function e(){var t,r,i,n,o,a,s,l,u,c,d,m,f,h,p,g=this,y=arguments;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:{},r=t.code,i=t.geetCaptchaId,n=t.forceGeetest,!this.loading){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,s=(0,se.QT)(),l=s.t,e.next=7,this.formModel.validate();case 7:if(!this.isBtnDisabled){e.next=9;break}return e.abrupt("return",ee.sG.Modal.message({type:"error",content:function(){return l("lobby.modal.register.agreementRequiredTips")}}));case 9:return this.loading=!0,(0,oe.C1)("registerClick"),e.next=13,this.doRegister({code:r,geetCaptchaId:i,forceGeetest:n}).finally((function(){g.loading=!1}));case 13:ee.sG.Modal.message({type:"success",content:function(){return l("lobby.modal.register.successTips")}}),(0,oe.C1)("register"),null===(o=this.openOptions)||void 0===o||null===(a=o.onRegisterSuccess)||void 0===a||a.call(o),this.close(),ee.sG.Modal.close("loginModal"),(0,(0,ue.R)().$patch)({isLoginedByRegister:!0,loginPass:this.form.passwd}),e.next=37;break;case 22:if(e.prev=22,e.t0=e.catch(3),this.tryToGetImgVerificationCode(),u=null===e.t0||void 0===e.t0?void 0:e.t0.data,c=ee.CM.ServiceCode,(d=null==u?void 0:u.code)!==c.SWIPER_PUZZLE_GEETEST&&d!==c.NINE_SQUARE_GEETEST&&d!==c.GRAPHIC_CLICK_GEETEST||this.doSubmit({code:d,geetCaptchaId:u.msg}),d===c.FORCE_GEETEST&&(this.isThirdWayBindMode?this.doSubmit({forceGeetest:!0}):this.doSubmit({code:d})),d!==c.CONFIG_CHANGE_ERR){e.next=37;break}return m=(0,le.h)(),f=m.updateSystemInfos,e.next=34,(0,ie.apiGetSysInfo)();case 34:h=e.sent,(p=h.data.data)&&(f(p),this.form.verificationCode&&(this.form.verificationCode=""));case 37:case"end":return e.stop()}}),e,this,[[3,22]])}))),function(){return r.apply(this,arguments)})},{key:"onValidModeChange",value:function(){var e=this;setTimeout((function(){e.tryToGetImgVerificationCode()}),800)}},{key:"onSubmit",value:(t=(0,F.Z)((0,_.Z)().mark((function e(){return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.doSubmit();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderThirdWayAccount",value:function(){var e,t=this,r=this.$createElement,i=(0,se.QT)().t,n=function(){var e;switch(null===(e=t.openOptions)||void 0===e?void 0:e.requester_type){case $.uD.FACEBOOK:return i("lobby.modal.register.thirdAccountLabel",{thirdWay:"Facebook"});case $.uD.GOOGLE:return i("lobby.modal.register.thirdAccountLabel",{thirdWay:"Google"})}}();return r("div",{class:Ee},[r("span",[n]),r("div",[oe.ZP.emailDesensitization((null===(e=this.openOptions)||void 0===e?void 0:e.email)||"")])])}},{key:"afterClose",value:function(){var e=(0,le.h)();2===e.enterPagePopupType&&e.$patch({enterPagePopupType:0}),this.baseAfterClose()}},{key:"renderNormal",value:function(){var e,t,r=this,i=this.$createElement,n=(0,se.QT)().t,o=(0,le.h)(),a=o.language,s=o.ipBindInfos,l=ee.sG.FuncRender.createFormModelItem.call(this);return i(Q.T.Tsx,{attrs:{direction:"vertical",size:14},class:[Re,"en_US"!==a&&"zh_CN"!==a&&this.isThirdWayBindMode?Se:""]},[i(Q.au.Tsx,k()([{ref:"formModel",class:this.isThirdWayBindMode?Ze:""},{props:{rules:this.rules,model:this.form}}]),[[this.isThirdWayBindMode&&this.renderThirdWayAccount(),l.username({prop:"platformId",model:this.form,inputTsxData:{on:{change:function(){r.usernameValidateStatus=null}}},formModelItemTsxData:{class:[we],props:{help:function(){switch(r.usernameValidateStatus){case"validating":return n("lobby.common.tips.validating");case"available":return n("lobby.modal.register.available");default:return""}},extra:function(){if(r.isThirdWayBindMode)return i("span",{class:[xe,ee.CM.CssClassName.Lobby.Color.Red]},[n("lobby.modal.register.editAccountTips")])}}},getRules:function(e){return[e.required,e.pattern]}}),l.userpass({inputTsxData:{props:{hack_defaultVisible:this.isThirdWayBindMode}},prop:"passwd",model:this.form,getRules:function(e){return[e.required,e.pattern,{validator:function(e,t,i){return r.form.passwdConfirm&&r.formModel.validateField(["passwdConfirm"],E()),i(),!0}}]}}),!this.isThirdWayBindMode&&l.userpass({prop:"passwdConfirm",inputTsxData:{props:{hack_defaultVisible:this.isThirdWayBindMode},attrs:{placeholder:n("lobby.modal.register.passwdConfirm")}},model:this.form,getRules:function(e){return[e.required,e.pattern,{validator:function(e,t,i){return t!==r.form.passwd&&i(n("lobby.modal.register.notMatch")),i(),!0}}]}}),this.registerConfig.showRealNameFormItem&&l.userRealName({prop:"realName",model:this.form,getRules:function(e){return r.registerConfig.isRealNameRequired?[e.required,e.pattern,{validator:function(e,t,r){return t.trim()&&1!==t.length?(r(),!0):(r(n("lobby.modal.login.form.realName.placeholder")),!1)}}]:[]},onChange:function(e){var t=e.target;if(r.registerConfig.isRealNameUpperCase){var i=t.value.split("").map((function(e){return Y[e]?Y[e]:e})).join("");i&&(t.value=i),t.value=t.value.replace(/[^a-zA-Z\s\.\·]/g,"").toLocaleUpperCase(),r.form.realName=t.value}else t.value=t.value.replace(K,"").replace(H,""),r.form.realName=t.value},inputTsxData:{on:{blur:function(){var e;r.form.realName=null===(e=r.form.realName)||void 0===e?void 0:e.trim().replace(/\s+/gi," ")},cut:function(e){r.registerConfig.isRealNameUpperCase&&e.preventDefault()},copy:function(e){r.registerConfig.isRealNameUpperCase&&e.preventDefault()},paste:function(e){r.registerConfig.isRealNameUpperCase&&e.preventDefault()}}},formModelItemTsxData:{props:{help:function(){return r.registerConfig.isRealNameUpperCase&&r.registerConfig.isRealNameRequired&&i("div",{class:Ne},[n("lobby.modal.register.realNameError")])}}}})].concat([this.registerConfig.showPhoneFormItem&&this.registerConfig.defaultCountry&&l.userPhoneSelect({prop:"mobilePhoneNumber",formModelItemTsxData:{ref:"mobilePhoneNumberRef"},model:this.form,countryInfos:this.registerConfig.countryInfos,defaultCountry:this.registerConfig.defaultCountry,currentPhoneNumberSegment:this.currentPhoneNumberSegment,onSelectChange:function(e){r.currentPhoneNumberSegment=e,r.form.mobilePhoneNumber=""}}),this.registerConfig.validateWithSmSVerificationCode&&i(z.F0,{ref:"smsVerificationRef",attrs:{prop:"verificationCode",getCodeFunPromise:function(e){return(0,ie.apiGetSmsCode)({create_mode:$.FW.Register,limit_type:"phone",phone_number:e})},targetValue:this.phoneNumberFormat},model:{value:r.form.verificationCode,callback:function(e){r.$set(r.form,"verificationCode",e)}}})],[this.registerConfig.showEmailFormItem&&l.useremail({prop:"email",model:this.form,getRules:function(e){return r.registerConfig.isEmailRequired?[e.pattern,e.required]:[]},onSelectChange:function(){r.formModel.validateField("email",(function(){return null}))}}),this.registerConfig.showEmailFormItem&&i(z.F0,{attrs:{getCodeFunPromise:function(e){return(0,ie.apiGetEmailCodeBeforceLogin)({create_mode:$.FW.Register,email:e})},isRequired:this.registerConfig.isEmailRequired||!!this.form.email,placeholder:n("lobby.modal.login.form.smsCode.placeholder"),mode:"email",prop:"emailCode",targetValue:this.form.email},model:{value:r.form.emailCode,callback:function(e){r.$set(r.form,"emailCode",e)}}})],[this.registerConfig.validateWithImgVerificationCode&&[i(z.F0,{ref:"imgVerificationRef",attrs:{mode:"img",prop:"verificationCode",targetValue:"none"},model:{value:r.form.verificationCode,callback:function(e){r.$set(r.form,"verificationCode",e)}}})],(null===(e=this.registerConfig.currencyInfos)||void 0===e?void 0:e.length)>1&&l.userCurrencySelect({prop:"currency",model:this.form,currencyInfos:this.registerConfig.currencyInfos,current:Z()(this.form,"currency"),selectTsxData:{props:{disabled:!(!this.agentPayload.id&&!this.agentPayload.cid||this.registerConfig.modifyPromoteCurrency!==$.OP.CLOSE||null==s||!s.currency)}},onSelectChange:function(e){r.form.currency=e,r.formModel.validateField("currency",(function(){return null}))},formModelItemTsxData:{props:{help:function(){return r.form.currency&&i("div",{class:Ne},[n("lobby.modal.register.selectCountryError")])}}}}),this.registerConfig.showInviterCodeFormItem&&l.username({prop:"inviter_code",model:this.form,inputTsxData:{attrs:{placeholder:n("lobby.modal.register.inviterAccount"),disabled:this.registerConfig.isInviterCodeReadonly,maxLength:16}},prefix:i(Q.JO.Tsx,{slot:"prefix",attrs:{component:{functional:!0,render:function(){return i("icon-sprite",{class:Ce,attrs:{sprite:ge()}})}}}}),formModelItemTsxData:{props:{help:function(){return r.form.inviter_code&&!r.agentPayload.id&&!r.agentPayload.cid&&i("div",{class:Ae},[n("lobby.modal.register.selectCurrencyTips")])}}},getRules:function(e){return r.registerConfig.isInviterCodeRequired?[ee.sG.Rules.required({},{message:function(){return n("lobby.modal.register.invitetAccountRequired")}}),e.pattern]:[e.pattern]}})])]),i(Q.X2.Tsx,{attrs:{type:"flex",justify:"space-between"},directives:[{name:"show",value:!this.isThirdWayBindMode}],style:ye.Z.passwordTools},[i(Q.JX.Tsx,[i("div",{class:ye.Z["check-box-container"],on:{click:function(e){if(e.target.getAttribute("data-user-agreement"))return r.openUserAgreementModal();r.agreed=!r.agreed}}},[i(Q.XZ.Tsx,{attrs:{checked:this.agreed}}),i("span",{class:ye.Z["check-box-label"],domProps:{innerHTML:n("lobby.modal.register.userAgreement")}})])]),i(Q.JX.Tsx)]),i(Q.X2.Tsx,{attrs:{type:"flex",justify:"space-between","data-btn-len":this.isThirdWayBindMode?2:1},class:[Ie]},[i(Q.zx.Tsx,{directives:[{name:"show",value:this.isThirdWayBindMode}],class:Oe,attrs:{type:"default",loading:this.saveLoading},on:{click:this.onSaveImg}},[n("lobby.modal.register.saveAccountPwd")]),i(Q.zx.Tsx,{attrs:{block:!0,type:"primary",loading:this.loading},class:Oe,on:{click:this.onSubmit}},[this.isThirdWayBindMode?n("lobby.modal.register.confirm"):n("lobby.modal.register.label"),i(z.L4,{attrs:{rewardId:$.sF.Register,right:oe.ZP.px2rem(-15),lang:null===(t=this.form)||void 0===t?void 0:t.currency}})])]),i(Q.X2.Tsx,{attrs:{type:"flex",justify:"space-around"},directives:[{name:"show",value:!this.isThirdWayBindMode}],class:[ye.Z.loginTools,be]},[this.registerConfig.showTryItFree&&i(Q.JX.Tsx,[i(Q.zx.Tsx,{attrs:{type:"link"},on:{click:function(){r.close(),(0,le.h)().$patch({enterPagePopupType:0}),r.$router.push({name:re.x4.GAME,query:(0,M.Z)((0,M.Z)({},r.$route.query),{},{gameCategoryId:String(X.ck.DEMO)})})}}},[n("lobby.modal.login.operate.tryItFree")])]),this.registerConfig.showSMSLogin&&i(Q.JX.Tsx,[i(Q.zx.Tsx,{attrs:{type:"link"},on:{click:this.toSMSLogin}},[n("lobby.modal.login.operate.smsLogin")])]),this.registerConfig.showLoginNow&&i(Q.JX.Tsx,[i(Q.zx.Tsx,{attrs:{type:"link"},on:{click:this.toLogin}},[n("lobby.modal.forgotPassword.loginNow")])])])])}},{key:"render",value:function(){var e=this,t=arguments[0],r=(0,le.h)(),i=r.isWeb;return this.renderModal({modalConfig:{class:[ye.Z.main,ve,"register-modal"],props:{width:i?oe.ZP.px2rem(550):oe.ZP.px2rem(600)}},renderContent:function(){return[t("div",[t(Q.mQ.Tsx,{class:ye.Z.tabs,model:{value:e.activeKey,callback:function(t){e.activeKey=t}}},[e.tabsData.map((function(e){var r=e.key,i=e.tab,n=e.renderContent;return t(Q.mQ.TabPane.Tsx,{key:r,attrs:{tab:i}},[n()])}))])])]}})}}]),m}(de.Z),v=(0,B.Z)(y.prototype,"formModel",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,B.Z)(y.prototype,"smsVerificationRef",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,B.Z)(y.prototype,"mobilePhoneNumberRef",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,B.Z)(y.prototype,"imgVerificationRef",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,B.Z)(y.prototype,"onRecommendAreaCode",[l],Object.getOwnPropertyDescriptor(y.prototype,"onRecommendAreaCode"),y.prototype),(0,B.Z)(y.prototype,"openUserAgreementModal",[u,c],Object.getOwnPropertyDescriptor(y.prototype,"openUserAgreementModal"),y.prototype),(0,B.Z)(y.prototype,"onSaveImg",[d,m],Object.getOwnPropertyDescriptor(y.prototype,"onSaveImg"),y.prototype),(0,B.Z)(y.prototype,"onValidModeChange",[f],Object.getOwnPropertyDescriptor(y.prototype,"onValidModeChange"),y.prototype),(0,B.Z)(y.prototype,"onSubmit",[h,p],Object.getOwnPropertyDescriptor(y.prototype,"onSubmit"),y.prototype),g=y))||g)}}]);