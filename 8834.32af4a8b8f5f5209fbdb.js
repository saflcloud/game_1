(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[8834],{50552:function(e){e.exports={id:"comm_icon_wh--sprite-usage",viewBox:"0 0 10.363 17.074",url:"/assets/sprite.c10e6e11446a81e9da57.svg#comm_icon_wh--sprite",toString:function(){return this.url}}},88834:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return te}});var r,n,a,o,s,d,u,l,p=i(57557),v=i.n(p),c=i(27361),b=i.n(c),y=i(70970),m=i(2813),_=i(3587),h=i(21797),w=i(92317),f=i(82345),k=i(72283),R=i(20793),g=i(50125),x=i(17360),Z=(i(41320),i(92222),i(41539),i(39714),i(57327),i(54747),i(21249),i(69600),i(38880),i(95306)),V=i(90416),P=i(81431),B=i(30813),E=i(27702),L=i(90825),T=i(14614),K=i(72563),C=i(81764),A=i(98292),I=i(20712),q=i(37061),M=i(71707),D=i(77787),N=i(50552),S=i.n(N),O="XUsRryuA9IC2zOJlMtTr",H="BmEoQi0EwTN78N4k9cPg",W="ejJ7KgJPi3aEwhNsCfew",Q="OxGvwfHXXQVNNNoH8gV2",G="oWOki6dTquZVWAx0lScK",Y="FFVTf32mKWROQCq1OHEb",F="YiIfZZKgBUOa10iajsWk",U="pfCXZWFQpExq3MxRvhpj",J="RL9TJMMzDMOQihFhVnG2",z="KkRUNU5i1X4v4833bPfs",X="_2lvGimPeAnoEFiUw_fTw",j="zWM93XVBJEk4aHJfKHVR",$="_QHPzkqbnIhdrHoFHZU1",ee="pKPOO5G_N3TSJhFVK9El";!function(e){e[e.OPEN=1]="OPEN",e[e.CLOSE=0]="CLOSE"}(u||(u={})),function(e){e.NEEDRECHARGE="needRecharge",e.NEEDBET="needBet"}(l||(l={}));var te=(r=(0,B.wA)({name:"Vip"}),n=(0,B.Rl)(),a=(0,B.RL)("store.language",{immediate:!0}),r((s=function(e){(0,k.Z)(p,e);var t,i,r,n,a,o,s=(0,R.Z)(p);function p(){var e;(0,h.Z)(this,p);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e=s.call.apply(s,[this].concat(i)),(0,_.Z)((0,f.Z)(e),"myTableRef",d,(0,f.Z)(e)),(0,g.Z)((0,f.Z)(e),"store",(0,A.h)()),(0,g.Z)((0,f.Z)(e),"activeKey",E.yo.promotion),(0,g.Z)((0,f.Z)(e),"condition",{}),(0,g.Z)((0,f.Z)(e),"firstLoad",!0),e}return(0,w.Z)(p,[{key:"created",value:(o=(0,m.Z)((0,y.Z)().mark((function e(){var t,i,r,n,a;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(null===(t=(0,A.h)().vipInfos)||void 0===t?void 0:t.vip_status)==E._1.OPEN&&(i=(0,I.o)(),r=i.vipdetails,this.userVipReward=r),n=(0,I.o)(),a=n.userDetails,this.setState({userVipInfo:a}),e.next=5,this.queryUserDetails();case 5:return e.next=7,this.queryVipdetails();case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"queryUserDetails",value:(a=(0,m.Z)((0,y.Z)().mark((function e(){var t,i,r;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,I.o)(),i=t.setUserDetails,e.next=3,(0,T.st)();case 3:r=e.sent,this.setState({userVipInfo:r}),i(r);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"openTip",value:function(e){var t,i=this.$createElement,r=(0,C.QT)().t,n=(0,A.h)().isWeb,a=(t={},(0,g.Z)(t,l.NEEDRECHARGE,r("lobby.reward.vip.table.needRechargeTips")),(0,g.Z)(t,l.NEEDBET,r("lobby.reward.vip.table.needBetTips")),t);L.sG.Modal.create({width:n?M.ZP.px2rem(550):M.ZP.px2rem(600),hiddenBtns:!0,closable:!0,title:r("lobby.modal.pay.mark").toString(),content:function(){return i("div",{class:U},[a[e]])}})}},{key:"defaultColumns",get:function(){var e=this,t=this.$createElement,i=(0,C.QT)().t,r=this.vipDataComputed,n=this.activeKey,a=(0,A.h)().isWeb,o=this.state.userVipInfo,s=o.need_validbet,d=o.need_deposit,u=o.next_vip_validbet,p=o.next_vip_deposit;return[{title:i("lobby.reward.vip.table.level"),dataIndex:"vip",key:"vip",width:M.ZP.px2rem(a?230:100),customRender:function(t){return e.renderLevel(+t)},activeKey:null},{title:function(){return t("div",[t("span",{domProps:{innerHTML:i("lobby.reward.vip.rewardMap.needRecharge")}}),t("span",{on:{click:function(){return e.openTip(l.NEEDRECHARGE)}}},[t("icon-sprite",{attrs:{sprite:S()}})])])},dataIndex:"level_up_deposit",key:"level_up_deposit",customRender:function(r,n){var a;return t("div",[!!e.keepLevelStatus&&(null==o?void 0:o.vip)===+n.vip&&void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.keep_level_deposit)&&e.renderLevelProgressBar(+n.last_month_deposit-e.userVipReward.keep_level_deposit,+n.last_month_deposit,i("lobby.reward.vip.rewardMap.retainLack",[e.userVipReward.keep_level_deposit])),t("span",{class:[J]},[(0,K.o)(+r)]),void 0!==(null==o?void 0:o.vip)&&+n.vip-(null==o?void 0:o.vip)==1&&void 0!==d&&void 0!==p?t("div",[e.renderLevelProgressBar(p-d,p,i("lobby.reward.vip.rewardMap.needLack",[d]),j)]):null])},width:"auto",activeKey:r.level_up_deposit?E.yo.promotion:void 0},{title:function(){return t("div",[t("span",{domProps:{innerHTML:i("lobby.reward.vip.rewardMap.needBet")}}),t("span",{on:{click:function(){return e.openTip(l.NEEDBET)}}},[t("icon-sprite",{attrs:{sprite:S()}})])])},dataIndex:"level_up_bet",key:"level_up_bet",customRender:function(r,n){var a;return t("div",[!!e.keepLevelStatus&&(null==o?void 0:o.vip)===+n.vip&&void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.keep_level_bet)&&e.renderLevelProgressBar(+n.last_month_bet-e.userVipReward.keep_level_bet,+n.last_month_bet,i("lobby.reward.vip.rewardMap.retainLack",[e.userVipReward.keep_level_bet])),t("span",{class:[J]},[(0,K.o)(+r)]),void 0!==(null==o?void 0:o.vip)&&+n.vip-(null==o?void 0:o.vip)==1&&void 0!==s&&void 0!==u?t("div",[e.renderLevelProgressBar(u-s,u,i("lobby.reward.vip.rewardMap.needLack",[s]),j)]):null])},width:"auto",activeKey:r.level_up_bet?E.yo.promotion:void 0},{title:i("lobby.reward.vip.table.vipGift"),dataIndex:"vip_gift",key:"vip_gift",customRender:function(t){return e.renderAmount(+t,!0)},width:"auto",activeKey:E.yo.promotion},{title:"",dataIndex:"vip_gift_status",key:"vip_gift_status",width:M.ZP.px2rem(a?160:120),customRender:function(r,n){return t("div",[+r==q.Yq.canReceive&&e.renderButton(i("lobby.reward.base.unReceive"),(function(){return e.receiveReward(n,"vip_gift_status",E.qi.promotion)}),n.loading),(null==o?void 0:o.vip)===+n.vip&&+r==q.Yq.hasReceive?t("div",[e.renderButton(i("lobby.reward.base.hasReceive"),void 0,n.loading,E.sz.Disabled)]):null])},activeKey:r.vip_gift_status||r.vip_gift_status_end?E.yo.promotion:void 0},{title:i("lobby.reward.vip.table.lastMonthDeposit"),dataIndex:"last_month_deposit",key:"last_month_deposit",customRender:function(r,n){var a;return t("div",[void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.keep_level_deposit)&&(null==o?void 0:o.vip)===+n.vip&&e.renderLevelProgressBar(+n.last_month_deposit-e.userVipReward.keep_level_deposit,+n.last_month_deposit,i("lobby.reward.vip.rewardMap.retainLack",[e.userVipReward.keep_level_deposit])),e.renderAmount(+r)])},width:"auto",activeKey:r.last_month_deposit?E.yo.keep:void 0},{title:i("lobby.reward.vip.table.lastMonthBet"),dataIndex:"last_month_bet",key:"last_month_bet",customRender:function(r,n){var a;return t("div",[void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.keep_level_bet)&&(null==o?void 0:o.vip)===+n.vip&&e.renderLevelProgressBar(+n.last_month_bet-e.userVipReward.keep_level_bet,+n.last_month_bet,i("lobby.reward.vip.rewardMap.retainLack",[e.userVipReward.keep_level_bet])),e.renderAmount(+r)])},width:"auto",activeKey:r.last_month_bet?E.yo.keep:void 0},{title:i("lobby.reward.vip.table.dayDeposit"),dataIndex:"day_deposit",key:"day_deposit",customRender:function(r,n){var a;return t("div",[e.renderAmount(+r),void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.day_deposit)&&(null==o?void 0:o.vip)===+n.vip&&e.renderLevelProgressBar(+n.day_deposit-e.userVipReward.day_deposit,+n.day_deposit,i("lobby.reward.vip.lack",[e.userVipReward.day_deposit]),j)])},width:"auto",activeKey:r.day_deposit?E.yo.day:void 0},{title:i("lobby.reward.vip.table.dayBet"),dataIndex:"day_bet",key:"day_bet",customRender:function(r,n){var a;return t("div",[e.renderAmount(+r),void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.day_bet)&&(null==o?void 0:o.vip)===+n.vip&&e.renderLevelProgressBar(+n.day_bet-e.userVipReward.day_bet,+n.day_bet,i("lobby.reward.vip.lack",[e.userVipReward.day_bet]),j)])},width:"auto",activeKey:r.day_bet?E.yo.day:void 0},{title:i("lobby.reward.vip.table.dayBonusLimit"),dataIndex:"day_bonus",key:"day_bonus",customRender:function(t){return e.renderAmount(+t,!0)},width:"auto",activeKey:E.yo.day},{title:"",dataIndex:"day_bonus_status",key:"day_bonus_status",width:M.ZP.px2rem(a?160:120),customRender:function(r,n){return+r==q.Yq.canReceive?e.renderButton(i("lobby.reward.base.unReceive"),(function(){return e.receiveReward(n,"day_bonus_status",E.qi.day)}),n.loading):t("span")},activeKey:r.day_bonus_status?E.yo.day:void 0},{title:i("lobby.reward.vip.table.weekDeposit"),dataIndex:"week_deposit",key:"week_deposit",customRender:function(r,n){var a;return t("div",[e.renderAmount(+r),void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.week_deposit)&&(null==o?void 0:o.vip)===+n.vip&&e.renderLevelProgressBar(+n.week_deposit-e.userVipReward.week_deposit,+n.week_deposit,i("lobby.reward.vip.lack",[e.userVipReward.week_deposit]),j)])},width:"auto",activeKey:r.week_deposit?E.yo.week:void 0},{title:i("lobby.reward.vip.table.weekBet"),dataIndex:"week_bet",key:"week_bet",customRender:function(r,n){var a;return t("div",[e.renderAmount(+r),void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.week_bet)&&(null==o?void 0:o.vip)===+n.vip&&e.renderLevelProgressBar(+n.week_bet-e.userVipReward.week_bet,+n.week_bet,i("lobby.reward.vip.lack",[e.userVipReward.week_bet]),j)])},width:"auto",activeKey:r.week_bet?E.yo.week:void 0},{title:i("lobby.reward.vip.table.weekBonusLimit"),dataIndex:"week_bonus",key:"week_bonus",customRender:function(t){return e.renderAmount(+t,!0)},width:"auto",activeKey:E.yo.week},{title:"",dataIndex:"week_bonus_status",key:"week_bonus_status",width:M.ZP.px2rem(a?160:120),customRender:function(r,n){return+r==q.Yq.canReceive?e.renderButton(i("lobby.reward.base.unReceive"),(function(){return e.receiveReward(n,"week_bonus_status",E.qi.week)}),n.loading):t("span")},activeKey:r.week_bonus_status?E.yo.week:void 0},{title:i("lobby.reward.vip.table.monthDeposit"),dataIndex:"month_deposit",key:"month_deposit",customRender:function(r,n){var a;return t("div",[e.renderAmount(+r),void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.month_deposit)&&(null==o?void 0:o.vip)===+n.vip&&e.renderLevelProgressBar(+n.month_deposit-e.userVipReward.month_deposit,+n.month_deposit,i("lobby.reward.vip.lack",[e.userVipReward.month_deposit]),j)])},width:"auto",activeKey:r.month_deposit?E.yo.month:void 0},{title:i("lobby.reward.vip.table.monthBet"),dataIndex:"month_bet",key:"month_bet",customRender:function(r,n){var a;return t("div",[e.renderAmount(+r),void 0!==(null===(a=e.userVipReward)||void 0===a?void 0:a.month_bet)&&(null==o?void 0:o.vip)===+n.vip&&e.renderLevelProgressBar(+n.month_bet-e.userVipReward.month_bet,+n.month_bet,i("lobby.reward.vip.lack",[e.userVipReward.month_bet]),j)])},width:"auto",activeKey:r.month_bet?E.yo.month:void 0},{title:i("lobby.reward.vip.table.monthBonusLimit"),dataIndex:"month_bonus",key:"month_bonus",customRender:function(t){return e.renderAmount(+t,!0)},width:"auto",activeKey:E.yo.month},{title:"",dataIndex:"month_bonus_status",key:"month_bonus_status",width:M.ZP.px2rem(a?160:120),customRender:function(r,n){return+r==q.Yq.canReceive?e.renderButton(i("lobby.reward.base.unReceive"),(function(){return e.receiveReward(n,"month_bonus_status",E.qi.month)}),n.loading):t("span")},activeKey:r.month_bonus_status?E.yo.month:void 0}].filter((function(e){return e.activeKey==n||null===e.activeKey}))}},{key:"amountComputed",get:function(){var e={vipAmount:0,dayAmount:0,weekAmount:0,monthAmount:0};return this.vipSettings.forEach((function(t){e.vipAmount+=t.vip_gift_status==q.Yq.canReceive?t.vip_gift:0,e.dayAmount+=t.day_bonus_status==q.Yq.canReceive?t.day_bonus:0,e.weekAmount+=t.week_bonus_status==q.Yq.canReceive?t.week_bonus:0,e.monthAmount+=t.month_bonus_status==q.Yq.canReceive?t.month_bonus:0})),e}},{key:"tabs",get:function(){var e=this.$createElement,t=(0,C.QT)().t;return[{label:e("span",[t("lobby.reward.vip.rewardMap.promotion"),this.vipDataComputed.vip_gift_status&&e(D.Z,{class:H,attrs:{left:M.ZP.px2rem(20),top:M.ZP.px2rem(-10),text:"".concat(t("lobby.rightBar.reward")).concat(this.amountComputed.vipAmount),charge:1.1}})]),value:E.yo.promotion,component:e("div")},{label:t("lobby.reward.vip.rewardMap.monthRelegation"),value:E.yo.keep,component:e("div"),display:this.keepLevelStatus},{label:e("span",[t("lobby.reward.vip.rewardMap.day"),this.vipDataComputed.day_bonus_status&&e(D.Z,{class:H,attrs:{left:M.ZP.px2rem(20),top:M.ZP.px2rem(-10),text:"".concat(t("lobby.rightBar.reward")).concat(this.amountComputed.dayAmount),charge:1.1}})]),value:E.yo.day,component:e("div")},{label:e("span",[t("lobby.reward.vip.rewardMap.week"),this.vipDataComputed.week_bonus_status&&e(D.Z,{class:H,attrs:{left:M.ZP.px2rem(20),top:M.ZP.px2rem(-10),text:"".concat(t("lobby.rightBar.reward")).concat(this.amountComputed.weekAmount),charge:1.1}})]),value:E.yo.week,component:e("div")},{label:e("span",[t("lobby.reward.vip.rewardMap.month"),this.vipDataComputed.month_bonus_status&&e(D.Z,{class:H,attrs:{left:M.ZP.px2rem(20),top:M.ZP.px2rem(-10),text:"".concat(t("lobby.rightBar.reward")).concat(this.amountComputed.monthAmount),charge:1.1}})]),value:E.yo.month,component:e("div")}].filter((function(e){return e.display!=u.CLOSE}))}},{key:"query",value:(n=(0,m.Z)((0,y.Z)().mark((function e(){var t,i,r,n=this;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,I.o)(),i=t.vipInfo,!this.firstLoad||null==i||!i.VipSettings){e.next=6;break}return this.handlerQueryList(i),setTimeout((function(){var e;null===(e=n.myTableRef)||void 0===e||e.onConditionChange()})),this.firstLoad=!1,e.abrupt("return",{data:i.VipSettings,isCache:!0});case 6:return e.next=8,this.queryList();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"languageKeyChange",value:(r=(0,m.Z)((0,y.Z)().mark((function e(t,i){return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||t===i){e.next=3;break}return e.next=3,this.resetTable();case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"resetTable",value:(i=(0,m.Z)((0,y.Z)().mark((function e(){var t,i;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryList();case 2:t=e.sent,i=t.data,b()(this.myTableRef,"changeState")({virtualPageNo:1,source:i});case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"receiveReward",value:(t=(0,m.Z)((0,y.Z)().mark((function e(t,i,r){var n=this;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),t.loading=!0,e.next=4,(0,T.TV)({types:r,vip:+t.vip}).then((function(){t[i]=q.Yq.hasReceive,n.resetTable();var e=(0,C.QT)().t;L.sG.Modal.message({type:"success",content:e("lobby.event.invest.receiveSuccess")})})).catch((function(e){var t=200==e.status?e.data.msg:e.message;L.sG.Modal.message({type:"error",content:t})})).finally((function(){t.loading=!1,n.setState({loading:!1})}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,i,r){return t.apply(this,arguments)})},{key:"renderLevelProgressBar",value:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=this.$createElement,a=function(e,t){return 0==t?100:0==e?0:e>t?100:e/t*100};return n("div",{class:z},[n("div",{class:[X,r]},[n(Z.Ex.Tsx,{attrs:{showInfo:!1,percent:a(e,t),strokeWidth:20}}),n("span",{class:"reward-mixins__amount"},["".concat(e,"/").concat(t)])])])}},{key:"render",value:function(){var e=this,t=arguments[0],i=(0,C.QT)(),r=i.t,n=this.state.userVipInfo;return t(V.tK,{attrs:{titleContent:r("lobby.footer.quickJump.vip"),loading:this.state.loading,showBack:!(0,A.h)().isWeb,isShadowContent:!1},class:[O]},[t("div",{class:$},[this.renderVipProgressBar(100,(function(){setTimeout((function(){var t,i;null===(t=e.myTableRef)||void 0===t||t.resetPage(),null===(i=e.myTableRef)||void 0===i||i.onConditionChange()}))})),t("div",{class:W},[t("div",{class:G},[t("p",[r("lobby.reward.vip.table.vipLevelMap")])]),t(V.EH,{class:Q,attrs:{tabsTransparent:!0,tabsNavHiddenForOne:!0,renderList:this.tabs.map((function(e){return v()(e,["component"])})),itemWidth:"auto",persistedActiveName:""},model:{value:e.activeKey,callback:function(t){e.activeKey=t}}}),t(P.F,{ref:"myTableRef",class:[F],attrs:{rowKey:"vip",query:this.query,condition:this.condition,columns:this.defaultColumns,isHiddenPagination:!0,rowClassName:function(e,t){return[(null==n?void 0:n.vip)===+e.vip?"my-vip-level":"",t%2==1?"sign-vip-level":""].join(" ")}}})]),this.vipRule&&t("div",{class:W},[r("lobby.reward.vip.rules"),t("div",{class:Y},[this.vipRule])])]),!(0,A.h)().isWeb&&t("div",{class:ee},[t(Z.zx.Tsx,{attrs:{type:"default"},on:{click:function(){return e.$router.back()}}},[r("lobby.common.tips.return")]),this.renderButton(r("lobby.reward.base.allReceive"),(function(){e.receiveBatchReward((function(){setTimeout((function(){var t,i;null===(t=e.myTableRef)||void 0===t||t.resetPage(),null===(i=e.myTableRef)||void 0===i||i.onConditionChange()}))}))}),this.state.loading,this.computedReceiveButton)])])}}]),p}((0,B.Wr)(q.ZP)),d=(0,x.Z)(s.prototype,"myTableRef",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,x.Z)(s.prototype,"languageKeyChange",[a],Object.getOwnPropertyDescriptor(s.prototype,"languageKeyChange"),s.prototype),o=s))||o)}}]);