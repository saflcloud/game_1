(self.webpackChunkmy_vue_app=self.webpackChunkmy_vue_app||[]).push([[6716],{76091:function(e,t,n){var r=n(76530).PROPER,a=n(47293),i=n(81361);e.exports=function(e){return a((function(){return!!i[e]()||"​᠎"!=="​᠎"[e]()||r&&i[e].name!==e}))}},73210:function(e,t,n){"use strict";var r=n(82109),a=n(53111).trim;r({target:"String",proto:!0,forced:n(76091)("trim")},{trim:function(){return a(this)}})},46702:function(e,t,n){"use strict";n.d(t,{IO:function(){return a},TL:function(){return o},is:function(){return i},vY:function(){return s}});var r=n(90825),a=function(e){return r.Uh.upload({url:"/customer/uploadFile",data:e,customParams:{noEncrypt:!0}}).then((function(e){return e.data.data}))},i=function(e){return r.Uh.post({url:"/customer/feedback",data:e}).then((function(e){return e.data.data}))},s=function(e){return r.Uh.post({url:"/customer/getUserFeedback",data:e}).then((function(e){return e.data.data}))},o=function(e){return r.Uh.post({url:"/customer/getAwardInfo",data:e}).then((function(e){return e.data.data}))}},50116:function(e,t,n){"use strict";n.d(t,{KX:function(){return x},x:function(){return E},ZP:function(){return R}});var r,a,i,s,o,l,u,c,p,d,f,h,m,b,v,y,g,Z,k,w,x,E,C=n(70970),U=n(2813),I=n(3587),L=n(21797),T=n(92317),S=n(82345),_=n(72283),G=n(20793),M=n(50125),P=n(17360),O=(n(41320),n(92222),n(21249),n(74916),n(23123),n(26699),n(32023),n(68309),n(77601),n(69600),n(38880),n(30813)),F=n(81764),X="zvh3SCfANMQil4qoU_lN",z="dnYUUDV25IlSW_S8juP6",D="Eaw_t5ASDXk8DId5Ps3c",N="eogwD7Sfsv4SQ7MYxl2t",A="Ofx4l9bXUCQLvqyvbWOP",V="OqCSuVoUwFCb8_zfyIeP",Y="pRNoweFo4ia8VfONCik4",H="MwzwPFwACsGuPEVYD_74";!function(e){e[e.SIZE_EXCEEDS=1]="SIZE_EXCEEDS",e[e.FILE_TYPE_EXCLUDE=2]="FILE_TYPE_EXCLUDE",e[e.FILE_NULL=3]="FILE_NULL"}(x||(x={})),function(e){e[e.ICON=0]="ICON",e[e.BUTTON=1]="BUTTON"}(E||(E={}));var Q=["image/png","image/jpeg","image/jpg","image/gif"],j=5*Math.pow(2,20),R=(r=(0,O.wA)({name:"ComUploadComp"}),a=(0,O.fI)({default:!1}),i=(0,O.fI)({default:!1}),s=(0,O.fI)({default:!1}),o=(0,O.fI)({default:function(){return E.ICON}}),l=(0,O.fI)({default:function(){return(0,F.QT)().t("lobby.common.upload.text")}}),u=(0,O.fI)({default:""}),c=(0,O.fI)(),p=(0,O.fI)({default:function(){return j}}),d=(0,O.y1)("change"),r((h=function(e){(0,_.Z)(r,e);var t,n=(0,G.Z)(r);function r(){var e;(0,L.Z)(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=n.call.apply(n,[this].concat(a)),(0,I.Z)((0,S.Z)(e),"multiple",m,(0,S.Z)(e)),(0,I.Z)((0,S.Z)(e),"multimedia",b,(0,S.Z)(e)),(0,I.Z)((0,S.Z)(e),"btnCenter",v,(0,S.Z)(e)),(0,I.Z)((0,S.Z)(e),"uploadShape",y,(0,S.Z)(e)),(0,I.Z)((0,S.Z)(e),"text",g,(0,S.Z)(e)),(0,I.Z)((0,S.Z)(e),"previewUrl",Z,(0,S.Z)(e)),(0,I.Z)((0,S.Z)(e),"supportTypeList",k,(0,S.Z)(e)),(0,I.Z)((0,S.Z)(e),"imgLimit",w,(0,S.Z)(e)),(0,M.Z)((0,S.Z)(e),"fileType",""),e}return(0,T.Z)(r,[{key:"sizeLimit",get:function(){var e;return this.multimedia?50*Math.pow(2,20):null!==(e=this.imgLimit)&&void 0!==e?e:j}},{key:"typeList",get:function(){var e,t=null!==(e=this.supportTypeList)&&void 0!==e?e:Q;return this.multimedia&&t.push("video/mp4"),t}},{key:"allowedExtensions",get:function(){return this.typeList.map((function(e){return"".concat(e.split("/")[1])}))}},{key:"handleChange",value:(t=(0,U.Z)((0,C.Z)().mark((function e(t){var n,r,a,i,s;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!==(n=t.target.files)&&void 0!==n?n:[],!((null!==(r=null==a?void 0:a.length)&&void 0!==r?r:0)<0)){e.next=3;break}return e.abrupt("return",{error:x.FILE_NULL});case 3:if(i=a[0],s=function(e){var t;return null!==(t=e.split(".").pop())&&void 0!==t?t:""},!(i.size>this.sizeLimit)){e.next=7;break}return e.abrupt("return",{error:x.SIZE_EXCEEDS});case 7:if(this.typeList.includes(i.type)&&this.allowedExtensions.includes(s(i.name))){e.next=9;break}return e.abrupt("return",{error:x.FILE_TYPE_EXCLUDE});case 9:return this.fileType=i.type,e.abrupt("return",{file:i});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"renderPreview",value:function(){var e=this.$createElement;return/image/g.test(this.previewUrl||"")||/image/g.test(this.fileType)?e("img",{class:N,attrs:{src:this.previewUrl}}):/video/g.test(this.previewUrl||"")||/video/g.test(this.fileType)?e("video",{class:N,attrs:{src:this.previewUrl}}):void 0}},{key:"render",value:function(){var e,t,n=arguments[0];switch(this.uploadShape){case E.ICON:return n("div",{class:H},[n("div",{class:X},[n("span",{class:z}),n("span",{class:D}),n("input",{attrs:{type:"file",multiple:this.multiple,accept:this.typeList.join(",")},class:Y,on:{change:this.handleChange}})]),null===(e=this.$slots)||void 0===e?void 0:e.btnText]);case E.BUTTON:return n("div",{class:(0,M.Z)({},V,this.btnCenter)},[n("div",{class:X},[this.renderPreview()]),n("div",[null===(t=this.$slots)||void 0===t?void 0:t.btnText,n("div",{class:A},[n("span",[this.text]),n("input",{attrs:{type:"file",multiple:this.multiple,accept:this.typeList.join(",")},class:Y,on:{change:this.handleChange}})])])]);default:return n("div")}}}]),r}(O.XY),m=(0,P.Z)(h.prototype,"multiple",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,P.Z)(h.prototype,"multimedia",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,P.Z)(h.prototype,"btnCenter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,P.Z)(h.prototype,"uploadShape",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,P.Z)(h.prototype,"text",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,P.Z)(h.prototype,"previewUrl",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,P.Z)(h.prototype,"supportTypeList",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,P.Z)(h.prototype,"imgLimit",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,P.Z)(h.prototype,"handleChange",[d],Object.getOwnPropertyDescriptor(h.prototype,"handleChange"),h.prototype),f=h))||f)},94899:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var r=n(90825),a=n(50116),i=n(81764),s=function(e){var t=(0,i.QT)().t;if(e)switch(e){case a.KX.FILE_NULL:r.sG.Modal.message({type:"warning",content:t("lobby.common.upload.error.fileNull")});break;case a.KX.FILE_TYPE_EXCLUDE:r.sG.Modal.message({type:"warning",content:t("lobby.common.upload.error.fileType")});break;case a.KX.SIZE_EXCEEDS:r.sG.Modal.message({type:"warning",content:t("lobby.common.upload.error.fileSize")})}}},6716:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var r,a,i,s,o,l,u,c=n(36568),p=n.n(c),d=n(82492),f=n.n(d),h=n(7903),m=n(70970),b=n(2813),v=n(3587),y=n(21797),g=n(92317),Z=n(82345),k=n(72283),w=n(20793),x=n(50125),E=n(17360),C=(n(41320),n(92222),n(41539),n(39714),n(73210),n(38880),n(14577)),U=n(95306),I=n(90416),L=n(30813),T=n(90825),S=n(46702),_=n(94899),G=n(81764),M=n(98292),P=n(71707),O=n(59700),F=n(50116),X="Gxb3hJu5eYgJ4LQLNTrK",z="SF1C13fAAeSZJiXMGuOo",D="vtUX1A22HW0TElq_Mchw",N="oox83qYuLds3wgIf2dqB",A="fgiVBj1h4APOCsVxrtxR",V="UmXrmy3lkfaCMI8M7MbK",Y="RXsk3lmdEWbpMEN8wd52",H="UWU5PYrBA3DMNy22R0BF",Q="k3f5ICfgnlnhQrz7hwWO",j="Jbayid688ClA0jXorcf1",R="HuDeil17yijCXF1YmzNx",B="UFaFHH4XED5rCmuBLIKS",K=(r=(0,L.wA)({name:"Feedback"}),a=(0,L.Rl)(),i=(0,C.WY)(),s=(0,C.K4)(1e3),r((l=function(e){(0,k.Z)(i,e);var t,n,r,a=(0,w.Z)(i);function i(){var e;(0,y.Z)(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=a.call.apply(a,[this].concat(n)),(0,v.Z)((0,Z.Z)(e),"formModel",u,(0,Z.Z)(e)),(0,x.Z)((0,Z.Z)(e),"state",{loading:!1,file:null,previewUrl:"",loadGeetest:!1,form:{content:"",source:"web大厅",geetest:void 0}}),(0,x.Z)((0,Z.Z)(e),"geetestHasValid",!1),e}return(0,g.Z)(i,[{key:"formItemLayout",get:function(){return{labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:19},sm:{span:19}}}}},{key:"renderUpload",get:function(){var e=this.$createElement,t=(0,G.QT)().t,n=this.state.previewUrl;return n?[e("div",{class:[z]},[e("img",{class:N,attrs:{src:n}}),",",e(F.ZP,{on:{change:this.handleUpload},class:[V,D],attrs:{uploadShape:F.x.BUTTON,text:t("lobby.finance.withdraw.add.retry").toString()}})])]:[e("div",{class:z},[e(F.ZP,{on:{change:this.handleUpload}}),e("span",{class:[A,V]},[t("lobby.feedback.feedbackUploadPlaceholder")])])]}},{key:"renderGeetest",value:function(){var e=this.$createElement,t=(0,G.QT)().t,n=(0,M.h)().mainSkinSprite,r=this.state.loadGeetest,a=n["sprite_main-skin_geetest"],i=25/a.width;return e(U.zx.Tsx,{attrs:{loading:r},class:[Q,this.geetestHasValid?j:""],on:{click:this.openGeetest}},[e("icon-sprite",{directives:[{name:"show",value:!r}],attrs:{scale:i,sprite:a}}),this.geetestHasValid?t("lobby.common.components.geetest.success"):t("lobby.common.components.geetest.clickToValid")])}},{key:"open",value:(r=(0,b.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.baseOpen();case 2:this.closeGeetest();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"openGeetest",value:(n=(0,b.Z)((0,m.Z)().mark((function e(){var t,n,r,a=this;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.geetestHasValid&&!this.state.loadGeetest){e.next=3;break}return e.abrupt("return");case 3:return this.setState({loadGeetest:!0}),t=(0,M.h)(),n=t.systemInfos,e.next=7,T.sG.User.initGeetest({geetestConfig:{captchaId:(null==n?void 0:n.geetest_captcha_id.feedback)||"",nextWidth:"100%"}}).finally((function(){a.setState({loadGeetest:!1})}));case 7:(r=e.sent).onSuccess((function(){var e,t,n=r.getValidate();T.sG.User.validateGeetest((0,h.Z)({account:null!==(e=null===(t=(0,M.h)().userInfos)||void 0===t?void 0:t.username.toString())&&void 0!==e?e:""},n)).then((function(){a.geetestHasValid=!0})).catch((function(){a.geetestHasValid=!1}))})).onError((function(){null==r||r.reset()})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.closeGeetest(),this.openGeetest();case 15:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return n.apply(this,arguments)})},{key:"closeGeetest",value:function(){this.geetestHasValid=!1}},{key:"handleUpload",value:function(e){var t=this,n=e.file,r=e.error;if(r)return(0,_.y)(r),void this.setState({file:null});this.setState({file:n});var a=new FileReader;a.onload=function(e){var n,r,a;t.setState({previewUrl:null!==(n=null==e||null===(r=e.target)||void 0===r||null===(a=r.result)||void 0===a?void 0:a.toString())&&void 0!==n?n:""})},a.readAsDataURL(n)}},{key:"onSubmit",value:(t=(0,b.Z)((0,m.Z)().mark((function e(){var t,n,r,a,i,s,o,l,u,c,p=this;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,G.QT)(),n=t.t,r=this.state,a=r.loading,i=r.form,s=r.file,!a){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.formModel.validate();case 7:if(i.content.trim()){e.next=10;break}return T.sG.Modal.message({type:"warning",content:n("lobby.feedback.feedbackContentMessage")}),e.abrupt("return");case 10:if(this.geetestHasValid){e.next=13;break}return T.sG.Modal.message({type:"warning",content:n("lobby.feedback.geetest")}),e.abrupt("return");case 13:if(this.setState({loading:!0}),o=function(){var e=(0,b.Z)((0,m.Z)().mark((function e(t){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.is)(t).finally((function(){p.setState({loading:!1})})).catch((function(){p.closeGeetest()}));case 2:T.sG.Modal.message({type:"success",content:n("lobby.feedback.feedbackTips")}),p.close();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!s){e.next=25;break}return(l=new FormData).append("uploadfile",s),e.next=20,(0,S.IO)(l);case 20:u=e.sent,c=f()({},i,{fileLink:null==u?void 0:u.fileLink}),o(c),e.next=26;break;case 25:o(i);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(4),this.setState({loading:!1});case 31:case"end":return e.stop()}}),e,this,[[4,28]])}))),function(){return t.apply(this,arguments)})},{key:"renderContent",value:function(){var e=this,t=this.$createElement,n=(0,G.QT)().t,r=T.sG.FuncRender.createFormModelItem.call(this),a=this.state,i=a.form,s=a.loading;return t(I.gE,[t("div",[t(U.au.Tsx,p()([{ref:"formModel",attrs:{layout:"horizontal",labelAlign:"right",hideRequiredMark:!0,colon:!0}},{props:(0,h.Z)({model:i},this.formItemLayout)}]),[[r.custom({prop:"content",model:i,formModelItemTsxData:{props:{label:n("lobby.feedback.feedbackContent")}},render:function(){return[t("div",{class:R},[t(U.II.TextArea.Tsx,{attrs:{type:"textarea",maxlength:200,rows:5,placeholder:n("lobby.feedback.feedbackPlaceholder")},model:{value:i.content,callback:function(t){e.$set(i,"content",t)}}})]),t("span",{class:B},[i.content.length,"/200"])]}}),r.custom({prop:"source",model:i,formModelItemTsxData:{props:{label:n("lobby.feedback.feedbackUpload")}},render:function(){return e.renderUpload}}),r.custom({prop:"geetest",model:i,render:function(){return e.renderGeetest()}})]]),t(U.X2.Tsx,{attrs:{type:"flex",justify:"center"},class:Y},[t(U.zx.Tsx,{attrs:{type:"default"},on:{click:this.close}},[n("lobby.common.tips.cancel")]),t(U.zx.Tsx,{attrs:{type:"primary",loading:s},class:s?H:"",on:{click:this.onSubmit}},[n("lobby.feedback.submit")])])])])}},{key:"render",value:function(){var e=(0,G.QT)().t;return this.renderModal({modalConfig:{class:[X],props:{width:P.ZP.px2rem(550),destroyOnClose:!0,title:e("lobby.header.menus.feedback")}},renderContent:this.renderContent})}}]),i}(O.Z),u=(0,E.Z)(l.prototype,"formModel",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,E.Z)(l.prototype,"onSubmit",[i,s],Object.getOwnPropertyDescriptor(l.prototype,"onSubmit"),l.prototype),o=l))||o)}}]);